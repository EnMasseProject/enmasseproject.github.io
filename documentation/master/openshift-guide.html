<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Welcome to the EnMasse documentation, where you can find information to help you learn about
EnMasse and start exploring its features.</p>
</div>
<div class="paragraph">
<p>From getting started to trying out more advanced installation and configuration, these resources provide
what you need to set up and manage EnMasse as a service administrator or a messaging tenant.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enmasse-overview-messaging">1. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EnMasse is an open source project for managed, self-service messaging on <a href="https://kubernetes.io" target="_blank" rel="noopener">Kubernetes</a> and <a href="https://openshift.com" target="_blank" rel="noopener">OpenShift</a>. EnMasse can run on your own infrastructure or in the cloud, and simplifies running a messaging infrastructure for your organization.</p>
</div>
<div class="paragraph">
<p>The service admin can deploy and manage messaging infrastructure, while messaging tenants can request messaging resources, both using both cloud-native APIs and tools.</p>
</div>
<div class="sect2">
<h3 id="features">1.1. Features</h3>
<div class="ulist">
<ul>
<li>
<p>Built-in authentication and authorization of clients and identity management</p>
</li>
<li>
<p>Runs on Kubernetes and OpenShift: deploy on-premise or in the cloud</p>
</li>
<li>
<p>Different messaging patterns such as request-response, publish-subscribe and events</p>
</li>
<li>
<p>Decouple operation of infrastructure from configuration and use by applications</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>EnMasse can be used for many purposes, such as moving your messaging infrastructure to the cloud without depending on a specific cloud provider, building a scalable messaging backbone for IoT, or just as a cloud-ready version of a message broker.</p>
</div>
<div class="paragraph">
<p>EnMasse can provision different types of messaging depending on your use case. A user can request messaging resources by creating an <a href="http://enmasse.io/documentation/master/openshift.html#con-address-space-messaging">address space</a>.</p>
</div>
<div class="paragraph">
<p>EnMasse currently supports a <code>standard</code> and a <code>brokered</code> address space type, each with different semantics.</p>
</div>
<div class="sect3">
<h4 id="standard_address_space_overview">1.1.1. Standard address space</h4>
<div class="paragraph">
<p>The standard address space type is the default type in EnMasse, and is focused on scaling in the number of connections and the throughput of the system. It supports AMQP and MQTT protocols, with more to come in the future. This address space type is based on other open source projects such as <a href="https://activemq.apache.org/artemis/">Apache ActiveMQ Artemis</a> and <a href="https://qpid.apache.org/components/dispatch-router/index.html">Apache Qpid Dispatch Router</a> and provides elastic scaling of these components.  This image illustrates the high-level architecture of the standard address space:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/EnMasseProject/enmasse/master/documentation/design/overview/enmasse_overall_view.png" alt="Standard Address Space">
</div>
</div>
</div>
<div class="sect3">
<h4 id="brokered_address_space_overview">1.1.2. Brokered address space</h4>
<div class="paragraph">
<p>The brokered address space type is the "classic" message broker in the cloud which supports AMQP, CORE, OpenWire, and MQTT protocols. It supports JMS with transactions, message groups, selectors on queues and so on. These features are useful for building complex messaging patterns. This address space is also more lightweight as it features only a single broker and a management console.  This image illustrates the high-level architecture of the brokered address space:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/EnMasseProject/enmasse/master/documentation/design/overview/enmasse_brokered_view.png" alt="Brokered Address Space">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quickstart-messaging-gs">2. Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide will walk through the process of setting up EnMasse on
OpenShift with clients for sending and receiving messages.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>To install EnMasse, the OpenShift client tools are required. You can download the OpenShift
Origin client from <a href="https://github.com/openshift/origin/releases" target="_blank" rel="noopener">OpenShift Origin</a>. EnMasse has
been tested to work with the latest stable release of the OpenShift Origin client.</p>
</li>
<li>
<p>An OpenShift cluster is required. If you do not have an OpenShift cluster available, see
<a href="https://github.com/minishift/minishift" target="_blank" rel="noopener">Minishift</a> for an example of how to run a local instance of OpenShift
on your machine.</p>
</li>
<li>
<p>A user on the OpenShift cluster with <code>cluster-admin</code> permissions is required to set up the required cluster roles and API services.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="downloading-messaging-gs">2.1. Downloading EnMasse</h3>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Download one of the releases from the <a href="https://github.com/EnMasseProject/enmasse/releases">GitHub repository</a> and unpack it.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="installing-using-bundle-messaging-gs">2.2. Installing EnMasse using a YAML bundle</h3>
<div class="paragraph">
<p>The simplest way to install EnMasse is to use the predefined YAML bundles.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a user with <code>cluster-admin</code> privileges:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>(Optional) If you want to deploy to a project other than <code>enmasse-infra</code> you must run the following command and substitute <code>enmasse-infra</code> in subsequent steps:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">sed -i 's/enmasse-infra/<em>my-project</em>/' install/bundles/enmasse/*.yaml</pre>
</div>
</div>
</li>
<li>
<p>Create the project where you want to deploy EnMasse:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc new-project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Change the directory to the location of the downloaded release files.</p>
</li>
<li>
<p>Deploy using the <code>enmasse</code> bundle:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/bundles/enmasse</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the example plans and infrastructure configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/example-plans</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the example roles:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/example-roles</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the <code>standard</code> authentication service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/example-authservices/standard-authservice.yaml</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the Service Catalog integration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/service-broker
oc apply -f install/components/cluster-service-broker</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-address-space-cli-messaging-gs">2.3. Creating address spaces using the command line</h3>
<div class="paragraph">
<p>In EnMasse, you create address spaces using standard command-line tools.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a messaging tenant:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Create the project for the messaging application:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc new-project myapp</pre>
</div>
</div>
</li>
<li>
<p>Create an address space definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited</code></pre>
</div>
</div>
</li>
<li>
<p>Create the address space:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create -f standard-address-space.yaml</pre>
</div>
</div>
</li>
<li>
<p>Check the status of the address space:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspace myspace -o jsonpath={.status.isReady}</pre>
</div>
</div>
<div class="paragraph">
<p>The address space is ready for use when the previous command outputs <code>true</code>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-address-cli-messaging-gs">2.4. Creating addresses using the command line</h3>
<div class="paragraph">
<p>You can create addresses using the command line.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an address definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: Address
metadata:
    name: myspace.myqueue
spec:
    address: myqueue
    type: queue
    plan: standard-small-queue</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Prefixing the name with the address space name is required to ensure addresses from different address spaces do not collide.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create the address:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">oc create -f standard-small-queue.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>List the addresses:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">oc get addresses -o yaml</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="proc-creating-users-cli-messaging-gs">2.5. Creating users using the command line</h3>
<div class="paragraph">
<p>In EnMasse users can be created using standard command-line tools.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have already created an <a href="http://enmasse.io/documentation/master/openshift.html#create-address-space-cli-messaging-gs">address space</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To correctly base64 encode a password for the user definition file, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">echo -n password | base64 #cGFzc3dvcmQ=</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Be sure to use the <code>-n</code> parameter when running this command. Not specifying that parameter will result in an improperly coded password and cause log-in issues.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the user definition to a file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: user.enmasse.io/v1beta1
kind: MessagingUser
metadata:
  name: myspace.user1
spec:
  username: user1
  authentication:
    type: password
    password: cGFzc3dvcmQ= # Base64 encoded
  authorization:
    - addresses: ["myqueue", "queue1", "queue2", "topic*"]
      operations: ["send", "recv"]
    - addresses: ["anycast1"]
      operations: ["send"]</code></pre>
</div>
</div>
</li>
<li>
<p>Create the user and associated user permissions:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create -f <em>user-example1.yaml</em></pre>
</div>
</div>
</li>
<li>
<p>Confirm that the user was created:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get messagingusers</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="send-receive-messaging-gs">2.6. Sending and receiving messages</h3>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Installed <a href="https://qpid.apache.org/proton/index.html">Apache Qpid Proton</a> Python bindings.</p>
</li>
<li>
<p>An address space named <code>myspace</code> must be created.</p>
</li>
<li>
<p>An address named <code>myqueue</code> must be created.</p>
</li>
<li>
<p>A user named <code>user1</code> with password <code>password</code> must be created.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Save Python client example to a file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-python hljs" data-lang="python">from __future__ import print_function, unicode_literals
import optparse
from proton import Message
from proton.handlers import MessagingHandler
from proton.reactor import Container

class HelloWorld(MessagingHandler):
    def __init__(self, url):
        super(HelloWorld, self).__init__()
        self.url = url

    def on_start(self, event):
        event.container.create_receiver(self.url)
        event.container.create_sender(self.url)

    def on_sendable(self, event):
        event.sender.send(Message(body="Hello World!"))
        event.sender.close()

    def on_message(self, event):
        print("Received: " + event.message.body)
        event.connection.close()

parser = optparse.OptionParser(usage="usage: %prog [options]")
parser.add_option("-u", "--url", default="amqps://localhost:5672/myqueue",
                  help="url to use for sending and receiving messages")
opts, args = parser.parse_args()

try:
    Container(HelloWorld(opts.url)).run()
except KeyboardInterrupt: pass</code></pre>
</div>
</div>
</li>
<li>
<p>Retrieve the address space messaging endpoint host name:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>oc get addressspace myspace -o 'jsonpath={.status.endpointStatuses[?(@.name=="messaging")].externalHost}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the output as the host name in the following step.</p>
</div>
</li>
<li>
<p>Run the client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>python client-example1.py -u amqps://user1:password@<em>messaging.example1.com</em>:443/myqueue</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>We have seen how to set up EnMasse on OpenShift, and how to communicate with it using an AMQP client.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="service-admin-guide-messaging">3. Service admin guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The service administrator guide provides resources on how to set up and manage EnMasse,
infrastructure configuration, and plans.</p>
</div>
<div class="sect2">
<h3 id="installing-messaging">3.1. Installing EnMasse</h3>
<div class="paragraph">
<p>EnMasse can be installed by applying the YAML files using the {PlatformName} command-line interface, by using
the Operator Marketplace, or by running the <a href="https://www.ansible.com/" target="_blank" rel="noopener">Ansible</a> playbook.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>To install EnMasse, the OpenShift client tools are required. You can download the OpenShift
Origin client from <a href="https://github.com/openshift/origin/releases" target="_blank" rel="noopener">OpenShift Origin</a>. EnMasse has
been tested to work with the latest stable release of the OpenShift Origin client.</p>
</li>
<li>
<p>An OpenShift cluster is required. If you do not have an OpenShift cluster available, see
<a href="https://github.com/minishift/minishift" target="_blank" rel="noopener">Minishift</a> for an example of how to run a local instance of OpenShift
on your machine.</p>
</li>
<li>
<p>A user on the OpenShift cluster with <code>cluster-admin</code> permissions is required to set up the required cluster roles and API services.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="downloading-messaging">3.1.1. Downloading EnMasse</h4>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Download one of the releases from the <a href="https://github.com/EnMasseProject/enmasse/releases">GitHub repository</a> and unpack it.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="installing-using-bundle-messaging">3.1.2. Installing EnMasse using a YAML bundle</h4>
<div class="paragraph">
<p>The simplest way to install EnMasse is to use the predefined YAML bundles.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a user with <code>cluster-admin</code> privileges:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>(Optional) If you want to deploy to a project other than <code>enmasse-infra</code> you must run the following command and substitute <code>enmasse-infra</code> in subsequent steps:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">sed -i 's/enmasse-infra/<em>my-project</em>/' install/bundles/enmasse/*.yaml</pre>
</div>
</div>
</li>
<li>
<p>Create the project where you want to deploy EnMasse:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc new-project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Change the directory to the location of the downloaded release files.</p>
</li>
<li>
<p>Deploy using the <code>enmasse</code> bundle:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/bundles/enmasse</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the example plans and infrastructure configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/example-plans</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the example roles:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/example-roles</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the <code>standard</code> authentication service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/example-authservices/standard-authservice.yaml</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the Service Catalog integration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/service-broker
oc apply -f install/components/cluster-service-broker</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="installing-using-ansible-messaging">3.1.3. Installing EnMasse using Ansible</h4>
<div class="paragraph">
<p>Installing EnMasse using Ansible requires creating an inventory file with the variables for
configuring the system. Example inventory files can be found in the <code>ansible/inventory</code> folder.</p>
</div>
<div class="paragraph">
<p>The following example inventory file enables a minimal installation of EnMasse:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>[enmasse]
localhost ansible_connection=local

[enmasse:vars]
namespace=enmasse-infra
enable_rbac=False
api_server=True
service_catalog=False
register_api_server=True
keycloak_admin_password=admin
authentication_services=["standard"]
standard_authentication_service_postgresql=False
monitoring_namespace=enmasse-monitoring
monitoring_operator=False
monitoring=False</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following Ansible configuration settings are supported:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Ansible configuration settings</caption>
<colgroup>
<col style="width: 35%;">
<col style="width: 40%;">
<col style="width: 15%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>namespace</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the project where EnMasse is installed.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not applicable</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>enable_rbac</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether to enable RBAC authentication of REST APIs</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>service_catalog</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether to enable integration with the Service Catalog</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>False</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>authentication_services</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the list of authentication services to deploy. Supported values are <code>none</code> and <code>standard</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>none</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>keycloak_admin_password</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the admin password to use for the <code>standard</code> authentication service Keycloak instance</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not applicable</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>yes (if <code>standard</code> authentication service is enabled)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>api_server</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether to enable the REST API server</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>register_api_server</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether to register the API server with OpenShift master</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>False</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>secure_api_server</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether to enable mutual TLS for the API server</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>False</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>install_example_plans</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether to install example plans and infrastructure configurations</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>monitoring_namespace</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the project where EnMasse monitoring is installed.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not applicable</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>monitoring_operator</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether to install the monitoring infrastructure</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not applicable</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an inventory file.</p>
</li>
<li>
<p>Run the Ansible playbook:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">ansible-playbook -i <em>inventory-file</em> ansible/playbooks/openshift/deploy_all.yml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="installing-using-custom-operator-source-messaging">3.1.4. Installing EnMasse using Operator Marketplace</h4>
<div class="paragraph">
<p>If the version of EnMasse you want to install is not available in the <a href="https://www.operatorhub.io" target="_blank" rel="noopener">Operator
Hub</a>, you can install a custom <code>OperatorSource</code> for EnMasse following these steps.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="https://github.com/operator-framework/operator-lifecycle-manager">Operator Lifecycle Manager</a> must be installed.</p>
</li>
<li>
<p><a href="https://github.com/operator-framework/operator-marketplace">Operator Marketplace</a> must be installed.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an <code>OperatorSource</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">cat &lt;&lt;EOF | oc apply -f -
apiVersion: operators.coreos.com/v1
kind: OperatorSource
metadata:
  name: enmasse-operators
  namespace: openshift-marketplace
spec:
  type: appregistry
  endpoint: https://quay.io/cnr
  registryNamespace: enmasse
  displayName: "EnMasse Operators"
  publisher: "EnMasse"
EOF</pre>
</div>
</div>
</li>
<li>
<p>Create a <code>CatalogSourceConfig</code> to enable the operator on your OpenShift cluster:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">cat &lt;&lt;EOF | oc apply -f -
apiVersion: operators.coreos.com/v1
kind: CatalogSourceConfig
metadata:
  name: installed-enmasse-operators
  namespace: openshift-marketplace
spec:
  csDisplayName: EnMasse Operators
  csPublisher: EnMasse
  packages: enmasse
  source: enmasse-operators
  targetNamespace: openshift-marketplace
EOF</pre>
</div>
</div>
</li>
<li>
<p>Create a <code>Subscription</code> to install the operator and receive updates:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">cat &lt;&lt;EOF | oc apply -f -
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: enmasse
  namespace: <em>enmasse-infra</em>
spec:
  channel: alpha
  name: enmasse
  source: installed-enmasse-operators
  sourceNamespace: openshift-marketplace
EOF</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="assembly-installing-configuring-olm-messaging">3.1.5. Installing and configuring EnMasse using the Operator Lifecycle Manager</h4>
<div class="paragraph">
<p>You can use the Operator Lifecycle Manager to install and configure an instance of EnMasse.</p>
</div>
<div class="paragraph">
<p>In OpenShift 4.x, the Operator Lifecycle Manager (OLM) helps users install, update, and  manage the life cycle of all Operators and their associated services running across their clusters. It is part of the Operator Framework, an open source toolkit designed to manage Kubernetes native applications (Operators) in an effective, automated, and scalable way.</p>
</div>
<div class="paragraph">
<p>The OLM runs by default in OpenShift 4.x, which aids cluster administrators in installing, upgrading, and granting access to Operators running on their cluster. The OpenShift console provides management screens for cluster administrators to install Operators and grant specific projects access to use the catalog of Operators available on the cluster.</p>
</div>
<div class="paragraph">
<p>OperatorHub is the graphical interface that OpenShift cluster administrators use to discover, install, and upgrade Operators. With one click, these Operators can be pulled from OperatorHub, installed on the cluster, and managed by the OLM, ready for engineering teams to self-service manage the software in development, test, and production environments.</p>
</div>
<div class="sect4">
<h5 id="proc-olm-installing-from-operatorhub-using-console-messaging">Installing EnMasse from the OperatorHub using the OpenShift console</h5>
<div class="paragraph">
<p>You can install the EnMasse Operator on an OpenShift 4.x cluster by using OperatorHub in the OpenShift console.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Access to an OpenShift 4.x cluster and an account with <code>cluster-admin</code> permissions.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the OpenShift 4.x console, log in using an account with <code>cluster-admin</code> privileges.</p>
</li>
<li>
<p>To create the project where you want to deploy EnMasse, click <strong>Home &gt; Projects</strong>, and then click <strong>Create Project</strong>. The Create Project window opens.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, type <code>enmasse-infra</code> and click <strong>Create</strong>. The <code>enmasse-infra</code> project is created.</p>
</li>
<li>
<p>Click <strong>Operators &gt; OperatorHub</strong>.</p>
</li>
<li>
<p>In the <strong>Filter by keyword</strong> box, type <code>EnMasse</code> to find the EnMasse Operator.</p>
</li>
<li>
<p>Click the EnMasse Operator.  Information about the Operator is displayed.</p>
</li>
<li>
<p>Read the information about the Operator and click <strong>Install</strong>. The Create Operator Subscription page opens.</p>
</li>
<li>
<p>On the <strong>Create Operator Subscription</strong> page, for <strong>Installation Mode</strong>, click <strong>A specific namespace on the cluster</strong>, and then select the <strong>enmasse-infra</strong> namespace from the drop-down list.</p>
</li>
<li>
<p>Accept all of the remaining default selections and click <strong>Subscribe</strong>.</p>
<div class="paragraph">
<p>The <strong>enmasse</strong> page is displayed, where you can monitor the installation progress of the EnMasse Operator subscription.</p>
</div>
</li>
<li>
<p>After the subscription upgrade status is shown as <strong>Up to date</strong>, click <strong>Operators &gt; Installed Operators</strong> to verify that the <strong>EnMasse</strong> ClusterServiceVersion (CSV) is displayed and its <strong>Status</strong> ultimately resolves to <strong>InstallSucceeded</strong> in the <strong>enmasse-infra</strong> namespace.</p>
<div class="paragraph">
<p>For troubleshooting information, see the <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.1/html/applications/operators#olm-installing-operators-from-operatorhub_olm-adding-operators-to-a-cluster">OpenShift documentation</a>.</p>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#assembly-configuring-olm-messaging">Configure EnMasse using the OpenShift console</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="assembly-configuring-olm-messaging">Configuring EnMasse using the OpenShift console</h5>
<div class="paragraph">
<p>After installing EnMasse from the OperatorHub using the OpenShift console, create a new instance of a custom resource for the following items within the <code>enmasse-infra</code> project:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an authentication service</p>
</li>
<li>
<p>infrastructure configuration for an address space type (the example uses the standard address space type)</p>
</li>
<li>
<p>an address space plan</p>
</li>
<li>
<p>an address plan</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After creating the new instances of the custom resources, next:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#create-address-space-cli-messaging">create an address space</a></p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#create-address-cli-messaging">create an address</a></p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#proc-creating-users-cli-messaging">create a messaging user</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following procedures use the example data that is provided when using the OpenShift console.</p>
</div>
<div class="sect5">
<h6 id="proc-create-auth-service-custom-resource-olm-ui-messaging">Creating an authentication service custom resource using the OpenShift console</h6>
<div class="paragraph">
<p>You must create a custom resource for an authentication service to use EnMasse. This example uses the standard authentication service.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the top right, click the <strong>Plus</strong> icon (+). The Import YAML window opens.</p>
</li>
<li>
<p>From the top left drop-down menu, select the <code>enmasse-infra</code> project.</p>
</li>
<li>
<p>Copy the following code:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: AuthenticationService
metadata:
  name: standard-authservice
spec:
  type: standard</code></pre>
</div>
</div>
</li>
<li>
<p>In the Import YAML window, paste the copied code and click <strong>Create</strong>. The AuthenticationService overview page is displayed.</p>
</li>
<li>
<p>Click <strong>Workloads &gt; Pods</strong>. In the <strong>Readiness</strong> column, the Pod status is <code>Ready</code> when the custom resource has been deployed.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#proc-create-auth-service-custom-resource-olm-ui-messaging">Create an infrastructure configuration custom resource using the OpenShift console</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="proc-create-infraconfig-custom-resource-olm-ui-messaging">Creating an infrastructure configuration custom resource using the OpenShift console</h6>
<div class="paragraph">
<p>You must create an infrastructure configuration custom resource to use EnMasse. This example uses <code>StandardInfraConfig</code> for a standard address space.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the top right, click the <strong>Plus</strong> icon (+). The Import YAML window opens.</p>
</li>
<li>
<p>From the top left drop-down menu, select the <code>enmasse-infra</code> project.</p>
</li>
<li>
<p>Copy the following code:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: StandardInfraConfig
metadata:
  name: default</code></pre>
</div>
</div>
</li>
<li>
<p>In the Import YAML window, paste the copied code and click <strong>Create</strong>. The StandardInfraConfig overview page is displayed.</p>
</li>
<li>
<p>Click <strong>Operators &gt; Installed Operators</strong>.</p>
</li>
<li>
<p>Click the EnMasse Operator and click the <strong>Standard Infra Config</strong> tab to verify that its <strong>Status</strong> displays as <strong>Active</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#proc-create-address-space-plan-custom-resource-olm-ui-messaging">Create an address space plan custom resource using the OpenShift console</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="proc-create-address-space-plan-custom-resource-olm-ui-messaging">Creating an address space plan custom resource using the OpenShift console</h6>
<div class="paragraph">
<p>You must create an address space plan custom resource to use EnMasse. This procedure uses the example data that is provided when using the OpenShift console.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the top right, click the <strong>Plus</strong> icon (+). The Import YAML window opens.</p>
</li>
<li>
<p>From the top left drop-down menu, select the <code>enmasse-infra</code> project.</p>
</li>
<li>
<p>Copy the following code:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta2
kind: AddressSpacePlan
metadata:
  name: standard-small
spec:
  addressSpaceType: standard
  infraConfigRef: default
  addressPlans:
    - standard-small-queue
  resourceLimits:
    router: 2.0
    broker: 3.0
    aggregate: 4.0</code></pre>
</div>
</div>
</li>
<li>
<p>In the Import YAML window, paste the copied code and click <strong>Create</strong>. The AddressSpacePlan overview page is displayed.</p>
</li>
<li>
<p>Click <strong>Operators &gt; Installed Operators</strong>.</p>
</li>
<li>
<p>Click the EnMasse Operator and click the <strong>Address Space Plan</strong> tab to verify that its <strong>Status</strong> displays as <strong>Active</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#proc-create-address-plan-custom-resource-olm-ui-messaging">Create an address plan custom resource using the OpenShift console</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="proc-create-address-plan-custom-resource-olm-ui-messaging">Creating an address plan custom resource using the OpenShift console</h6>
<div class="paragraph">
<p>You must create an address plan custom resource to use EnMasse. This procedure uses the example data that is provided when using the OpenShift console.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the top right, click the <strong>Plus</strong> icon (+). The Import YAML window opens.</p>
</li>
<li>
<p>From the top left drop-down menu, select the <code>enmasse-infra</code> project.</p>
</li>
<li>
<p>Copy the following code:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta2
kind: AddressPlan
metadata:
  name: standard-small-queue
spec:
  addressType: queue
  resources:
    router: 0.01
    broker: 0.1</code></pre>
</div>
</div>
</li>
<li>
<p>In the Import YAML window, paste the copied code and click <strong>Create</strong>. The AddressPlan overview page is displayed.</p>
</li>
<li>
<p>Click <strong>Operators &gt; Installed Operators</strong>.</p>
</li>
<li>
<p>Click the EnMasse Operator and click the <strong>Address Plan</strong> tab to verify that its <strong>Status</strong> displays as <strong>Active</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#create-address-space-cli-messaging">create an address space</a></p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#create-address-cli-messaging">create an address</a></p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#proc-creating-users-cli-messaging">create a messaging user</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-messaging">3.2. Configuring EnMasse</h3>
<div class="sect3">
<h4 id="minimal-service-configuration-messaging">3.2.1. Minimal service configuration</h4>
<div class="paragraph">
<p>Configuring EnMasse for production takes some time and consideration. The following procedure will get
you started with a minimal service configuration. For a more complete example, navigate to the
<code>install/components/example-plans</code> folder of the EnMasse distribution. All of the commands
must be run in the namespace where EnMasse is installed.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Save the example configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">apiVersion: admin.enmasse.io/v1beta1
kind: StandardInfraConfig
metadata:
  name: default
spec: {}
---
apiVersion: admin.enmasse.io/v1beta2
kind: AddressPlan
metadata:
  name: standard-small-queue
spec:
  addressType: queue
  resources:
    router: 0.01
    broker: 0.1
---
apiVersion: admin.enmasse.io/v1beta2
kind: AddressSpacePlan
metadata:
  name: standard-small
spec:
  addressSpaceType: standard
  infraConfigRef: default
  addressPlans:
  - standard-small-queue
  resourceLimits:
    router: 2.0
    broker: 3.0
    aggregate: 4.0
---
apiVersion: admin.enmasse.io/v1beta1
kind: AuthenticationService
metadata:
  name: none-authservice
spec:
  type: none</pre>
</div>
</div>
</li>
<li>
<p>Apply the example configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f service-config.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="con-address-space-plans-messaging">3.2.2. Address space plans</h4>
<div class="paragraph">
<p>Address space plans are used to configure quotas and control the resources consumed by address spaces. Address space plans are configured by the EnMasse service operator and are selected by the messaging tenant when creating an address space.</p>
</div>
<div class="paragraph">
<p>EnMasse includes a default set of plans that are sufficient for most use cases.</p>
</div>
<div class="paragraph">
<p>Plans are configured as custom resources. The following example shows a plan for the standard address space:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta2
kind: AddressSpacePlan
metadata:
  name: restrictive-plan
  labels:
    app: enmasse
spec:
  displayName: Restrictive Plan
  displayOrder: 0
  infraConfigRef: default <i class="conum" data-value="1"></i><b>(1)</b>
  shortDescription: A plan with restrictive quotas
  longDescription: A plan with restrictive quotas for the standard address space
  addressSpaceType: standard <i class="conum" data-value="2"></i><b>(2)</b>
  addressPlans: <i class="conum" data-value="3"></i><b>(3)</b>
  - small-queue
  - small-anycast
  resourceLimits: <i class="conum" data-value="4"></i><b>(4)</b>
    router: 2.0
    broker: 2.0
    aggregate: 2.0</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A reference to the <code>StandardInfraConfig</code> (for the <code>standard</code> address space type) or the <code>BrokeredInfraConfig</code> (for the <code>brokered</code> address space type) describing the infrastructure deployed for address spaces using this plan.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The address space type this plan applies to, either <code>standard</code> or <code>brokered</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A list of address plans available to address spaces using this plan.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The maximum number of routers (<code>router</code>) and brokers (<code>broker</code>) for address spaces using this plan. For the <code>brokered</code> address space type, only the <code>broker</code> field is required.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The other fields are used by the EnMasse Console UI. Note the field <code>spec.infraConfigRef</code>, which
points to an infrastructure configuration that must exist when an address space using this plan is created.
For more information about infrastructure configurations, see <a href="http://enmasse.io/documentation/master/openshift.html#infrastructure-configuration-messaging">Infrastructure configuration</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="create-address-space-plans-cli-messaging">3.2.3. Creating address space plans</h4>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service admin:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>Select the project where EnMasse is installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Create an address space plan definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta2
kind: AddressSpacePlan
metadata:
  name: restrictive-plan
  labels:
    app: enmasse
spec:
  displayName: Restrictive Plan
  displayOrder: 0
  infraConfigRef: default
  shortDescription: A plan with restrictive quotas
  longDescription: A plan with restrictive quotas for the standard address space
  addressSpaceType: standard
  addressPlans:
  - small-queue
  - small-anycast
  resourceLimits:
    router: 2.0
    broker: 2.0
    aggregate: 2.0</code></pre>
</div>
</div>
</li>
<li>
<p>Create the address space plan:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create -f restrictive-plan.yaml</pre>
</div>
</div>
</li>
<li>
<p>Verify that schema has been updated and contains the plan:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspaceschema standard -o yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="con-address-plans-messaging">3.2.4. Address plans</h4>
<div class="paragraph">
<p>Address plans specify the expected resource usage of a given address. The sum of the resource usage for all resource types determines the amount of infrastructure provisioned for an address space. A single router and broker pod has a maximum usage of one. If a new address requires additional resources and the resource consumption is within the address space plan limits, a new pod will be created automatically to handle the increased load.</p>
</div>
<div class="paragraph">
<p>Address plans are configured by the EnMasse service operator and are selected when creating an address.</p>
</div>
<div class="paragraph">
<p>EnMasse includes a default set of address plans that are sufficient for most use cases.</p>
</div>
<div class="paragraph">
<p>In the <a href="http://enmasse.io/documentation/master/openshift.html#con-address-space-plans-messaging">Address space plans</a> section, the address space plan references two address plans: <code>small-queue</code> and <code>small-anycast</code>. These address plans are stored as custom resources and are defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta2
kind: AddressPlan
metadata:
  name: small-queue
  labels:
    app: enmasse
spec:
  displayName: Small queue plan
  displayOrder: 0
  shortDescription: A plan for small queues
  longDescription: A plan for small queues that consume little resources
  addressType: queue <i class="conum" data-value="1"></i><b>(1)</b>
  resources: <i class="conum" data-value="2"></i><b>(2)</b>
    router: 0.2
    broker: 0.3
  partitions: 1 <i class="conum" data-value="3"></i><b>(3)</b>
  messageTtl: <i class="conum" data-value="4"></i><b>(4)</b>
    minimim: 30000
    maximum: 300000</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The address type to which this plan applies.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The resources consumed by addresses using this plan. The <code>router</code> field is optional for address plans referenced by a <code>brokered</code> address space plan.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The number of partitions that should be created for queues using this plan. Only available in the <code>standard</code> address space.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>(Optional) Restricts message time-to-live (TTL). Applies to address types <code>queue</code> and <code>topic</code> only.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The other fields are used by the EnMasse Console UI.</p>
</div>
<div class="paragraph">
<p>A single router can support five instances of addresses and broker can support three instances of addresses with this plan. If the number of addresses with this plan increases to four, another broker is created. If it increases further to six, another router is created as well.</p>
</div>
<div class="paragraph">
<p>In the <code>standard</code> address space, address plans for the <code>queue</code> address type may contain a field
<code>partitions</code>, which allows a queue to be sharded across multiple brokers for HA and improved performance. Specifying an amount of <code>broker</code> resource above 1 will automatically cause a queue to be partitioned.</p>
</div>
<div class="paragraph">
<p>The <code>messageTtl</code> field is used to restrict the effective <a href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-properties"><code>absolute-expiry-time</code></a> of
any message put to a queue or topic. The <code>maximum</code> and <code>minimum</code> values are defined in milliseconds. The system adjusts the TTL value of an incoming message to a particular address based on these values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a messages arrives at the address with a TTL value that is greater than the <code>maximum</code> value, the system changes the message TTL to the maximum value.</p>
</li>
<li>
<p>If a message arrives at the address with a TTL value that is less than the <code>minimum</code> value, the system changes the message TTL to the minimum value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Messages that arrive without a TTL defined are considered to have a TTL value of infinity.</p>
</div>
<div class="paragraph">
<p>Expired messages will be automatically removed from the <code>queue</code>, <code>subscription</code> or temporary topic subscription periodically. These messages are lost. This occurs every 30 seconds.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A sharded queue no longer guarantees message ordering.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Although the example address space plan in <a href="http://enmasse.io/documentation/master/openshift.html#con-address-space-plans-messaging">Address space plans</a> allows two routers and two brokers to be deployed, it only allows two pods to be deployed in total. This means that the address space is restricted to three addresses with the <code>small-queue</code> plan.</p>
</div>
<div class="paragraph">
<p>The <code>small-anycast</code> plan does not consume any broker resources, and can provision two routers at the expense of not being able to create any brokers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta2
kind: AddressPlan
metadata:
  name: small-anycast
  labels:
    app: enmasse
spec:
  addressType: anycast
  resources:
    router: 0.2</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this plan, up to 10 addresses can be created.</p>
</div>
</div>
<div class="sect3">
<h4 id="create-address-plans-cli-messaging">3.2.5. Creating address plans</h4>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service admin:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>Select the project where EnMasse is installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Create an address plan definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta2
kind: AddressPlan
metadata:
  name: small-anycast
  labels:
    app: enmasse
spec:
  addressType: anycast
  resources:
    router: 0.2</code></pre>
</div>
</div>
</li>
<li>
<p>Create the address plan:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create -f small-anycast-plan.yaml</pre>
</div>
</div>
</li>
<li>
<p>Verify that schema has been updated and contains the plan:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspaceschema standard -o yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="infrastructure-configuration-messaging">3.2.6. Infrastructure configuration</h4>
<div class="paragraph">
<p>EnMasse creates infrastructure components such as routers, brokers, and consoles. These
components can be configured while the system is running, and EnMasse automatically updates
the components with the new settings. The EnMasse service operator can edit the EnMasse
default infrastructure configuration or create new configurations.</p>
</div>
<div class="paragraph">
<p>Infrastructure configurations can be referred to from one or more address space plans. For more information
about address space plans, see <a href="http://enmasse.io/documentation/master/openshift.html#con-address-space-plans-messaging">Address space plans</a>.</p>
</div>
<div class="paragraph">
<p>Infrastructure configuration can be managed for both <code>brokered</code> and <code>standard</code> infrastructure
using <code>BrokeredInfraConfig</code> and <code>StandardInfraConfig</code> resources.</p>
</div>
<div class="sect4">
<h5 id="con-brokered-infra-config-messaging">Brokered infrastructure configuration</h5>
<div class="paragraph">
<p><code>BrokeredInfraConfig</code> resources are used to configure infrastructure deployed by <code>brokered</code> address
spaces. Address space plans reference the brokered infrastructure configuration using the
<code>spec.infraConfigRef</code> field. For more information about address space plans, see <a href="http://enmasse.io/documentation/master/openshift.html#con-address-space-plans-messaging">Address space plans</a>.</p>
</div>
<div class="paragraph">
<p>For detailed information about the available brokered infrastructure configuration fields, see the <a href="http://enmasse.io/documentation/master/openshift.html#ref-brokered-infra-config-fields-messaging">Brokered infrastructure configuration fields table</a>.</p>
</div>
<div class="sect5">
<h6 id="ref-brokered-infra-config-example-messaging">Brokered infrastructure configuration example</h6>
<div class="paragraph">
<p>The following example of a brokered infrastructure configuration file shows the various settings that can be specified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: BrokeredInfraConfig
metadata:
  name: brokered-infra-config-example
spec:
  version: "1.0-SNAPSHOT" <i class="conum" data-value="1"></i><b>(1)</b>
  admin: <i class="conum" data-value="2"></i><b>(2)</b>
    resources:
      memory: 256Mi
    podTemplate:
      metadata:
        labels:
          key: value
  broker: <i class="conum" data-value="3"></i><b>(3)</b>
    resources:
      memory: 2Gi
      storage: 100Gi
    addressFullPolicy: PAGE
    globalMaxSize: 256Mb
    podTemplate: <i class="conum" data-value="4"></i><b>(4)</b>
      spec:
        priorityClassName: messaging</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specifies the EnMasse version used. When upgrading, EnMasse uses
this field to determine whether to upgrade the infrastructure to the requested version. If omitted,
the version is assumed to be the same version as the controllers reading the configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the settings you can configure for the <code>admin</code> components.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specifies the settings you can configure for the <code>broker</code> components. Note that changing
the <code>.broker.resources.storage</code> setting does not configure the existing broker storage size.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>For both <code>admin</code> and <code>broker</code> components you can configure the following <code>podTemplate</code> elements:
<div class="ulist">
<ul>
<li>
<p><code>metadata.labels</code></p>
</li>
<li>
<p><code>spec.priorityClassName</code></p>
</li>
<li>
<p><code>spec.tolerations</code></p>
</li>
<li>
<p><code>spec.affinity</code></p>
</li>
<li>
<p><code>spec.containers.readinessProbe</code></p>
</li>
<li>
<p><code>spec.containers.livenessProbe</code></p>
</li>
<li>
<p><code>spec.containers.resources</code></p>
</li>
<li>
<p><code>spec.containers.env</code></p>
<div class="paragraph">
<p>All other <code>podTemplate</code> elements are ignored. For more information about these elements, see the OpenShift documentation in the following <em>Related links</em> section.</p>
</div>
<div class="paragraph">
<p>For more information about how to set a readiness probe timeout, see <a href="http://enmasse.io/documentation/master/openshift.html#ref-brokered-infra-config-override-probe-timeout-messaging">Overriding the readiness probe timing for brokered infrastructure configuration</a>.</p>
</div>
</li>
</ul>
</div></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For detailed information about all of the available brokered infrastructure configuration fields, see the <a href="http://enmasse.io/documentation/master/openshift.html#ref-brokered-infra-config-fields-messaging">Brokered infrastructure configuration fields table</a>.</p>
</div>
<div class="ulist">
<div class="title">Related links</div>
<ul>
<li>
<p>For more information about the <code>podTemplate</code> settings, see the following OpenShift documentation:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cluster_administration/index#admin-guide-priority-preemption">Pod priority</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cluster_administration/index#taints-and-tolerations">Taints and tolerations</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cluster_administration/index#admin-guide-sched-pod-affinity">Affinity and anti-affinity</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/developer_guide/dev-guide-application-health">Application health</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/developer_guide/dev-guide-compute-resources#dev-compute-resources">Compute resources</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/developer_guide/index#list-environment-variables">Environment variables</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="ref-brokered-infra-config-override-probe-timeout-messaging">Overriding the probe timing for brokered infrastructure configuration</h6>
<div class="paragraph">
<p>You can override the default values for the probe timing on broker resources. You might want to change the default values if, for example, it takes longer than expected for the broker storage to become available, or a server is slow.</p>
</div>
<div class="paragraph">
<p>The following example shows how to override certain default values of the readiness probe for broker resources.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: BrokeredInfraConfig
metadata:
  name: brokered-infra-config
spec:
  broker:
    ...
    podTemplate:
      spec:
        containers:
          - name: broker <i class="conum" data-value="1"></i><b>(1)</b>
            readinessProbe:
              failureThreshold: 6 <i class="conum" data-value="2"></i><b>(2)</b>
              initialDelaySeconds: 20 <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>name</code> value must match the target container name. For a broker, the <code>podTemplate</code> name is <code>broker</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the number of times that OpenShift tries when a Pod starts and the probe fails before either the Pod is marked <code>Unready</code> for a readiness probe, or restarting the container for a liveness probe. The default value is <code>3</code>, and the minimum value is <code>1</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specifies the number of seconds before performing the first probe after the container starts.</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Related links</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html/developer_guide/dev-guide-application-health">OpenShift 3.11 documentation on overriding probe timeouts</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.1/html-single/nodes/index#nodes-nodes-health">OpenShift 4.1 documentation on overriding probe timeouts</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="con-standard-infra-config-messaging">Standard infrastructure configuration</h5>
<div class="paragraph">
<p><code>StandardInfraConfig</code> resources are used to configure infrastructure deployed by <code>standard</code> address
spaces. Address space plans reference the standard infrastructure configuration using the
<code>spec.infraConfigRef</code> field. For more information about address space plans, see <a href="http://enmasse.io/documentation/master/openshift.html#con-address-space-plans-messaging">Address space plans</a>.</p>
</div>
<div class="paragraph">
<p>For detailed information about the available standard infrastructure configuration fields, see the <a href="http://enmasse.io/documentation/master/openshift.html#ref-standard-infra-config-fields-messaging">Standard infrastructure configuration fields table</a>.</p>
</div>
<div class="sect5">
<h6 id="ref-standard-infra-config-example-messaging">Standard infrastructure configuration example</h6>
<div class="paragraph">
<p>The following example of a standard infrastructure configuration file shows the various settings that can be specified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: StandardInfraConfig
metadata:
  name: myconfig
spec:
  version: "1.0-SNAPSHOT" <i class="conum" data-value="1"></i><b>(1)</b>
  admin: <i class="conum" data-value="2"></i><b>(2)</b>
    resources:
      memory: 256Mi
  broker: <i class="conum" data-value="3"></i><b>(3)</b>
    resources:
      cpu: 0.5
      memory: 2Gi
      storage: 100Gi
    addressFullPolicy: PAGE
  router: <i class="conum" data-value="4"></i><b>(4)</b>
    resources:
      cpu: 1
      memory: 256Mi
    linkCapacity: 1000
    minReplicas: 1
    policy:
      maxConnections: 1000
      maxConnectionsPerHost: 1
      maxConnectionsPerUser: 10
      maxSessionsPerConnection: 10
      maxSendersPerConnection: 5
      maxReceiversPerConnection: 5
    podTemplate: <i class="conum" data-value="5"></i><b>(5)</b>
      spec:
        affinity:
          nodeAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
              matchExpressions:
              - key: e2e-az-EastWest
                operator: In
                values:
                - e2e-az-East
                - e2e-az-West</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specifies the EnMasse version used. When upgrading, EnMasse uses
this field to determine whether to upgrade the infrastructure to the requested version. If omitted,
the version is assumed to be the same version as the controllers reading the configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the settings you can configure for the <code>admin</code> components.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specifies the settings you can configure for the <code>broker</code> components. Changing
the <code>.broker.resources.storage</code> setting does not configure the existing broker storage size.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specifies the settings you can configure for the <code>router</code> components.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>For <code>admin</code>, <code>broker</code>, and <code>router</code> components you can configure the following <code>podTemplate</code> elements:
<div class="ulist">
<ul>
<li>
<p><code>metadata.labels</code></p>
</li>
<li>
<p><code>spec.priorityClassName</code></p>
</li>
<li>
<p><code>spec.tolerations</code></p>
</li>
<li>
<p><code>spec.affinity</code></p>
</li>
<li>
<p><code>spec.containers.resources</code></p>
</li>
<li>
<p><code>spec.containers.readinessProbe</code></p>
</li>
<li>
<p><code>spec.containers.livenessProbe</code></p>
</li>
<li>
<p><code>spec.containers.env</code></p>
<div class="paragraph">
<p>All other <code>podTemplate</code> elements are ignored. For more information about these elements, see the OpenShift documentation in the following <em>Related links</em> section.</p>
</div>
<div class="paragraph">
<p>For more information about how to set a readiness probe timeout, see <a href="http://enmasse.io/documentation/master/openshift.html#ref-standard-infra-config-override-probe-timeout-messaging">Overriding the readiness probe timing for standard infrastructure configuration</a>.</p>
</div>
</li>
</ul>
</div></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For detailed information about all of the available standard infrastructure configuration fields, see the <a href="http://enmasse.io/documentation/master/openshift.html#ref-standard-infra-config-fields-messaging">Standard infrastructure configuration fields table</a>.</p>
</div>
<div class="ulist">
<div class="title">Related links</div>
<ul>
<li>
<p>For more information about the <code>podTemplate</code> settings, see the following OpenShift documentation:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cluster_administration/index#admin-guide-priority-preemption">Pod priority</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cluster_administration/index#taints-and-tolerations">Taints and tolerations</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cluster_administration/index#admin-guide-sched-pod-affinity">Affinity and anti-affinity</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/developer_guide/dev-guide-application-health">Application health</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/developer_guide/dev-guide-compute-resources#dev-compute-resources">Compute resources</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/developer_guide/index#list-environment-variables">Environment variables</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="ref-standard-infra-config-override-probe-timeout-messaging">Overriding the probe timing for standard infrastructure configuration</h6>
<div class="paragraph">
<p>You can override the default values for probe timing on broker and router resources. You might want to change the default values if, for example, it takes longer than expected for the broker storage to become available, or a server is slow.</p>
</div>
<div class="paragraph">
<p>The following example shows how to override certain default values of the readiness probe timeout for a broker resource and a liveness probe for a router resource.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: StandardInfraConfig
metadata:
  name: standard-infra-config
spec:
  broker:
    ...
    podTemplate:
      spec:
        containers:
          - name: broker <i class="conum" data-value="1"></i><b>(1)</b>
            readinessProbe:
              failureThreshold: 6 <i class="conum" data-value="2"></i><b>(2)</b>
              initialDelaySeconds: 20 <i class="conum" data-value="3"></i><b>(3)</b>

  router:
    ...
    podTemplate:
      spec:
        containers:
          - name: router <i class="conum" data-value="1"></i><b>(1)</b>
            livenessProbe:
              failureThreshold: 6 <i class="conum" data-value="2"></i><b>(2)</b>
              initialDelaySeconds: 20 <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>name</code> value must match the target container name. For example, for a broker <code>podTemplate</code>, <code>name</code> is <code>broker</code>, and for a router <code>podTemplate</code>, it is <code>router</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the number of times that OpenShift tries when a Pod starts and the probe fails before either the Pod is marked <code>Unready</code> for a readiness probe, or restarting the container for a liveness probe. The default value is <code>3</code>, and the minimum value is <code>1</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specifies the number of seconds before performing the first probe after the container starts.</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Related links</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html/developer_guide/dev-guide-application-health">OpenShift 3.11 documentation about liveness and readiness probes (application health)</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.1/html-single/nodes/index#nodes-nodes-health">OpenShift 4.1 documentation about liveness and readiness probes (application health)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="create-edit-infra-config-messaging">3.2.7. Creating and editing infrastructure configurations</h4>
<div class="paragraph">
<p>You can create a new infrastructure configuration or edit an existing one. For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#infrastructure-configuration-messaging">Infrastructure configuration</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service operator:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Change to the project where EnMasse is installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project _enmasse-infra_</pre>
</div>
</div>
</li>
<li>
<p>Edit the existing infrastructure configuration, or create a new infrastructure configuration using the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: StandardInfraConfig
metadata:
  name: myconfig
spec:
  version: "1.0-SNAPSHOT"
  admin:
    resources:
      memory: 256Mi
  broker:
    resources:
      memory: 2Gi
      storage: 100Gi
    addressFullPolicy: PAGE
  router:
    resources:
      memory: 256Mi
    linkCapacity: 1000
    minReplicas: 1</code></pre>
</div>
</div>
</li>
<li>
<p>Apply the configuration changes:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f standard-infra-config-example.yaml</pre>
</div>
</div>
</li>
<li>
<p>Monitor the pods while they are restarted:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get pods -w</pre>
</div>
</div>
<div class="paragraph">
<p>The configuration changes are applied within several minutes.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="assembly-auth-services-messaging">3.2.8. Authentication services</h4>
<div class="paragraph">
<p>Authentication services are used to configure the authentication and authorization endpoints
available to messaging clients. The authentication services are configured by the EnMasse
service operator, and are specified when creating an address space.</p>
</div>
<div class="paragraph">
<p>Authentication services are configured as Custom Resources. An authentication service has a type, which can be <code>standard</code>, <code>external</code>, or <code>none</code>.</p>
</div>
<div class="sect4">
<h5 id="con-standard-auth-service-messaging">Standard authentication service</h5>
<div class="paragraph">
<p>The <code>standard</code> authentication service type allows the tenant administrator to manage users and their related permissions through the <code>MessagingUser</code> Custom Resource. This is achieved by using a Keycloak instance to store user credentials and access policies. For typical use cases only one <code>standard</code> authentication service needs to be defined.</p>
</div>
<div class="sect5">
<h6 id="ref-standard-auth-service-example-messaging">Standard authentication service example</h6>
<div class="paragraph">
<p>The following example shows an authentication service of type <code>standard</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: AuthenticationService
metadata:
  name: standard
spec:
  type: standard <i class="conum" data-value="1"></i><b>(1)</b>
  standard:
    credentialsSecret: <i class="conum" data-value="2"></i><b>(2)</b>
      name: my-admin-credentials
    certificateSecret <i class="conum" data-value="3"></i><b>(3)</b>
      name: my-authservice-certificate
    resources: <i class="conum" data-value="4"></i><b>(4)</b>
      requests:
        memory: 2Gi
      limits:
        memory: 2Gi
    storage: <i class="conum" data-value="5"></i><b>(5)</b>
      type: persistent-claim
      size: 5Gi
    datasource: <i class="conum" data-value="6"></i><b>(6)</b>
      type: postgresql
      host: example.com
      port: 5432
      database: authdb</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Valid values for <code>type</code> are <code>none</code>, <code>standard</code>, or <code>external</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>(Optional) The secret must contain the <code>admin.username</code> field for the user and the <code>admin.password</code> field for the password of the Keycloak admin user. If not specified, a random password will be generated and stored in a secret.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>(Optional on OpenShift) A custom certificate can be specified. On OpenShift, a certificate is automatically created if not specified.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>(Optional) Resource limits for the Keycloak instance can be specified.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>(Optional) The storage type can be specified as <code>ephemeral</code> or <code>persistent-claim</code>. For <code>persistent-claim</code>, you should also configure the size of the claim. The default type is <code>ephemeral</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>(Optional) Specifies the data source to be used by Keycloak. The default option is the embedded <code>h2</code> data source. For production usage, the <code>postgresql</code> data source is recommended.</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="proc-deploying-standard-auth-service-messaging">Deploying the <code>standard</code> authentication service</h6>
<div class="paragraph">
<p>To implement the <code>standard</code> authentication service, you deploy it.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service admin:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u admin</pre>
</div>
</div>
</li>
<li>
<p>Change to the project where EnMasse is installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Create an <code>AuthenticationService</code> definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: AuthenticationService
metadata:
  name: standard-authservice
spec:
  type: standard</code></pre>
</div>
</div>
</li>
<li>
<p>Deploy the authentication service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create -f standard-authservice.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="proc-deploying-standard-auth-service-ha-messaging">Deploying the <code>standard</code> authentication service for high availability (HA)</h6>
<div class="paragraph">
<p>For production deployment, the authentication services should be setup for high availability in order to reduce downtime during OpenShift updates or in the event of a node failure. To implement the <code>standard</code> authentication service in HA mode, you deploy it using a PostgreSQL database as the backend.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A PostgreSQL database.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service admin:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u admin</pre>
</div>
</div>
</li>
<li>
<p>Create a secret with the database credentials:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">oc create secret generic db-creds -n <em>enmasse-infra</em> --from-literal=database-user=<em>admin</em> --from-literal=database-password=<em>secure-password</em></code></pre>
</div>
</div>
</li>
<li>
<p>Create an <code>AuthenticationService</code> definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: AuthenticationService
metadata:
  name: standard-authservice
spec:
  type: standard
  standard:
    replicas: 2
    datasource:
      type: postgresql
      host: database.example.com
      port: 5431
      database: auth
      credentialsSecret:
        name: db-creds</code></pre>
</div>
</div>
</li>
<li>
<p>Deploy the authentication service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create -f standard-authservice.yaml -n <em>enmasse-infra</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect4">
<h5 id="con-external-auth-service-messaging">External authentication service</h5>
<div class="paragraph">
<p>With the <code>external</code> authentication service you can configure an external provider of authentication and
authorization policies through an AMQP SASL handshake. This configuration can be used to implement a bridge for
your existing identity management system.</p>
</div>
<div class="paragraph">
<p>Depending on your use case, you might define several <code>external</code> authentication services.</p>
</div>
<div class="sect5">
<h6 id="ref-external-auth-service-example-messaging">External authentication service example</h6>
<div class="paragraph">
<p>The following example shows an authentication service of type <code>external</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: AuthenticationService
metadata:
  name: my-external-1
spec:
  type: external
  realm: myrealm <i class="conum" data-value="1"></i><b>(1)</b>
  external:
    host: example.com <i class="conum" data-value="2"></i><b>(2)</b>
    port: 5671 <i class="conum" data-value="3"></i><b>(3)</b>
    caCertSecret: <i class="conum" data-value="4"></i><b>(4)</b>
      name: my-ca-cert</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Optional) The <code>realm</code> is passed in the authentication request. If not specified, an identifier in the form of <em>namespace-addressspace</em> is used as the realm.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The host name of the external authentication server.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The port number of the external authentication server.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>(Optional) The CA certificate to trust when connecting to the authentication server.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The external authentication server must implement the API described in the <a href="http://enmasse.io/documentation/master/openshift.html#con-external-authentication-server-api-messaging">External authentication server API</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="ref-external-auth-service-example-allow-overrides-messaging">External authentication service example allowing overrides</h6>
<div class="paragraph">
<p>The following example shows an authentication service of type <code>external</code> that allows overrides to the host name, port number, and realm by the messaging tenant:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: AuthenticationService
metadata:
  name: my-external-2
spec:
  type: external
  realm: myrealm <i class="conum" data-value="1"></i><b>(1)</b>
  external:
    host: example.org <i class="conum" data-value="2"></i><b>(2)</b>
    port: 5671 <i class="conum" data-value="3"></i><b>(3)</b>
    caCertSecret: <i class="conum" data-value="4"></i><b>(4)</b>
      name: my-ca-cert
    allowOverride: true <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Optional) The <code>realm</code> is passed in the authentication request. If not specified, an identifier in the form of <em>namespace-addressspace</em> is used as the realm.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The host name of the external authentication server.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The port number of the external authentication server.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>(Optional) The CA certificate to trust when connecting to the authentication server.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>(Optional) Specifies whether address space overrides are allowed to the host name, port number, realm, and CA certificate. Valid values are <code>true</code> or <code>false</code>. If not specified, the default value is <code>false</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The external authentication server must implement the API described in the <a href="http://enmasse.io/documentation/master/openshift.html#con-external-authentication-server-api-messaging">External authentication server API</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="con-external-authentication-server-api-messaging">External authentication server API</h6>
<div class="paragraph">
<p>An external authentication server must implement an AMQP SASL handshake, read the connection
properties of the client, and respond with the expected connection properties containing the
authentication and authorization information. The authentication server is queried by the address
space components, such as the router and broker, whenever a new connection is established to the
messaging endpoints.</p>
</div>
<div class="sect6">
<h7 id="authentication">Authentication</h7>
<div class="paragraph">
<p>The requested identity of the client can be read from the SASL handshake <code>username</code>. The
implementation can then authenticate the user.</p>
</div>
<div class="paragraph">
<p>The authenticated identity is returned in the <code>authenticated-identity</code> map with the following
key/values. While this example uses JSON, it must be set as an AMQP map on the connection
property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
    "authenticated-identity": {
        "sub": "myid",
        "preferred_username": "myuser"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="authorization">Authorization</h7>
<div class="paragraph">
<p>Authorization is a capability that can be requested by the client using the <code>ADDRESS-AUTHZ</code>
connection capability. If this is set on the connection, the server responds with this
capability in the offered capabilities, and add the authorization information to the connection
properties.</p>
</div>
<div class="paragraph">
<p>The authorization information is stored within a map that correlates the address to a list of operations allowed on
that address. The following connection property information contains the policies for the addresses
<code>myqueue</code> and <code>mytopic</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
    "address-authz": {
        "myqueue": [
          "send",
          "recv"
        ],
        "mytopic": [
          "send"
        ]
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The allowed operations are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>send</code> - User can send to the address.</p>
</li>
<li>
<p><code>recv</code> - User can receive from the address.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="con-none-auth-service-messaging">None authentication service</h5>
<div class="paragraph">
<p>The <code>none</code> authentication service type allows any client using any user name and password to send and receive messages to any address.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is not recommended to use the <code>none</code> authentication service in production environments. It is intended only to be used in non-production environments, such as internal test or development environments.
</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="proc-deploying-none-auth-service-messaging">Deploying the <code>none</code> authentication service</h6>
<div class="paragraph">
<p>To implement the <code>none</code> authentication service, you deploy it.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service admin:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u admin</pre>
</div>
</div>
</li>
<li>
<p>Change to the project where EnMasse is installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Create an <code>AuthenticationService</code> definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: AuthenticationService
metadata:
  name: none-authservice
spec:
  type: none</code></pre>
</div>
</div>
</li>
<li>
<p>Deploy the authentication service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create -f none-authservice.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-example-roles-messaging">3.2.9. EnMasse example roles</h4>
<div class="paragraph">
<p>EnMasse provides the following example roles that you can use directly or use as models to create your own roles.</p>
</div>
<div class="paragraph">
<p>For more information about service administrator resources, see the <a href="http://enmasse.io/documentation/master/openshift.html#ref-resources-table-service-admin-messaging">EnMasse service administrator resources table</a>.</p>
</div>
<div class="paragraph">
<p>For more information about messaging tenant resources, see the <a href="http://enmasse.io/documentation/master/openshift.html#ref-resources-table-messaging-tenant-messaging">EnMasse messaging tenant resources table</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. EnMasse example roles table</caption>
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>enmasse.io:tenant-view</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies <code>get</code> and <code>list</code> permissions for <code>addresses</code>, <code>addressspaces</code>, <code>addressspaceschemas</code>, and <code>messagingusers</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>enmasse.io:tenant-edit</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies <code>create</code>, <code>get</code>, <code>update</code>, <code>delete</code>, <code>list</code>, <code>watch</code>, and <code>patch</code> permissions for <code>addresses</code>, <code>addressspaces</code>, and <code>messagingusers</code>; <code>get</code> and <code>list</code> permissions for <code>addressspaceschemas</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>service-admin</code> cluster role</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies <code>create</code>, <code>get</code>, <code>update</code>, <code>delete</code>, <code>list</code>, <code>watch</code>, and <code>patch</code> permissions for <code>addressplans</code>, <code>addressspaceplans</code>, <code>brokeredinfraconfigs</code>, <code>standardinfraconfigs</code> and <code>authenticationservices</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="upgrading-messaging">3.3. Upgrading EnMasse</h3>
<div class="paragraph">
<p>EnMasse supports upgrades between minor versions using cloud-native tools. When upgrading, applying the configuration change automatically triggers the upgrade process to begin.</p>
</div>
<div class="paragraph">
<p>It is recommended to use the same method to upgrade that was used to initially install EnMasse.</p>
</div>
<div class="paragraph">
<p>Upgrading EnMasse is accomplished by applying the YAML files for the new version.</p>
</div>
<div class="sect3">
<h4 id="upgrading-enmasse-using-bundle-messaging">3.3.1. Upgrading EnMasse using a YAML bundle</h4>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A new release of EnMasse. For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#downloading-messaging">Downloading EnMasse</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service operator:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>Select the project where EnMasse is installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Apply the new release bundle:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/bundles/enmasse</pre>
</div>
</div>
</li>
<li>
<p>Monitor pods while they are restarted:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get pods -w</pre>
</div>
</div>
<div class="paragraph">
<p>The pods restart and become active within several minutes.</p>
</div>
</li>
<li>
<p>Delete <code>api-server</code> resources not needed after upgrade:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete sa api-server -n enmasse-infra
oc delete clusterrolebinding enmasse.io:api-server-enmasse-infra
oc delete clusterrole enmasse.io:api-server
oc delete rolebinding api-server -n enmasse-infra
oc delete role enmasse.io:api-server -n enmasse-infra</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="upgrading-enmasse-using-ansible-messaging">3.3.2. Upgrading EnMasse using Ansible</h4>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A new release of EnMasse. For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#downloading-messaging">Downloading EnMasse</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service operator:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>Run the Ansible playbook from the new release:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">ansible-playbook -i <em>inventory-file</em> ansible/playbooks/openshift/deploy_all.yml</pre>
</div>
</div>
</li>
<li>
<p>Monitor pods while they are restarted:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get pods -w</pre>
</div>
</div>
<div class="paragraph">
<p>The pods restart and become active within several minutes.</p>
</div>
</li>
<li>
<p>Delete <code>api-server</code> resources not needed after upgrade:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete sa api-server -n enmasse-infra
oc delete clusterrolebinding enmasse.io:api-server-enmasse-infra
oc delete clusterrole enmasse.io:api-server
oc delete rolebinding api-server -n enmasse-infra
oc delete role enmasse.io:api-server -n enmasse-infra</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="assembly-uninstalling-messaging">3.4. Uninstalling EnMasse</h3>
<div class="paragraph">
<p>You must uninstall EnMasse using the same method that you used to install EnMasse.</p>
</div>
<div class="sect3">
<h4 id="uninstalling-messaging">3.4.1. Uninstalling EnMasse using the YAML bundle</h4>
<div class="paragraph">
<p>This method uninstalls EnMasse that was installed using the YAML bundle.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a user with <code>cluster-admin</code> privileges:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>Delete the cluster-level resources:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete crd -l app=enmasse,enmasse-component=iot
oc delete crd -l app=enmasse --timeout=600s
oc delete clusterrolebindings -l app=enmasse
oc delete clusterroles -l app=enmasse
oc delete apiservices -l app=enmasse
oc delete oauthclients -l app=enmasse</pre>
</div>
</div>
</li>
<li>
<p>(OpenShift 4) Delete the console integration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete consolelinks -l app=enmasse</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Delete the service catalog integration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete clusterservicebrokers -l app=enmasse</pre>
</div>
</div>
</li>
<li>
<p>Delete the project where EnMasse is deployed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-uninstalling-using-ansible-messaging">3.4.2. Uninstalling EnMasse using Ansible</h4>
<div class="paragraph">
<p>Uninstalling EnMasse using Ansible requires using the same inventory file that was used for installing EnMasse.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The playbook deletes the <code>enmasse-infra</code> project.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run the Ansible playbook, where <code><em>inventory-file</em></code> specifies the inventory file used at installation:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">ansible-playbook -i <em>inventory-file</em> ansible/playbooks/openshift/uninstall.yml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="uninstalling-olm-messaging">3.4.3. Uninstalling EnMasse using the Operator Lifecycle Manager (OLM)</h4>
<div class="paragraph">
<p>This method uninstalls EnMasse that was installed using the Operator Lifecycle Manager (OLM).</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a user with <code>cluster-admin</code> privileges:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>Remove all <code>IoTProject</code> and <code>AddressSpace</code> instances:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete iotprojects -A --all
oc delete addressspaces -A --all --timeout=600s</pre>
</div>
</div>
</li>
<li>
<p>Delete the subscription (replace <code>enmasse</code> with the name of the subscription used in the installation):</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete subscription <em>enmasse</em> -n <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Remove the CSV for the Operator:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete csv -l app=enmasse -n <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Remove any remaining resources (replace <code>enmasse-infra</code> with the project where you installed EnMasse):</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete all -l app=enmasse -n <em>enmasse-infra</em>
oc delete cm -l app=enmasse -n <em>enmasse-infra</em>
oc delete secret -l app=enmasse <em>enmasse-infra</em>
oc delete consolelinks -l app=enmasse
oc delete oauthclients -l app=enmasse
oc delete crd -l app=enmasse</pre>
</div>
</div>
</li>
<li>
<p>(Optional: Skip this step if EnMasse is installed in the <code>openshift-operators</code> namespace) Delete the namespace where EnMasse was installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete namespace <em>enmasse-infra</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="uninstalling-olm-console-messaging">3.4.4. Uninstalling EnMasse using the OpenShift console</h4>
<div class="paragraph">
<p>This method uninstalls EnMasse that was installed using the Operator Lifecycle Manager (OLM) in the {PlatformName} console.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>From the Project list, select the project where you installed EnMasse.</p>
</li>
<li>
<p>Click <strong>Catalog  Operator Management</strong>. The Operator Management page opens.</p>
</li>
<li>
<p>Click the <strong>Operator Subscriptions</strong> tab.</p>
</li>
<li>
<p>Find the EnMasse Operator you want to uninstall. In the far right column, click the vertical ellipsis icon and select <strong>Remove Subscription</strong>.</p>
</li>
<li>
<p>When prompted by the Remove Subscription window, select the <strong>Also completely remove the EnMasse Operator from the selected namespace</strong> check box to remove all components related to the installation.</p>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Remove</strong>. The EnMasse Operator will stop running and no longer receive updates.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Remove any remaining resources by running the following command (replace <code>enmasse-infra</code> with the project where you installed EnMasse):</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete all -l app=enmasse -n <em>enmasse-infra</em>
oc delete cm -l app=enmasse -n <em>enmasse-infra</em>
oc delete secret -l app=enmasse <em>enmasse-infra</em>
oc delete consolelinks -l app=enmasse
oc delete oauthclients -l app=enmasse</pre>
</div>
</div>
</li>
<li>
<p>(Optional: Skip this step if EnMasse is installed in the <code>openshift-operators</code> namespace) Delete the namespace where EnMasse was installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete namespace <em>enmasse-infra</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="monitoring-messaging">3.5. Monitoring EnMasse</h3>
<div class="paragraph">
<p>You can monitor EnMasse by deploying built-in monitoring tools or using your pre-existing monitoring infrastructure.</p>
</div>
<div class="sect3">
<h4 id="enable-monitoring-ocp4-messaging">3.5.1. Enabling Monitoring on OpenShift 4</h4>
<div class="paragraph">
<p>In order to monitor EnMasse on OpenShift 4 using the existing monitoring stack, user-workload monitoring must be <a href="https://docs.openshift.com/container-platform/4.4/monitoring/monitoring-your-own-services.html" target="_blank" rel="noopener">enabled</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="deploy-monitoring-operator-messaging">3.5.2. (Optional) Deploying the Application Monitoring Operator</h4>
<div class="paragraph">
<p>To monitor EnMasse, an operator that acts on the monitoring Custom Resource Definitions must
be deployed. You may skip this step if you have such an operator installed on your OpenShift
cluster.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a user with <code>cluster-admin</code> privileges:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>(Optional) If you want to deploy to a namespace other than <code>enmasse-monitoring</code> you must run the following command and substitute <code>enmasse-monitoring</code> in subsequent steps:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">sed -i 's/enmasse-monitoring/<em>my-namespace</em>/' install/bundles/enmasse/*.yaml</pre>
</div>
</div>
</li>
<li>
<p>Create the enmasse-monitoring namespace:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc new-project <em>enmasse-monitoring</em></pre>
</div>
</div>
</li>
<li>
<p>Deploy the <code>monitoring-operator</code> resources:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/monitoring-operator</pre>
</div>
</div>
</li>
<li>
<p>Deploy the <code>monitoring-operator</code> component:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/monitoring-deployment</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="deploy-kube-state-metrics-messaging">3.5.3. (Optional) Deploying the kube-state-metrics agent</h4>
<div class="paragraph">
<p>You can monitor EnMasse pods using the <code>kube-state-metrics</code> agent.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a user with <code>cluster-admin</code> privileges:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>Select the <code>enmasse-infra</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Deploy the <code>kube-state-metrics</code> component:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/kube-state-metrics</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="deploy-monitoring-bundle-messaging">3.5.4. Enabling monitoring</h4>
<div class="paragraph">
<p>If you are not using a default installation configuration, the simplest way to deploy monitoring is to enable the monitoring environment variable on the
<code>enmasse-operator</code> deployment.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The <a href="http://enmasse.io/documentation/master/openshift.html#deploy-monitoring-operator-messaging" target="_blank" rel="noopener">Application Monitoring Operator</a> or an operator managing the same resources must be installed.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Label the <em>enmasse-infra</em> namespace:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc label namespace <em>enmasse-infra</em> monitoring-key=middleware</pre>
</div>
</div>
</li>
<li>
<p>Enable monitoring on the operator:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc set env deployment -n <em>enmasse-infra</em> enmasse-operator ENABLE_MONITORING=true</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="config-alerts-messaging">3.5.5. Configuring alert notifications</h4>
<div class="paragraph">
<p>To configure alert notifications, such as emails, you must change the default configuration of Alertmanager.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Create an Alertmanager configuration file following the <a href="https://prometheus.io/docs/alerting/configuration/" target="_blank" rel="noopener">Alertmanager documentation</a>. An example configuration file for email notifications is shown:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: enmasse
  name: alertmanager-config
data:
  alertmanager.yml: |
    global:
      resolve_timeout: 5m
      smtp_smarthost: localhost
      smtp_from: alerts@localhost
      smtp_auth_username: admin
      smtp_auth_password: password
    route:
      group_by: ['alertname']
      group_wait: 60s
      group_interval: 60s
      repeat_interval: 1h
      receiver: 'sysadmins'
    receivers:
    - name: 'sysadmins'
      email_configs:
      - to: sysadmin@localhost
    inhibit_rules:
      - source_match:
          severity: 'critical'
        target_match:
          severity: 'warning'
        equal: ['alertname']</pre>
</div>
</div>
</li>
<li>
<p>Your Alertmanager configuration file must be named <code>alertmanager.yaml</code> so it can be read by the Prometheus Operator.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Delete the secret containing the default configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete secret alertmanager-application-monitoring</pre>
</div>
</div>
</li>
<li>
<p>Create a secret containing your new configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create secret generic alertmanager-application-monitoring --from-file=alertmanager.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="assembly-metrics-rules-messaging">3.5.6. Metrics and rules</h4>
<div class="sect4">
<h5 id="ref-metrics-common-messaging">Common metrics</h5>
<div class="paragraph">
<p>The following components export these common metrics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>enmasse-operator</code></p>
</li>
<li>
<p><code>address-space-controller</code></p>
</li>
<li>
<p><code>standard-controller</code></p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_version</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>version</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the current version of each component in EnMasse using the version label. The metric always returns a value of <code>1</code>.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>enmasse_version{job="address-space-controller",version="1.0.1"} 1
enmasse_version{job="enmsse-operator",version="1.0.1"} 1
enmasse_version{job="standard-controller",version="1.0.1"} 1</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-metrics-address-space-controller-messaging">Address space controller metrics</h5>
<div class="paragraph">
<p>The following metrics for <code>address-space-controller</code> are available for EnMasse.</p>
</div>
<div class="sect5">
<h6 id="summary">Summary</h6>
<div class="paragraph">
<p>For every metric exported of the type <code>enmasse_address_space_status_ready</code> there is a corresponding metric of type <code>enmasse_address_space_status_not_ready</code>. The values of each can never be the same.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_address_space_status_ready{name="my-address-space"} 1
enmasse_address_space_status_not_ready{name="my-address-space"} 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>The total number of address spaces equals the sum of all address spaces in the ready state plus the sum of all address spaces in the not ready state:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_address_spaces_total == (sum(enmasse_address_space_status_ready) + sum(enmasse_address_space_status_not_ready))</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_address_space_status_ready</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Boolean</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Indicates each address space that is in a <code>ready</code> state.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_address_space_status_ready{name="prod-space"} 1
enmasse_address_space_status_ready{name="dev-space"} 0</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_address_space_status_not_ready</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Boolean</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Indicates each address space that is in a <code>not ready</code> state.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_address_space_status_not_ready{name="prod-space"} 0
enmasse_address_space_status_not_ready{name="dev-space"} 1</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_address_spaces_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Returns the total number of address spaces, regardless of whether they are in a <code>ready</code> or <code>not ready</code> state.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_address_spaces_total 1</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>enmasse_address_space_connectors_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Returns the total number of address space connectors in each address space.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_address_space_connectors_total{name="space-one"} 0
enmasse_address_space_connectors_total{name="space-two"} 2</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-metrics-standard-controller-agent-messaging">Standard controller and agent metrics</h5>
<div class="paragraph">
<p>The following <code>standard-controller</code> and <code>agent</code> metrics are available for Brokered address spaces only in EnMasse.</p>
</div>
<div class="sect5">
<h6 id="summary_2">Summary</h6>
<div class="paragraph">
<p>The total number of addresses equals the sum of the total number of addresses in the ready state and the total number of addresses in the not ready state:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_addresses_total == enmasse_addresses_ready_total + enmasse_addresses_not_ready_total</code></pre>
</div>
</div>
<div class="paragraph">
<p>The total number of addresses equals the total number of addresses in all phases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_addresses_total == enmasse_addresses_active_total + enmasse_addresses_configuring_total + enmasse_addresses_failed_total + enmasse_addresses_pending_total + enmasse_addresses_terminating_total</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_addresses_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the total number of addresses, per address space, regardless of state.</p>
</dd>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>enmasse_addresses_total{addressspace="space-one"} 5
enmasse_addresses_total{addressspace="space-two"} 3</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_addresses_ready_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the total number of addresses currently in the ready state.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>enmasse_addresses_ready_total{addressspace="space-one"} 3
enmasse_addresses_ready_total{addressspace="space-two"} 2</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_addresses_not_ready_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the total number of addresses currently in the not ready state.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_addresses_not_ready_total{addressspace="space-one"} 2
enmasse_addresses_not_ready_total{addressspace="space-two"} 1</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_addresses_active_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the total number of addresses currently in the active phase.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_addresses_active_total{addressspace="space-one"} 2</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>enmasse_addresses_configuring_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the total number of addresses currently in the configuring phase.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_addresses_configuring_total{addressspace="space-one"} 2</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>enmasse_addresses_failed_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the total number of addresses currently in the failed phase.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_addresses_failed_total{addressspace="space-one"} 2</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>enmasse_addresses_pending_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the total number of addresses currently in the pending phase.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_addresses_pending_total{addressspace="space-one"} 2</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>enmasse_addresses_terminating_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the total number of addresses currently in the terminating phase.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_addresses_terminating_total{addressspace="space-one"} 2</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>enmasse_standard_controller_loop_duration_seconds</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the execution time, in seconds, for the most recent standard controller reconcile loop.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_standard_controller_loop_duration_seconds 0.33</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>enmasse_standard_controller_router_check_failures_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Counter</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provies the total number of router check failures during reconciliation loop.</p>
</dd>
<dt class="hdlist1">Example</dt>
</dl>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_standard_controller_router_check_failures_total{addressspace="firstspace"}	0
enmasse_standard_controller_router_check_failures_total{addressspace="myspace"} 0</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_addresses_forwarders_ready_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the total number of address forwarders in the ready state.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_addresses_forwarders_ready_total{addressspace="myspace"} 2</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>enmasse_addresses_forwarders_not_ready_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the total number of address forwarders in the not ready state.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_addresses_forwarders_not_ready_total{addressspace="myspace"} 0</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>enmasse_addresses_forwarders_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides the total number of address forwarders, regardless of whether they are in a ready or not ready state.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_addresses_forwarders_total{addressspace="myspace"} 2</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>enmasse_address_canary_health_failures_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Total number of health check failures due to failure to send and receive messages to
probe addresses.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_address_canary_health_failures_total{addressspace="myspace"} 2</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>enmasse_address_canary_health_check_failures_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Gauge</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Total number of attempted health check runs that failed due to controller errors.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>enmasse_address_canary_health_check_failures_total{addressspace="myspace"} 1</code></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect4">
<h5 id="assembly-rules-messaging">Rules</h5>
<div class="paragraph">
<p>This section details Prometheus rules installed using the PrometheusRule CRD with EnMasse. Two types of Prometheus rules are available in EnMasse:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Record: Pre-computed expressions saved as a new set of time series.</p>
</li>
<li>
<p>Alert: Expressions that trigger an alert when evaluated as <code>true</code>.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="ref-rules-records-messaging">Records</h6>
<div class="paragraph">
<p>Records are a type of Prometheus rule that are pre-computed expressions saved as a new set of time series. The following records are available for EnMasse.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_address_spaces_ready_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Aggregates the <code>enmasse_address_space_status_ready</code> in a single gauge-type metric that provides the total number of addresses in a <code>ready</code> state.</p>
</dd>
<dt class="hdlist1">Expression</dt>
</dl>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>sum by(service, exported_namespace) (enmasse_address_space_status_ready)</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_address_spaces_ready_total{exported_namespace="prod_namespace",service="address-space-controller"} 1</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_address_spaces_not_ready_total</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Aggregates the <code>enmasse_address_space_not_status_ready</code> in a single gauge-type metric that provides the total number of addresses in a <code>not ready</code> state.</p>
</dd>
<dt class="hdlist1">Expression</dt>
</dl>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>sum by(service, exported_namespace) (enmasse_address_space_status_not_ready)</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_address_spaces_not_ready_total{exported_namespace="prod_namespace",service="address-space-controller"} 1</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enmasse_component_health</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Provides a Boolean-style metric for each <code>address-space-controller</code> and <code>api-server</code> indicating if they are up and running.</p>
</dd>
<dt class="hdlist1">Expression</dt>
</dl>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>up{job="address-space-controller"} or on(namespace) (1 - absent(up{job="address-space-controller"}))
up{job="api-server"} or on(namespace) (1 - absent(up{job="api-server"}))</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>enmasse_component_health{job="address-space-controller"}	1
enmasse_component_health{job="api-server"}	1</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="ref-rules-alerts-messaging">Alerts</h6>
<div class="paragraph">
<p>Alerts are a type of Prometheus rule that are expressions that trigger an alert when evaluated as true. The following alerts are available for EnMasse.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ComponentHealth</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Triggers when a component is not in a healthy state.</p>
</dd>
<dt class="hdlist1">Expression</dt>
<dd>
<p><code>component_health == 0</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>AddressSpaceHealth</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Triggers when one or more address spaces are not in a <code>ready</code> state.</p>
</dd>
<dt class="hdlist1">Expression</dt>
<dd>
<p><code>enmasse_address_spaces_not_ready_total &gt; 0</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>AddressHealth</code></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Triggers when one or more addresses are not in a <code>ready</code> state.</p>
</dd>
<dt class="hdlist1">Expressions</dt>
<dd>
<p><code>enmasse_addresses_not_ready_total &gt; 0</code></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="enable-tenant-metrics-messaging">3.5.7. Enabling Tenant Metrics</h4>
<div class="paragraph">
<p>Metrics from brokers and routers can be exposed to tenants without exposing system-admin metrics. To expose tenant metrics create a service monitor in any non-<code>enmasse-infra</code> namespace, ideally the namespace of the concerned address space(s).</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The <code>servicemonitor</code> Custom Resource Definition provided by the Prometheus Operator must be installed.</p>
</li>
<li>
<p>The tenant must have their own monitoring stack installed.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Creata a <code>servicemonitor</code> resource with a the selector configured to match labels of <code>monitoring-key: enmasse-tenants</code> and the <code>enmasse-infra</code> as the namespace selector. An example service monitor is shown below:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: enmasse-tenants
  labels:
    app: enmasse
spec:
  selector:
    matchLabels:
      monitoring-key: enmasse-tenants
  endpoints:
  - port: health
  namespaceSelector:
    matchNames:
      - enmasse-infra</pre>
</div>
</div>
</li>
<li>
<p>Ensure the tenant&#8217;s monitoring stack has read permissions for service monitors in the service monitor&#8217;s namespace but not in the <code>enmasse-infra</code> as this would expose service-admin metrics too.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ops-procedures-messaging">3.6. Operation procedures for EnMasse</h3>
<div class="sect3">
<h4 id="restart-component-messaging">3.6.1. Restarting components to acquire security fixes</h4>
<div class="paragraph">
<p>Restarting EnMasse components is required to get image updates for CVEs. The scripts are provided in the EnMasse installation files within the <code>script</code> folder. To restart all components, run all scripts.</p>
</div>
<div class="sect4">
<h5 id="restarting_operators">Restarting Operators</h5>
<div class="paragraph">
<p>Operators can be restarted without affecting the messaging system.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Run the <code>restart-operators.sh</code> script:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">./scripts/restart-operators.sh enmasse-infra</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="restarting_authentication_services">Restarting authentication services</h5>
<div class="paragraph">
<p>Authentication service restarts will temporarily affect new messaging connections. Existing connections will continue to work even if the authentication service is restarted.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Run the <code>restart-authservices.sh</code> script:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">./scripts/restart-authservices.sh enmasse-infra</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="restarting_routers">Restarting routers</h5>
<div class="paragraph">
<p>Messaging routers are only deployed in the <code>standard</code> address space type. The script assumes that at least two replicas of the router are running and performs a rolling restart. Messaging clients connected to the restarting router are disconnected and must reconnect to be served by a different router.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Run the <code>restart-routers.sh</code> script, which requires at least one router to be available:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">./scripts/restart-routers.sh enmasse-infra 1</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="restarting_brokers">Restarting brokers</h5>
<div class="paragraph">
<p>For the <code>brokered</code> address space type, restarting the broker causes downtime temporarily to messaging clients while the broker is restarted. For the <code>standard</code> address space type, messaging clients are not disconnected from the messaging routers, but clients are not able to consume messages stored on the restarting broker.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Run the <code>restart-brokers.sh</code> script:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">./scripts/restart-brokers.sh enmasse-infra</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="get-logs-router-messaging">3.6.2. Viewing router logs</h4>
<div class="paragraph">
<p>For the <code>standard</code> address space type, you can view the router logs to troubleshoot issues with clients not connecting or issues with sending and receiving messages.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>List all router Pods and choose the Pod for the relevant address space:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get pods -l name=qdrouterd -o go-template --template '{{range .items}}{{.metadata.name}}{{"\t"}}{{.metadata.annotations.addressSpace}}{{"\n"}}{{end}}'</pre>
</div>
</div>
</li>
<li>
<p>Display the logs for the Pod:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc logs <em>pod</em> -c router</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="get-logs-broker-messaging">3.6.3. Viewing broker logs</h4>
<div class="paragraph">
<p>For the <code>brokered</code> or <code>standard</code> address space type, you can view the broker logs to troubleshoot issues with clients not connecting or issues with sending and receiving messages.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>List all broker Pods and choose the Pod for the relevant address space:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>oc get pods -l role=broker -o go-template --template '{{range .items}}{{.metadata.name}}{{"\t"}}{{.metadata.annotations.addressSpace}}{{"\n"}}{{end}}'</code></pre>
</div>
</div>
</li>
<li>
<p>Display the logs for the Pod:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>oc logs <em>pod</em></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="enable-protocol-trace-router-messaging">3.6.4. Enabling an AMQP protocol trace for the router</h4>
<div class="paragraph">
<p>For diagnostic purposes, you can enable an AMQP protocol trace for a router.   This can be helpful
when troubleshooting issues related to client connectivity or with sending and receiving messages.  There are two
methods for enabling a protocol trace for the router.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can dynamically enable/disable the protocol trace for a single router using a <code>qdmange</code> command. This
method avoids the need to restart the router. The setting will be lost the next time the router restarts.</p>
</li>
<li>
<p>Alternatively, you can apply configuration to the <code>standardinfraconfig</code> that enables the protocol trace for all
routers of all address spaces using that <code>standardinfraconfig</code>.  This method will cause all the routers to
restart.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Enabling the protocol trace increases the CPU overhead of the router(s) and may decrease
messaging performance. It may also increase the disk space requirements associated with any log retention system.
Therefore, it is recommended that you enable the protocol trace for as short a time as possible.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="dynamically_enabling_the_protocol_trace_for_a_single_router">Dynamically enabling the protocol trace for a single router</h5>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service operator:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Change to the project where EnMasse is installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>List all router Pods and choose the Pod for the relevant address space:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get pods -l name=qdrouterd -o go-template --template '{{range .items}}{{.metadata.name}}{{"\t"}}{{.metadata.annotations.addressSpace}}{{"\n"}}{{end}}'</pre>
</div>
</div>
</li>
<li>
<p>Enable the protocol trace for a single router:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">echo '{"enable":"trace+"}' | oc exec qdrouterd-<em>podname</em> --stdin=true --tty=false -- qdmanage update -b 127.0.0.1:7777 --type=log --name=log/PROTOCOL --stdin</pre>
</div>
</div>
</li>
<li>
<p>Display the logs for the Pod that will include the protocol trace:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc logs <em>pod</em></pre>
</div>
</div>
</li>
<li>
<p>Disable the protocol trace:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">echo '{"enable":"info"}' | oc exec qdrouterd-<em>podname</em> --stdin=true --tty=false -- qdmanage update -b 127.0.0.1:7777 --type=log --name=log/PROTOCOL --stdin</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="enabling_the_protocol_trace_using_the_standardinfraconfig_environment_variable">Enabling the protocol trace using the <code>StandardInfraConfig</code> environment variable</h5>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service operator:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Change to the project where EnMasse is installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Determine the <code>addresspaceplan</code> name for the address space concerned:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspace -n <em>namespace</em> <em>address-space-name</em> --output 'jsonpath={.spec.plan}{"\n"}'</pre>
</div>
</div>
</li>
<li>
<p>Determine the <code>standardinfraconfig</code> name for the <code>addressspaceplan</code> name:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspaceplan <em>address-space-plan</em> --output 'jsonpath={.spec.infraConfigRef}{"\n"}'</pre>
</div>
</div>
</li>
<li>
<p>Enable the protocol trace for all routers of all address spaces using that <code>standardinfraconfig</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc patch standardinfraconfig <em>standardinfraconfig-name</em> --type=merge -p '{"spec":{"router":{"podTemplate":{"spec":{"containers":[{"env":[{"name":"PN_TRACE_FRM","value":"true"}],"name":"router"}]}}}}}'</pre>
</div>
</div>
</li>
<li>
<p>Display the logs for the Pod that will include the protocol trace:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc logs <em>pod</em></pre>
</div>
</div>
</li>
<li>
<p>Disable the protocol trace:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc patch standardinfraconfig <em>standardinfraconfig-name</em> --type=merge -p '{"spec":{"router":{"podTemplate":{"spec":{"containers":[{"env":[{"name":"PN_TRACE_FRM"}],"name":"router"}]}}}}}'</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="enable-protocol-trace-broker-messaging">3.6.5. Enabling an AMQP protocol trace for the broker</h4>
<div class="paragraph">
<p>For diagnostic purposes, you can enable an AMQP protocol trace for a broker. This can be helpful
when troubleshooting issues with sending or receiving messages.</p>
</div>
<div class="paragraph">
<p>To enable the protocol trace, you apply configuration to the <code>standardinfraconfig</code> (for standard
address spaces) or <code>brokeredinfraconfig</code> (for brokered address spaces) that enables the protocol trace for all
brokers of all address spaces using that configuration. Applying this configuration will cause the
brokers to restart.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Enabling the protocol trace increases the CPU overhead of the broker(s) and may decrease
messaging performance. It may also increase the disk space requirements associated with any log retention system.
Therefore, it is recommended that you enable the protocol trace for as short a time as possible.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service operator:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Change to the project where EnMasse is installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Determine the <code>addresspaceplan</code> name for the address space concerned:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspace -n <em>namespace</em> <em>address-space-name</em> --output 'jsonpath={.spec.plan}{"\n"}'</pre>
</div>
</div>
</li>
<li>
<p>Determine the <code>standardinfraconfig</code> or <code>brokeredinfraconfig</code> name for the <code>addressspaceplan</code> name:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspaceplan <em>address-space-plan</em> --output 'jsonpath={.spec.infraConfigRef}{"\n"}'</pre>
</div>
</div>
</li>
<li>
<p>Enable the protocol trace for all brokers of all address spaces using that <code>standardinfraconfig</code>
or <code>brokeredinfraconfig</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc patch <em>infraconfig-resource</em> <em>infraconfig-name</em> --type=merge -p '{"spec":{"broker":{"podTemplate":{"spec":{"containers":[{"env":[{"name":"PN_TRACE_FRM","value":"true"}],"name":"broker"}]}}}}}'</pre>
</div>
</div>
</li>
<li>
<p>Display the logs for the Pod that will include the protocol trace:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc logs <em>pod</em></pre>
</div>
</div>
</li>
<li>
<p>Disable the protocol trace:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc patch <em>infraconfig-resource</em> <em>infraconfig-name</em> --type=merge -p '{"spec":{"broker":{"podTemplate":{"spec":{"containers":[{"env":[{"name":"PN_TRACE_FRM"}],"name":"broker"}]}}}}}'</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="examine-broker-state-messaging">3.6.6. Examining the state of a broker using the Apache ActiveMQ Artemis management interfaces</h4>
<div class="paragraph">
<p>If a problem is suspected with a Broker associated with an address space, you can examine the state of the
broker directly using its built-in <a href="https://activemq.apache.org/components/artemis/documentation/latest/management.html">management interfaces</a>.  EnMasse exposes the
Apache ActiveMQ Artemis&#8217;s CLI and JMX  (via Jolokia).  It does not expose the Apache ActiveMQ Artemis Console.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a service admin:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u admin</pre>
</div>
</div>
</li>
<li>
<p>Change to the project where EnMasse is installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Retrieve the uuid for the address space:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspace <em>myspace</em> -o jsonpath='{.metadata.annotations.enmasse\.io/infra-uuid}'</pre>
</div>
</div>
</li>
<li>
<p>Retrieve the broker support credentials (username and password) for the address space:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get secret broker-support-<em>uuid</em>  --template='{{.data.username}}' | base64 --decode
oc get secret broker-support-<em>uuid</em>  --template='{{.data.password}}' | base64 --decode</pre>
</div>
</div>
</li>
<li>
<p>Identify the broker pod name:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get pods -l infraUuid=<em>uuid</em>,role=broker</pre>
</div>
</div>
<div class="paragraph">
<p>In the standard address, there may be many brokers.  To identify the broker(s) hosting a particular queue, use this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get address <em>address-resource-name</em>  -o jsonpath="{.status.brokerStatuses[*].containerId}"</pre>
</div>
</div>
</li>
<li>
<p>Execute support commands on the broker&#8217;s pod:</p>
<div class="paragraph">
<p>To execute an Apache ActiveMQ Artemis CLI command, use a command similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc exec <em>broker-pod-name</em> -- /opt/apache-artemis/bin/artemis address show --user <em>username</em> --password <em>password</em></pre>
</div>
</div>
<div class="paragraph">
<p>To execute an Apache ActiveMQ Artemis Jolokia JMX command, use a command similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc exec <em>broker-pod-name</em> -- curl --silent --insecure --user <em>username</em>:_password_ -H "Origin: https://localhost:8161" 'https://localhost:8161/console/jolokia/read/org.apache.activemq.artemis:broker="<em>broker pod name</em>"/AddressMemoryUsage'</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The double quotes around the broker pod name within the URL are required. Make sure you protect them from your
command shell using single quotes surrounding the whole URL, as shown in the above command. If they are not present, you will
receive an authorization failure.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sizing-guide-messaging">3.7. EnMasse configuration sizing guidelines</h3>
<div class="paragraph">
<p>The following information provides guidelines on how to size EnMasse installations. More specifically, these guidelines offer specific configuration recommendations for components and plans based on use cases, and the trade-offs involved when adjusting the configuration settings. Sizing EnMasse involves configuration of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Brokers</p>
</li>
<li>
<p>Routers (standard address space only)</p>
</li>
<li>
<p>Operator(s)</p>
</li>
<li>
<p>Plans</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, each address space type has certain distinct features that need to be considered when creating the address plans.
For more information about address space types and their semantics, see <a href="http://enmasse.io/documentation/master/openshift.html#con-address-space-messaging">address spaces</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Properly sizing EnMasse components also requires taking into consideration the following points regarding your OpenShift cluster:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The OpenShift cluster must have sufficient capacity to handle the requested resources. If the OpenShift nodes are configured with 4 GB of memory, you cannot configure brokers and routers with memory sizes larger than 4 GB.</p>
</li>
<li>
<p>Since each address space creates a dedicated piece of infrastructure, you need to ensure that cluster capacity can meet demand as the number of address spaces increases.</p>
</li>
<li>
<p>The use of affinity and tolerations might also restrict the nodes available for the messaging infrastructure to use.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="broker-component-sizing-messaging">3.7.1. Broker component sizing</h4>
<div class="paragraph">
<p>Brokers are configured using the <code>BrokeredInfraConfig</code> and <code>StandardInfraConfig</code> resources, depending on the type of address space. When sizing a broker, consider:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The average message size</p>
</li>
<li>
<p>The number of messages stored</p>
</li>
<li>
<p>The number of queues and topics</p>
</li>
<li>
<p>The address full policy</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In EnMasse, you can only restrict the total amount of memory allocated for a broker. You cannot restrict the amount of memory used by individual addresses.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The broker persists all messages to disk. When the <code>BLOCK</code>, <code>FAIL</code>, or <code>DROP</code> address full policy is specified, the number of messages that can be persisted is limited to the amount of memory in the broker. By using the <code>PAGE</code> address full policy, more messages can be stored than can be held in memory, at the expense of a potential performance degradation from reading data from disk. Therefore, paging is useful in the case of large messages or a large backlog of messages in your system.</p>
</div>
<div class="sect4">
<h5 id="example_use_case_for_a_broker_component_configuration">Example use case for a broker component configuration</h5>
<div class="paragraph">
<p>Given 10 queues with a maximum of 1000 messages stored per queue and an average message size of 128 kB, the amount of storage space required to store messages is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>10 queues * 1000 messages * (128 + (128 kB * 1024)) = 1.25 GB</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, the broker has a fixed storage footprint of about 50 MB.</p>
</div>
<div class="paragraph">
<p>The amount of memory required for the broker depends on which address full policy is specified. If the <code>PAGE</code> policy is used, the memory requirements can be reduced  since the messages are stored separately from the journal (which always needs to fit in memory). If the <code>FAIL</code>, <code>BLOCK</code>, or <code>DROP</code> policies are specified, all messages must also be held in memory, even if they are persisted.</p>
</div>
<div class="paragraph">
<p>There is also constant memory cost associated with running the broker as well as the JVM. The memory available to store message is automatically derived from the memory set in the broker configuration and is set to be half the JVM memory, which in turn is set to half of the system memory.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the <code>standard</code> address space type, multiple broker instances might be created. The sizing of these broker instances also depends on the address plan configuration and how many addresses you expect each broker to be able to handle before another broker is spawned.
</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="example_broker_component_configuration_without_paging">Example broker component configuration without paging</h6>
<div class="paragraph">
<p>For broker configurations not using a <code>PAGE</code> policy, take into consideration an additional 5 percent bookkeeping overhead per address should be taken into account (<code>1.05 * 1.25 = 1.35 GB</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: BrokeredInfraConfig
metadata:
  name: cfg1
spec:
  broker:
    addressFullPolicy: FAIL
    globalMaxSize: 1.35Gb
    resources:
      memory: 8Gi
      storage: 2Gi
  ...</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="example_broker_component_configuration_with_paging">Example broker component configuration with paging</h6>
<div class="paragraph">
<p>When paging is enabled, the original formula can be modified to only account for a reference to the message as well as holding 1000 in-flight messages in memory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>(1000 messages * 1000 * 128 kB) + (10 queues * 128 kB * 1024) = 123.5 MB</code></pre>
</div>
</div>
<div class="paragraph">
<p>So, the amount of memory specified for the broker can now be reduced, as seen in this configuration example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: BrokeredInfraConfig
metadata:
  name: cfg1
spec:
  broker:
    addressFullPolicy: PAGE
    globalMaxSize: 124Mb
    resources:
      memory: 1Gi
      storage: 2Gi
  ...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="broker_scaling_standard_address_space_only">Broker scaling (standard address space only)</h5>
<div class="paragraph">
<p>Brokers are deployed on demand, that is, when addresses of type <code>queue</code> or <code>topic</code> are created. The number of brokers deployed is restricted by the resource limits specified in the <code>AddressSpacePlan</code> configuration. The following <code>AddressSpacePlan</code> configuration example specifies a limit of four brokers in total per address space:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apiVersion: admin.enmasse.io/v1beta2
kind: AddressSpacePlan
metadata:
  name: cfg1
spec:
  resourceLimits:
    broker: 4.0
  ...</pre>
</div>
</div>
<div class="paragraph">
<p>In terms of capacity, multiply the memory requirements for the broker by the limit.</p>
</div>
<div class="paragraph">
<p>The number of broker instances are scaled dynamically between one and the maximum limit specified based on the <code>AddressPlan</code> used for the different addresses. An <code>AddressPlan</code> specifies the fraction of a broker that is required by an address. The fraction specified in the plan is multiplied by the number of addresses referencing this plan, and then rounded up to produce the number of desired broker replicas.</p>
</div>
<div class="listingblock">
<div class="title"><code>AddressPlan</code> configuration example</div>
<div class="content">
<pre>apiVersion: admin.enmasse.io/v1beta2
kind: AddressPlan
metadata:
  name: plan1
spec:
  ...
  resources:
    broker: 0.01</pre>
</div>
</div>
<div class="paragraph">
<p>If you create 110 addresses with <code>plan1</code> as the address plan, the number of broker replicas is <code>ceil(110 addresses * 0.01 broker) = 2 replicas</code>.</p>
</div>
<div class="paragraph">
<p>The total number of brokers is capped by the address space plan resource limits.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="router-component-sizing-messaging">3.7.2. Router component sizing</h4>
<div class="paragraph">
<p>Routers are configured in the <code>StandardInfraConfig</code> resource. In determining router sizing, consider:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The number of addresses</p>
</li>
<li>
<p>The number of connections and links</p>
</li>
<li>
<p>Link capacity</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The router does not persist any state and therefore does not require persistent storage.</p>
</div>
<div class="paragraph">
<p>Address configuration itself does not require a significant amount of router memory. However, queues and subscriptions require an additional two links between the router and broker per address.</p>
</div>
<div class="paragraph">
<p>The total number of links is then two times the number of queues/subscriptions plus the number of client links. Each link requires metadata and buffers in the router to handle routing messages for that link.</p>
</div>
<div class="paragraph">
<p>The router link capacity affects how many messages the router can handle per link. Setting the link capacity to a higher value might improve performance, but at the cost of potentially more memory being used to hold in-flight messages if senders are filling the links. If you have many connections and links, consider specifying a lower value to balance the memory usage.</p>
</div>
<div class="paragraph">
<p>In addition, the router has to parse the message headers, manage dispositions and settlements of messages, and other per-link activities. The per-link cost can be derived using a constant factor of the link capacity and message size. This factor varies depending on the message size. The following table provides an approximation of this factor for different message size ranges:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Link multiplication factor</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Message size (bytes)</th>
<th class="tableblock halign-left valign-top">Factor</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>20-1000</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>18,000</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>1000-4000</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>22,000</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>4000-10,000</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>30,000</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>&gt;10,000</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>50,000</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="example_use_case_for_router_component_sizing">Example use case for router component sizing</h5>
<div class="paragraph">
<p>Consider the following example use case:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>500 anycast and 1000 queued addresses</p>
</li>
<li>
<p>10,000 connected clients (one link per client)</p>
</li>
<li>
<p>Link capacity of 10</p>
</li>
<li>
<p>An average message size of 512 bytes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Based on measurements, an estimated 7 kB overhead per anycast address is realistic, so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">500 anycast addresses * 7 kB overhead per address = 3.5 MB</pre>
</div>
</div>
<div class="paragraph">
<p>Memory usage of queues and topics is slightly higher than that of anycast addresses, with an estimated 32 kB overhead per address. In addition, each router-broker link can have up to <code>linkCapacity</code> message deliveries to keep track of. Also, we need to multiply the link capacity with the multiplication factor to account for the worst-case scenario:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">(1000 queued addresses * 32,768) + (2000 * 18,000 link multiplication factor * 100 links) = 374 MB</pre>
</div>
</div>
<div class="paragraph">
<p>Memory usage of client connections/links:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">10,000 clients * 10 link capacity * 18,000 link multiplication factor = 1717 MB</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The memory usage of client connections/links can be divided by the number of router instances.</p>
</div>
<div class="paragraph">
<p>If you have N routers, the total amount of router memory required for this configuration, including a constant base memory of 50 MB, is <code>50 + 3.5 + (374 + 1717)/N MB</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To ensure the maximum number of connections and links is not exceeded, a router policy can be applied as well. The following configuration example shows two routers with a router policy specified:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: StandardInfraConfig
metadata:
  name: cfg1
spec:
  router:
    resources:
      memory: 1100Mi
    linkCapacity: 10
    policy:
      maxConnections: 5000
      maxSessionsPerConnection: 1
      maxSendersPerConnection: 1
      maxReceiversPerConnection: 1
  ...</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="high_availability_ha">High availability (HA)</h5>
<div class="paragraph">
<p>To configure routers for high availability (HA), multiply the minimum number of required router replicas by the amount of memory per router to calculate the amount of expected memory usage. Although all connections and links are distributed across all routers, if one router fails, you must plan for those connections and links to be redistributed across the remaining routers.</p>
</div>
</div>
<div class="sect4">
<h5 id="router_scaling">Router scaling</h5>
<div class="paragraph">
<p>Routers are scaled dynamically on demand within the limits specified for <code>minReplicas</code> in the <code>StandardInfraConfig</code> resource and the <code>resourceLimits.router</code> specified in the <code>AddressSpacePlan</code>. To restrict the number of routers to a maximum number of four, but require a minimum amount of two routers for HA purposes, the following configuration is needed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apiVersion: admin.enmasse.io/v1beta1
kind: StandardInfraConfig
metadata:
  name: cfg1
spec:
  router:
    minReplicas: 2
  ...
---
apiVersion: admin.enmasse.io/v1beta2
kind: AddressSpacePlan
metadata:
  name: plan1
spec:
  infraConfigRef: cfg1
  resourceLimits:
    router: 4
  ...</pre>
</div>
</div>
<div class="paragraph">
<p>In terms of capacity, multiply the memory requirements for the router by the resource limit. The router will then scale up to the resource limits specified in the <code>AddressSpacePlan</code> for the address space.</p>
</div>
<div class="paragraph">
<p>The number of router replicas is scaled dynamically between the minimum and maximum limits based on the <code>AddressPlan</code> used for the different addresses. An <code>AddressPlan</code> describes the fraction of a router that is required by an address. The fraction defined in the plan is multiplied by the number of addresses referencing this plan, and then rounded up to produce the number of desired router replicas.</p>
</div>
<div class="listingblock">
<div class="title"><code>AddressPlan</code> configuration example:</div>
<div class="content">
<pre>apiVersion: admin.enmasse.io/v1beta2
kind: AddressPlan
metadata:
  name: plan1
spec:
  ...
  resources:
    router: 0.01</pre>
</div>
</div>
<div class="paragraph">
<p>If you create 110 addresses with <code>plan1</code> as the address plan, the number of router replicas is <code>ceil(110 addresses * 0.01 router) = 2 replicas</code>.</p>
</div>
<div class="paragraph">
<p>If the number of replicas exceeds the address space plan limit, the addresses exceeding the maximum number remain in the <code>Pending</code> state and an error message describing the issue is displayed in the <code>Address</code> status section.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="operator-component-sizing-messaging">3.7.3. Operator component sizing</h4>
<div class="paragraph">
<p>The operator component is tasked with reading all address configuration and applying these configurations to the routers and brokers. It is important to size the operator component proportionally to the number of addresses.</p>
</div>
<div class="paragraph">
<p>In the <code>standard</code> address space, the <code>admin</code> Pod contains two processes, <code>agent</code> and <code>standard-controller</code>. These processes cannot be sized individually, but the memory usage of both is proportional to the number of addresses. In the <code>brokered</code> address space, only a single <code>agent</code> process exists.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The operator processes are running on either a JVM or a Node.JS VM. Sizing the amount of memory for these processes at twice the amount of memory required for the address configuration itself is recommended.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="operator_component_configuration_example">Operator component configuration example</h5>
<div class="paragraph">
<p>Each address adds about 20 kB overhead to the operator process. With 1500 addresses, an additional <code>1500 * 2 kB = 30 MB</code> is needed for the operator process.</p>
</div>
<div class="paragraph">
<p>In addition, these processes have a base memory requirement of 256 MB.  So, the total operator memory needed is <code>256 MB + 30 MB = 286 MB</code>. This value can be configured in both the <code>StandardInfraConfig</code> and <code>BrokeredInfraConfig</code> resources:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: StandardInfraConfig
metadata:
  name: cfg1
spec:
  admin:
    resources:
      memory: 300Mi
  ...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="plan-sizing-messaging">3.7.4. Plan sizing</h4>
<div class="paragraph">
<p>Plans enable dynamic scaling in the <code>standard</code> address space, as shown in the broker and router sizing sections. At the cluster level, the combination of plans and infrastructure configuration settings determines the maximum number of Pods that can be deployed on the cluster. Since EnMasse does not support limiting the number of address spaces that can be created, it is a best practice to apply a policy to limit who is allowed to create address spaces. Such policy configuration can be handled through the standard OpenShift policies.</p>
</div>
<div class="paragraph">
<p>From a capacity-planning perspective, it is useful to calculate the maximum number of Pods and the maximum amount of memory that can be consumed for a given address space. To make this calculation using a script, see <a href="http://enmasse.io/documentation/master/openshift.html#proc-run-calculation-script-messaging">Running the check-memory calculation script</a>.</p>
</div>
<div class="sect4">
<h5 id="proc-run-calculation-script-messaging">Running the check-memory calculation script</h5>
<div class="paragraph">
<p>You can use this script to calculate the maximum number of Pods and the maximum amount of memory that can be consumed for a given address space.</p>
</div>
<div class="paragraph">
<p>In this script, memory is assumed to be specified using the <code>Mi</code> unit, while storage is assumed to be specified using the <code>Gi</code> unit. Also, all three components,  <code>admin</code>, <code>router</code>, and <code>broker</code>, must have limits specified for the script to work as intended.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Save the following script as <code>check-memory.sh</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">#!/usr/bin/env bash
PLAN=$1

total_pods=0
total_memory_mb=0
total_storage_gb=0

routers=$(oc get addressspaceplan $PLAN -o jsonpath='{.spec.resourceLimits.router}')
brokers=$(oc get addressspaceplan $PLAN -o jsonpath='{.spec.resourceLimits.broker}')
infra=$(oc get addressspaceplan $PLAN -o jsonpath='{.spec.infraConfigRef}')

operator_memory=$(oc get standardinfraconfig $infra -o jsonpath='{.spec.admin.resources.memory}')
broker_memory=$(oc get standardinfraconfig $infra -o jsonpath='{.spec.broker.resources.memory}')
broker_storage=$(oc get standardinfraconfig $infra -o jsonpath='{.spec.broker.resources.storage}')
router_memory=$(oc get standardinfraconfig $infra -o jsonpath='{.spec.router.resources.memory}')

total_pods=$((routers + brokers + 1))
total_memory_mb=$(( (routers * ${router_memory%Mi}) + (brokers * ${broker_memory%Mi}) + ${operator_memory%Mi}))
total_storage_gb=$(( brokers * ${broker_storage%Gi}))

echo "Pods: ${total_pods}. Memory: ${total_memory_mb} MB. Storage: ${total_storage_gb} GB"</code></pre>
</div>
</div>
</li>
<li>
<p>Run the script using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">bash calculate-memory.sh <em>standard-small</em></pre>
</div>
</div>
<div class="paragraph">
<p>If all components have limits defined in the assumed units, the script outputs the total resource limits for address spaces using this plan, as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Pods: 3. Memory: 1280 MB. Storage: 2 GB</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-address-sizing-messaging">3.7.5. Address sizing</h4>
<div class="paragraph">
<p>Per address broker memory limits are calculated from the address plan configuration. EnMasse determines the maximum size allowed for each queue by multiplying the broker configuration <code>globalMaxSize</code> (specified in the <code>standardinfraconfig</code> or <code>brokeredinfraconfig</code>) by the address plans broker resource limit. The behavior when the queue reaches its memory limit is governed by the address full policy. For more information on the address full policy, see <a href="http://enmasse.io/documentation/master/openshift.html#broker-component-sizing-messaging">Broker component sizing</a>.</p>
</div>
<div class="paragraph">
<p>For example, if the broker&#8217;s configuration specifies <code>globalMaxSize</code> = 124 MB and the address plan configuration specifies <code>addressplan.spec.resources.broker</code> = 0.2, the maximum size allowed for each queue is 25 MB (<code>124 * 0.2 = 25 MB</code>).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="assembly-planning-messaging-planning">3.8. Understanding EnMasse resource configuration</h3>
<div class="sect3">
<h4 id="assembly-address-space-address-concepts-messaging-planning-planning">3.8.1. Address space and address concepts in EnMasse</h4>
<div class="paragraph">
<p>Before you begin configuring resources for EnMasse, you must first understand the concepts of an address space and an address in EnMasse.</p>
</div>
<div class="sect4">
<h5 id="con-address-space-messaging-planning-planning">Address space</h5>
<div class="paragraph">
<p>An address space is a group of addresses that can be accessed through a single connection (per protocol). This means that clients connected to the endpoints of an address space can send messages to or receive messages from any authorized address within that address space. An address space can support multiple protocols, as defined by the address space type.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You cannot modify endpoints for an existing address space.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>EnMasse has two types of address spaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#con-standard-address-space-messaging">Standard</a></p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#con-brokered-address-space-messaging">Brokered</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="con-address-messaging-planning-planning">Address</h5>
<div class="paragraph">
<p>An address is part of an address space and represents a destination for sending and receiving messages. An address has a type, which defines the semantics of sending messages to and receiving messages from that address.</p>
</div>
<div class="paragraph">
<p>The types of addresses available in EnMasse depend on the address space type.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="con-configuring-messaging">3.8.2. Service configuration resources and definition</h4>
<div class="paragraph">
<p>The service administrator configures EnMasse by creating Custom Resources that comprise the "service configuration." This service configuration contains instances of the following Custom Resource types:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Custom Resource type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AuthenticationService</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies an authentication service instance used to authenticate messaging clients.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AddressSpacePlan</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the messaging resources available for address spaces using this plan, such as the available address plans and the amount of router and broker resources that can be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AddressPlan</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the messaging resources consumed by a particular address using this plan, such as the fraction of routers and brokers an address can use and other properties that can be specified for multiple addresses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>StandardInfraConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For the <code>standard</code> address space type, specifies the router and broker configuration such as memory limits, storage capacity, affinity, and more.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BrokeredInfraConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For the <code>brokered</code> address space type, specifies the broker configuration  such as memory limits, storage capacity, affinity, and more.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When created, these Custom Resources define the configuration that is available to the messaging tenants.</p>
</div>
<div class="paragraph">
<p>The following diagram illustrates the relationship between the different service configuration resources and how they are referenced by the messaging tenant resources.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/config_relationships.png" alt="EnMasse entities">
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-example-use-case-messaging">3.8.3. Example use case for configuring EnMasse</h4>
<div class="paragraph">
<p>To help illustrate how the service configuration resources can be defined to satisfy a particular use case, the requirements of Company X for using EnMasse are outlined. This use case is referenced throughout the following documentation describing the service configuration resource types in further detail.</p>
</div>
<div class="paragraph">
<p>Company X has the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ability to accommodate multiple separate teams&#8212;&#8203;for example, engineering and quality assurance (QA) work teams&#8212;&#8203;that use messaging independently. To meet this requirement, multiple address spaces are needed.</p>
</li>
<li>
<p>Since the applications for Company X are written to use JMS APIs and make extensive use of local transactions and they use a mixture of AMQP and OpenWire clients, using the brokered address space type is required.</p>
</li>
<li>
<p>For engineering work, restricting the messaging infrastructure to support storage of no more than 1000 messages of approximately 1 KB per message, with up to 10 queues and topics is required.</p>
<div class="paragraph">
<p>For QA work, restricting the messaging infrastructure to support storage of no more than 10,000 messages of approximately 100 KB, with up to 50 queues and topics is required.</p>
</div>
</li>
<li>
<p>For engineering work, the ability to restrict who can connect into the address space is required.</p>
</li>
<li>
<p>For engineering work, the engineering team does not need to create distinct users that need to be individually authenticated.</p>
<div class="paragraph">
<p>For QA work, the QA team must be able to create users for each instance.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these requirements and how they can be met by configuring the appropriate resources is discussed in the following sections.</p>
</div>
<div class="sect4">
<h5 id="ref-restrict-messaging-infrastructure-messaging">Restricting messaging infrastructure</h5>
<div class="paragraph">
<p>Company X has the following requirements for using EnMasse:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For engineering work, restricting the messaging infrastructure to support storage of no more than 1000 messages of approximately 1 KB per message, with up to 10 queues and topics is required.</p>
<div class="paragraph">
<p>For QA work, restricting the messaging infrastructure to support storage of no more than 10,000 messages of approximately 100 KB, with up to 50 queues and topics is required.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Meeting this requirement involves configuring the <code>BrokeredInfraConfig</code> resource. The following points need to be taken into consideration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Calculate the memory size for the broker: Given the requirements, specifying a relatively small memory size for engineering work is likely sufficient, while more memory is required for the QA work. For more information about broker sizing guidelines, see <a href="http://enmasse.io/documentation/master/openshift.html#broker-component-sizing-messaging">Broker component sizing</a>.</p>
</li>
<li>
<p>Calculate the minimum amount of storage for the broker. For more information about broker sizing guidelines, see <a href="http://enmasse.io/documentation/master/openshift.html#broker-component-sizing-messaging">Broker component sizing</a>.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="examples_of_brokered_infrastructure_configurations">Examples of brokered infrastructure configurations</h6>
<div class="paragraph">
<p>The following brokered infrastructure configuration examples show broker component resource values that meet the requirements of Company X.</p>
</div>
<div class="listingblock">
<div class="title">Brokered infrastructure configuration example for engineering</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: BrokeredInfraConfig
metadata:
  name: engineering
spec:
  broker:
    resources:
      memory: 512Mi
      storage: 20Mi</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Brokered infrastructure configuration example for QA</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: BrokeredInfraConfig
metadata:
  name: qa
spec:
  broker:
    resources:
      memory: 4Gi
      storage: 50Gi</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-ability-restrict-address-space-connections-messaging">Ability to restrict address space connections</h5>
<div class="paragraph">
<p>Company X has the following requirement for using EnMasse: For engineering work, the ability to restrict who can connect into the address space is required.</p>
</div>
<div class="paragraph">
<p>To meet this requirement you must set a network policy in the brokered infrastructure configuration. For more information about network policies, see</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OpenShift Container Platform 3.11 documentation about <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cluster_administration/index#admin-guide-networking-networkpolicy">Enabling Network Policy</a>.</p>
</li>
<li>
<p>OpenShift Container Platform 4.2 documentation about <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.2/html-single/networking/index#configuring-networkpolicy">Configuring network policy with OpenShift SDN</a>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Brokered infrastructure configuration example showing network policy setting</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: BrokeredInfraConfig
metadata:
  name: engineering
spec:
  networkPolicy:
    ingress:
      - from:
        - namespaceSelector:
            matchLabels:
              org: engineering
  broker:
    resources:
      memory: 512Mi
      storage: 20Mi</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, the address space plan references the previous <code>BrokeredInfraConfig</code> Custom Resource.</p>
</div>
<div class="listingblock">
<div class="title">Address space plan example</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta2
kind: AddressSpacePlan
metadata:
  name: engineering
spec:
  infraConfigRef: engineering
  addressSpaceType: brokered
  addressPlans:
  - brokered-queue
  - brokered-topic</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-auth-service-resource-examples-messaging">Authentication service resource examples</h5>
<div class="paragraph">
<p>Company X has the following requirement for using EnMasse: For engineering work, the engineering team does not need to create distinct users that need to be individually authenticated. To meet this requirement, you specify the <code>none</code> authentication service:</p>
</div>
<div class="listingblock">
<div class="title">None authentication service example</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: AuthenticationService
metadata:
  name: engineering
spec:
  type: none</code></pre>
</div>
</div>
<div class="paragraph">
<p>For QA work, the QA team must be able to create users for each instance. Also,  QA has a database they want to use for persisting the users. To meet this requirement, you must use the <code>standard</code> authentication service and specify a data source:</p>
</div>
<div class="listingblock">
<div class="title">Standard authentication service example</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: admin.enmasse.io/v1beta1
kind: AuthenticationService
metadata:
  name: qa
spec:
  type: standard
  standard:
    storage:
      type: persistent-claim
      size: 5Gi
    datasource:
      type: postgresql
      host: db.example.com
      port: 5432
      database: authdb</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tenant-guide-messaging">4. Tenant guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The tenant guide provides resources on how to manage address spaces, addresses, and users as a
messaging tenant.</p>
</div>
<div class="sect2">
<h3 id="minimal-tenant-configuration-messaging">4.1. Minimal tenant configuration</h3>
<div class="paragraph">
<p>The following procedure will get you started with a minimal configuration for a messaging application.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Save the example configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-small
---
apiVersion: enmasse.io/v1beta1
kind: Address
metadata:
  name: myspace.myqueue
spec:
  address: myqueue
  type: queue
  plan: standard-small-queue</pre>
</div>
</div>
</li>
<li>
<p>Apply the example configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f application-config.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="managing-address-spaces-messaging">4.2. Managing address spaces</h3>
<div class="paragraph">
<p>EnMasse is configured to support managing address spaces using the OpenShift command-line
tools. Address spaces are managed like any other OpenShift resource using <code>oc</code>.</p>
</div>
<div class="sect3">
<h4 id="con-address-space-messaging">4.2.1. Address space</h4>
<div class="paragraph">
<p>An address space is a group of addresses that can be accessed through a single connection (per protocol). This means that clients connected to the endpoints of an address space can send messages to or receive messages from any authorized address within that address space. An address space can support multiple protocols, as defined by the address space type.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You cannot modify endpoints for an existing address space.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>EnMasse has two types of address spaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#con-standard-address-space-messaging">Standard</a></p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#con-brokered-address-space-messaging">Brokered</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="con-standard-address-space-messaging">4.2.2. Standard address space</h4>
<div class="paragraph">
<p>The standard address space is the default address space in EnMasse. It consists of an AMQP router network in combination with attachable storage units. Clients connect to a message router, which forwards messages to or from one or more message brokers. This address space type is appropriate when you have many connections and addresses. However, the standard address space has the following limitations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No transaction support</p>
</li>
<li>
<p>No message ordering</p>
</li>
<li>
<p>No selectors on queues</p>
</li>
<li>
<p>No browsing on queues</p>
</li>
<li>
<p>No message groups</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Clients connect and send and receive messages in this address space using the AMQP or MQTT protocols. Note that MQTT does not support qos2 or retained messages.</p>
</div>
<div class="sect4">
<h5 id="assembly-standard-address-types-messaging">Standard address types</h5>
<div class="paragraph">
<p>The standard address space supports five different address types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>queue</p>
</li>
<li>
<p>topic</p>
</li>
<li>
<p>anycast</p>
</li>
<li>
<p>multicast</p>
</li>
<li>
<p>subscription</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="con-standard-queue-messaging">Queue</h6>
<div class="paragraph">
<p>The queue address type is a store-and-forward queue. This address type is appropriate for implementing a distributed work queue, handling traffic bursts, and other use cases when you want to decouple the producer and consumer. A queue can be sharded across multiple storage units. Message ordering might be lost for queues in the standard address space.</p>
</div>
</div>
<div class="sect5">
<h6 id="con-standard-topic-messaging">Topic</h6>
<div class="paragraph">
<p>The topic address type supports the publish-subscribe messaging pattern where there are 1..N producers and 1..M consumers. Each message published to a topic address is forwarded to all subscribers for that address. A subscriber can also be durable, in which case messages are kept until the subscriber has acknowledged them.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you create a subscription on a topic, any senders to that topic must specify the <code>topic</code> capability.
</td>
</tr>
</table>
</div>
<div class="sect6">
<h7 id="hierarchical_topics_and_wildcards">Hierarchical topics and wildcards</h7>
<div class="paragraph">
<p>A client receiving from a topic address can specify a wildcard address with the topic address as the root. The wildcard behavior follows the MQTT syntax:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/</code> is a separator</p>
</li>
<li>
<p><code>+</code> matches one level</p>
</li>
<li>
<p><code>#</code> matches one or more levels</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, for example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>a/#/b</code> matches <code>a/foo/b</code>, <code>a/bar/b</code>, and <code>a/foo/bar/b</code></p>
</li>
<li>
<p><code>a/+/b</code> matches <code>a/foo/b</code> and <code>a/bar/b</code>, but would not match <code>a/foo/bar</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the standard address space, the first level must always be a defined topic address; that is, <code>#</code> and <code>+</code> are not valid as the first characters of a subscribing address.</p>
</div>
</div>
<div class="sect6">
<h7 id="known_issue_with_creating_a_subscriber_on_a_hierarchical_topic">Known issue with creating a subscriber on a hierarchical topic</h7>
<div class="paragraph">
<p>A known issue exists where creating a subscriber on a hierarchical topic in EnMasse causes the broker to instead create it as a competing consumer (handling the address like a queue rather than a topic). For more information about the specific workaround for your client, see the applicable client example section in <a href="http://enmasse.io/documentation/master/openshift.html#assembly-connecting-applications-messaging">Connecting applications to EnMasse</a>.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="con-standard-anycast-messaging">Anycast</h6>
<div class="paragraph">
<p>The anycast address type is a scalable direct address for sending messages to one consumer. Messages sent to an anycast address are not stored, but are instead forwarded directly to the consumer. This method makes this address type ideal for request-reply (RPC) uses or even work distribution. This is the cheapest address type as it does not require any persistence.</p>
</div>
</div>
<div class="sect5">
<h6 id="con-standard-multicast-messaging">Multicast</h6>
<div class="paragraph">
<p>The multicast address type is a scalable direct address for sending messages to multiple consumers. Messages sent to a multicast address are forwarded to all consumers receiving messages on that address. Because message acknowledgments from consumers are not propagated to producers, only pre-settled messages can be sent to multicast addresses.</p>
</div>
</div>
<div class="sect5">
<h6 id="con-standard-subscription-messaging">Subscription</h6>
<div class="paragraph">
<p>Using the subscription address type you can create a subscription for a topic that holds messages
published to the topic even if the subscriber is not attached. The consumer accesses the subscription  using the following address syntax: &lt;topic-address&gt;::&lt;subscription-address&gt;. For example, for a subscription <code>mysub</code> on a topic <code>mytopic</code> the consumer accesses the subscription from the address <code>mytopic::mysub</code>. The default setting permits only a single consumer per subscription. This setting can be changed by editing the <code>maxConsumers</code> field of the subscription address.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>maxConsumers</code> setting cannot be modified for existing subscriptions.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="con-brokered-address-space-messaging">4.2.3. Brokered address space</h4>
<div class="paragraph">
<p>The brokered address space is designed to support broker-specific features, at the cost of limited
scale in terms of the number of connections and addresses. This address space supports JMS
transactions, message groups, and selectors on queues and topics.</p>
</div>
<div class="paragraph">
<p>Clients can connect as well as send and receive messages in this address space using the following protocols:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AMQP</p>
</li>
<li>
<p>CORE</p>
</li>
<li>
<p>OpenWire</p>
</li>
<li>
<p>MQTT</p>
</li>
<li>
<p>STOMP</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="assembly-brokered-address-types-messaging">Brokered address types</h5>
<div class="paragraph">
<p>The brokered address space supports two address types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>queue</p>
</li>
<li>
<p>topic</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="con-brokered-queue-messaging">Queue</h6>
<div class="paragraph">
<p>The queue address type is a store-and-forward queue. This address type is appropriate for
implementing a distributed work queue, handling traffic bursts, and other use cases where you want
to decouple the producer and consumer. A queue in the brokered address space supports selectors,
message groups, transactions, and other JMS features. Message order can be lost with released messages.</p>
</div>
</div>
<div class="sect5">
<h6 id="con-brokered-topic-messaging">Topic</h6>
<div class="paragraph">
<p>The topic address type supports the publish-subscribe messaging pattern in which there are 1..N producers and 1..M consumers. Each message published to a topic address is forwarded to all subscribers for that address. A subscriber can also be durable, in which case messages are kept until the subscriber has acknowledged them.</p>
</div>
<div class="sect6">
<h7 id="hierarchical_topics_and_wildcards_2">Hierarchical topics and wildcards</h7>
<div class="paragraph">
<p>A client receiving from a topic address can specify a wildcard address with the topic address as the root. The wildcard behavior follows the MQTT syntax:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/</code> is a separator</p>
</li>
<li>
<p><code>+</code> matches one level</p>
</li>
<li>
<p><code>#</code> matches one or more levels</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, for example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>a/#/b</code> matches <code>a/foo/b</code>, <code>a/bar/b</code>, <code>a/foo/bar/b</code></p>
</li>
<li>
<p><code>a/+/b</code> matches <code>a/foo/b</code> and <code>a/bar/b</code>, but would not match <code>a/foo/bar</code></p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="known_issue_with_creating_a_subscriber_on_a_hierarchical_topic_2">Known issue with creating a subscriber on a hierarchical topic</h7>
<div class="paragraph">
<p>A known issue exists where creating a subscriber on a hierarchical topic in EnMasse causes the broker to instead create it as a competing consumer (handling the address like a queue rather than a topic). For more information about the specific workaround for your client, see the applicable client example section in <a href="http://enmasse.io/documentation/master/openshift.html#assembly-connecting-applications-messaging">Connecting applications to EnMasse</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="con-tenant-address-space-plans-messaging">4.2.4. Address space plans</h4>
<div class="paragraph">
<p>An address space is configured with an address space plan, which describes the allowed resource
usage of that address space. The address space plans are configured by the service administrator and
can vary between EnMasse installations.</p>
</div>
<div class="paragraph">
<p>The address space plan can be changed if the address space requires more, or less, resources.</p>
</div>
</div>
<div class="sect3">
<h4 id="proc-list-available-address-space-plans-messaging">4.2.5. Listing available address space plans using the command line</h4>
<div class="paragraph">
<p>You can list the address space plans available for your address space type.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a messaging tenant:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Retrieve the schema showing available address space plans (replace <code>standard</code> with <code>brokered</code> for the brokered address space type):</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">oc get addressspaceschema standard -o jsonpath='{.spec.plans[*].name}'</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-list-available-auth-services-messaging">4.2.6. Listing available authentication services using the command line</h4>
<div class="paragraph">
<p>You can list the authentication services available for your address space type.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a messaging tenant:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Retrieve the schema with the authentication services listed (replace <code>standard</code> with <code>brokered</code> for the brokered address space type):</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">oc get addressspaceschema standard -o jsonpath='{.spec.authenticationServices}'</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="address-space-examples-messaging">4.2.7. Address space examples</h4>
<div class="sect4">
<h5 id="ref-address-space-example-messaging">Address space example</h5>
<div class="paragraph">
<p>This address space example shows only the required options to create an <code>AddressSpace</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard <i class="conum" data-value="1"></i><b>(1)</b>
  plan: standard-unlimited <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The address space type can be either <code>brokered</code> or <code>standard</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The address space plan depends on the address space type and what has been configured by the EnMasse administrator. To view your available address space plans, see <a href="http://enmasse.io/documentation/master/openshift.html#proc-list-available-address-space-plans-messaging">Listing available address space plans</a>.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ref-address-space-example-auth-service-messaging">Address space example using an authentication service</h5>
<div class="paragraph">
<p>This address space example shows how you can configure the authentication service of an <code>AddressSpace</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited
  authenticationService:
    name: standard-authservice <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The authentication service name depends on the available authentication services configured by the EnMasse administrator. To view the available authentication services for your address space type, see <a href="http://enmasse.io/documentation/master/openshift.html#proc-list-available-auth-services-messaging">Listing available authentication services</a>.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ref-address-space-example-external-auth-service-override-messaging">Address space example using an external authentication service allowing overrides</h5>
<div class="paragraph">
<p>This address space example shows how you can override the host name, port number, and realm for an external authentication service. Note that the ability to specify overrides depends on how the external authentication service is configured by the EnMasse administrator.</p>
</div>
<div class="paragraph">
<p>For more information about how to configure an external authentication service to allow a messaging tenant to override host name, port number, and realm, see <a href="http://enmasse.io/documentation/master/openshift.html#ref-external-auth-service-example-allow-overrides-messaging">External authentication service example allowing overrides</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited
  authenticationService:
    name: external-authservice <i class="conum" data-value="1"></i><b>(1)</b>
    type: external
    overrides: <i class="conum" data-value="2"></i><b>(2)</b>
      realm: enmasse-infra-space-standard-auth
      host: standard-authservice-enmasse-infra.apps.wfd-28d9.openshiftworkshop.com
      port: 5671
      caCertSecret:
        name: my-ca-cert</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The authentication service name depends on the available authentication services configured by the EnMasse administrator. To view the available authentication services for your address space type, see <a href="http://enmasse.io/documentation/master/openshift.html#proc-list-available-auth-services-messaging">Listing available authentication services</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the override values.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ref-address-space-example-exposing-endpoints-messaging">Address space examples exposing endpoints externally</h5>
<div class="paragraph">
<p>These address space examples show how you can configure the external endpoints of an <code>AddressSpace</code>
to access messaging endpoints outside the OpenShift cluster.</p>
</div>
<div class="sect5">
<h6 id="openshift_loadbalancer_service_example">OpenShift <code>LoadBalancer</code> service example</h6>
<div class="paragraph">
<p>To expose <code>AddressSpace</code> endpoints through OpenShift <code>LoadBalancer</code> services, the <code>loadbalancer</code> type is used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited
  authenticationService:
    name: standard-authservice
  endpoints:
  - name: messaging <i class="conum" data-value="1"></i><b>(1)</b>
    service: messaging <i class="conum" data-value="2"></i><b>(2)</b>
    expose:
     type: loadbalancer <i class="conum" data-value="3"></i><b>(3)</b>
     loadBalancerPorts: <i class="conum" data-value="4"></i><b>(4)</b>
     - amqp
     - amqps
      annotations: <i class="conum" data-value="5"></i><b>(5)</b>
        mykey: myvalue
      loadBalancerSourceRanges: <i class="conum" data-value="6"></i><b>(6)</b>
      - 10.0.0.0/8</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Required) The name of the endpoint. The name specified affects the name of the OpenShift service to be created as well as the name of the endpoint in the status section of the <code>AddressSpace</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>(Required) The service configured for the endpoint. Valid values for <code>service</code> are <code>messaging</code> and <code>mqtt</code>. However, the <code>mqtt</code> service is supported for the <code>standard</code> address space type only.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>(Required) The type of endpoint being exposed. The <code>loadbalancer</code> type creates an OpenShift <code>LoadBalancer</code> service. Valid values are <code>route</code> and <code>loadbalancer</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>(Required) A list of the ports to be exposed on the <code>LoadBalancer</code> service. For the <code>messaging</code> service, the valid values are <code>amqp</code> and <code>amqps</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>(Optional) A set of key-value annotation pairs that are added to the <code>LoadBalancer</code> <code>Service</code> object.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>(Optional) The allowed source ranges that are accepted by the load balancer.</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="openshift_route_example">OpenShift route example</h6>
<div class="paragraph">
<p>To expose <code>AddressSpace</code> endpoints as OpenShift routes, the <code>route</code> type is used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited
  authenticationService:
    name: standard-authservice
  endpoints:
  - name: messaging <i class="conum" data-value="1"></i><b>(1)</b>
    service: messaging <i class="conum" data-value="2"></i><b>(2)</b>
    expose:
     type: route
     routeServicePort: amqps <i class="conum" data-value="3"></i><b>(3)</b>
     routeTlsTermination: passthrough <i class="conum" data-value="4"></i><b>(4)</b>
     routeHost: messaging.example.com <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Required) The name of the endpoint. The name specified affects the name of the OpenShift service to be created as well as the name of the endpoint in the status section of the <code>AddressSpace</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>(Required) The service configured for the endpoint. Valid values for <code>service</code> are <code>messaging</code>, or <code>mqtt</code>. However, the <code>mqtt</code> service is supported for the <code>standard</code> address space type only.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>(Required) The name of the port to be exposed. With the <code>route</code> type, only a single TLS-enabled port can be specified. For the <code>messaging</code> service, the valid values are <code>amqps</code> or <code>https</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>(Required) The TLS termination policy to be used for the OpenShift route. For the <code>messaging</code> service, the <code>amqps</code> port requires <code>passthrough</code> to be specified, whereas <code>https</code> (websockets) also allows <code>reencrypt</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>(Optional) The host name to use for the created route.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-address-space-example-cert-providers-messaging">Address space certificate provider configuration examples</h5>
<div class="paragraph">
<p>The following address space examples show how you can configure the endpoints of an <code>AddressSpace</code> using different certificate providers. The certificate provider determines how certificates are issued for the endpoints of an <code>AddressSpace</code>.</p>
</div>
<div class="sect5">
<h6 id="openshift_provider"><code>openshift</code> provider</h6>
<div class="paragraph">
<p>The <code>openshift</code> certificate provider can be used to configure endpoints with certificates signed by
the OpenShift cluster certificate authority (CA).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited
  authenticationService:
    name: standard-authservice
  endpoints:
  - name: messaging
    service: messaging
    cert:
     provider: openshift <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Required) The certificate provider type. Valid values are <code>openshift</code> (on OpenShift only), <code>certBundle</code>, and <code>selfsigned</code> (default value).</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="selfsigned_provider"><code>selfsigned</code> provider</h6>
<div class="paragraph">
<p>The <code>selfsigned</code> certificate provider can be used to configure endpoints with self-signed
certificates. The CA for these certificates can be found in the <code>status.caCert</code> field of the
<code>AddressSpace</code> resource.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Using a self-signed certificate in production environments is not recommended.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited
  authenticationService:
    name: standard-authservice
  endpoints:
  - name: messaging
    service: messaging
    cert:
     provider: selfsigned <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Required) The certificate provider type. Valid values are <code>openshift</code> (on OpenShift only), <code>certBundle</code>, and <code>selfsigned</code> (default value).</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="certbundle_provider"><code>certBundle</code> provider</h6>
<div class="paragraph">
<p>The <code>certBundle</code> certificate provider can be used to configure endpoints with user-supplied
certificates signed by your own CA. Certificate rotation can be performed by updating the <code>tlsKey</code> and
<code>tlsCert</code> fields with updated certificates, and then updating the <code>AddressSpace</code> resource.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited
  authenticationService:
    name: standard-authservice
  endpoints:
  - name: messaging
    service: messaging
    cert:
     provider: certBundle <i class="conum" data-value="1"></i><b>(1)</b>
     tlsKey: Y2VydGJ1bmRsZXByb3ZpZGVyY2VydA== <i class="conum" data-value="2"></i><b>(2)</b>
     tlsCert: Y2VydGJ1bmRsZXByb3ZpZGVyY2VydA== <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Required) The certificate provider type. Valid values are <code>openshift</code> (on OpenShift only), <code>certBundle</code>, and <code>selfsigned</code> (default value).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>(Required) The base64-encoded value of the PEM private key (including the preamble).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>(Required) The base64-encoded value of the PEM certificate (including the preamble).</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-address-space-example-exports-messaging">Address space example exports</h5>
<div class="paragraph">
<p>You can export your address space information using the following three export types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ConfigMap</code></p>
</li>
<li>
<p><code>Secret</code></p>
</li>
<li>
<p><code>Service</code></p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="configmap_and_secret_type_export_examples"><code>ConfigMap</code> and <code>Secret</code> type export examples</h6>
<div class="paragraph">
<p>This example shows the format used by the <code>ConfigMap</code> export type. The format of the <code>Secret</code> export type uses the same keys as the <code>ConfigMap</code> export type, but the values are Base64-encoded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">service.host: messaging.svc
service.port.amqp: 5672
external.host: external.example.com
external.port: 5671
ca.crt: // PEM formatted CA</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="service_type_export_example"><code>Service</code> type export example</h6>
<div class="paragraph">
<p>This example shows the format used by the <code>Service</code> export type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">  externalName:  messaging.svc
    ports:
    - name: amqp
      port: 5672
      protocol: TCP
      targetPort: 5672</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-example-address-space-output-messaging">4.2.8. Example address space status output</h4>
<div class="paragraph">
<p>The <code>AddressSpace</code> resource contains a <code>status</code> field that can be used to retrieve information about
its state and endpoints. The following output is an example of the output you can get from running
<code>oc get addressspace myspace -o yaml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  ...
status:
  isReady: false <i class="conum" data-value="1"></i><b>(1)</b>
  messages:
    - "One or more deployments are not ready: "
  endpointStatuses: <i class="conum" data-value="2"></i><b>(2)</b>
    - name: messaging
      cert: aGVsbG8= <i class="conum" data-value="3"></i><b>(3)</b>
      serviceHost: messaging-123.enmasse-infra.svc <i class="conum" data-value="4"></i><b>(4)</b>
      servicePorts: <i class="conum" data-value="5"></i><b>(5)</b>
        - name: amqp
          port: 5672
        - name: amqps
          port: 5671
      externalHost: messaging.example.com <i class="conum" data-value="6"></i><b>(6)</b>
      externalPorts: <i class="conum" data-value="7"></i><b>(7)</b>
        - name: amqps
          port: 443</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>status.isReady</code> field can be either <code>true</code> or <code>false</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>status.endpointStatuses</code> field provides information about available endpoints for this address space.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>cert</code> field contains the base64-encoded certificate for a given endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>serviceHost</code> field contains the cluster-internal host name for a given endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The <code>servicePorts</code> field contains the available ports for the cluster-internal host.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The <code>externalHost</code> field contains the external host name for a given endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The <code>externalPorts</code> field contains the available ports for the external host.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="ref-address-space-example-exporting-endpoints-messaging">4.2.9. Example of exporting address space information into the application namespace</h4>
<div class="paragraph">
<p>This address space example shows how you can export the endpoint information of an <code>AddressSpace</code>
resource to a <code>ConfigMap</code>, <code>Secret</code>, or <code>Service</code> in the same namespace as the messaging
application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited
  authenticationService:
    name: standard-authservice
  endpoints:
  - name: messaging
    service: messaging
    exports:
    - kind: ConfigMap <i class="conum" data-value="1"></i><b>(1)</b>
      name: my-config <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Required) The type of export: <code>ConfigMap</code>, <code>Secret</code>, or <code>Service</code>. The resulting <code>ConfigMap</code> contains the values in the format
shown in <a href="http://enmasse.io/documentation/master/openshift.html#ref-address-space-example-exports-messaging">example exports format</a>. For <code>Secret</code>, the same keys are used, but the values are base64-encoded. For
<code>Service</code>, a OpenShift service of the type <code>ExternalName</code> is created. This provides applications running on OpenShift with a way to
inject endpoint information or provide a proxy service in the same namespace as the application. For more information see <a href="http://enmasse.io/documentation/master/openshift.html#ref-address-space-example-exports-messaging">example exports format</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>(Required) The name of the resource to create and update.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When exporting endpoint information, the <code>system:serviceaccounts:_enmasse-infra_</code> group must be granted privileges to create, update, and delete the
configmap specified in the exports list. You can do this by creating an RBAC role and role-binding such as this one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: rbac
rules:
  - apiGroups: [ "" ]
    resources: [ "configmaps" ]
    verbs: [ "create" ]
  - apiGroups: [ "" ]
    resources: [ "configmaps" ]
    resourceNames: [ "my-config" ]
    verbs: [ "get", "update", "patch" ]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: rbac-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: rbac
subjects:
- kind: Group
  name: system:serviceaccounts:_enmasse-infra_</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-address-space-example-connectors-messaging">4.2.10. Address space connector examples</h4>
<div class="paragraph">
<p>You can federate a <code>standard</code> address space type with another AMQP server. Two methods of operation are supported: <em>remote address connection</em> and <em>message store-and-forward</em>.</p>
</div>
<div class="paragraph">
<p>Remote address connection involves mapping addresses on a remote AMQP endpoint into an address space. For example, suppose an AMQP server is running on the host <code>messaging.example.com</code> that you want to access by connecting using the EnMasse endpoints. To enable remote address connection, you need to create an address space connector.</p>
</div>
<div class="paragraph">
<p>Message store-and-forward involves enabling address forwarding. First you need to create an address space connector. Then, you need to create an address forwarder for each address. For more information about address forwarding, see <a href="http://enmasse.io/documentation/master/openshift.html#ref-address-example-forwarders-messaging">Address forwarding examples</a>.</p>
</div>
<div class="paragraph">
<p>The following examples show how you can configure an address space connector.</p>
</div>
<div class="sect4">
<h5 id="address_space_connector_using_sasl_plain">Address space connector using SASL PLAIN</h5>
<div class="paragraph">
<p>You can use SASL PLAIN when you do not want to use mutual TLS for authentication. Not enabling TLS is not recommended, since any user names and passwords are then sent as plain text.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited
  connectors:
  - name: remote1 <i class="conum" data-value="1"></i><b>(1)</b>
    endpointHosts: <i class="conum" data-value="2"></i><b>(2)</b>
    - host: messaging.example.com
      port: 5672
    - host: messaging2.example.com
    idleTimeout: <i class="conum" data-value="3"></i><b>(3)</b>
    maxFrameSize: <i class="conum" data-value="4"></i><b>(4)</b>
    tls: {} <i class="conum" data-value="5"></i><b>(5)</b>
    credentials: <i class="conum" data-value="6"></i><b>(6)</b>
      username:
        value: test
      password:
        valueFromSecret:
          name: password-secret
          key: password.txt
    role: <i class="conum" data-value="7"></i><b>(7)</b>
    addresses: <i class="conum" data-value="8"></i><b>(8)</b>
    - name: p1
      pattern: "prices/*"
    - name: p2
      pattern: "clients/*/1"</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Required) Specifies the name of the connector. All remote addresses are prefixed with the connector name and a forward slash, <code>/</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>(Required) Specifies a list of endpoints for this connector. This list must contain at least one entry, and any additional entries are used for failover. If not otherwise specified, the <code>port</code> field value is set to the registered IANA port for AMQP (or AMQPS if TLS is enabled).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>(Optional) Idle timeout of the AMQP connection (seconds). 0 disables the idle timeout.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>(Optional) Max frame size of the AMQP connection.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>(Optional) Enable TLS. The connector trusts global root CAs by default. To use a custom CA, specify a value for the <code>caCert</code> field.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>(Optional) Specifies the username and password credentials to use for this connector. The values can be specified inline or by referencing a secret along with an optional key specifying the location within the secret. The secret must be readable by the <code>system:serviceaccounts:_enmasse-infra_</code> group.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>(Optional) Role of the connector. Valid values are "normal", "edge", and "route-container" (default value).</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>(Required) Specifies a list of patterns matching addresses to be exposed on the remote endpoint. The pattern consists of one or more tokens separated by a forward slash, <code>/</code>. A token can be one of the following: a * character, a # character, or a sequence of characters that do not include /, *, or #. The * token matches any single token. The # token matches zero or more tokens. * has higher precedence than #, and exact match has the highest precedence.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="address_space_connector_using_mutual_tls">Address space connector using mutual TLS</h5>
<div class="paragraph">
<p>Configuring a client TLS certificate enables SASL EXTERNAL to be used for authentication. The certificates can be specified inline or using a secret reference.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited
  connectors:
  - name: remote1 <i class="conum" data-value="1"></i><b>(1)</b>
    endpointHosts: <i class="conum" data-value="2"></i><b>(2)</b>
    - host: messaging.example.com
      port: 5671
    tls:
      caCert: <i class="conum" data-value="3"></i><b>(3)</b>
        valueFromSecret:
          name: remote-certs
          key: ca.crt
      clientCert: <i class="conum" data-value="4"></i><b>(4)</b>
        valueFromSecret:
          name: remote-certs
          key: tls.crt
      clientKey: <i class="conum" data-value="5"></i><b>(5)</b>
        valueFromSecret:
          name: remote-certs
          key: tls.key
    addresses:
    - name: p1
      pattern: "*"</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Required) Specifies the name of the connector. All remote addresses are prefixed with the connector name and a forward slash, <code>/</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>(Required) Specifies a list of endpoints for this connector. This list must contain at least one entry, and any additional entries are used for failover. If not otherwise specified, the <code>port</code> field value is set to the registered IANA port for AMQP (or AMQPS if TLS is enabled).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>(Optional) Specifies the CA certificate to trust for the remote connection. The referenced secret must be readable by the <code>system:serviceaccounts:_enmasse-infra_</code> group.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>(Optional) Specifies the client certificate to use for mutual TLS authentication. The referenced secret must be readable by the <code>system:serviceaccounts:_enmasse-infra_</code> group.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>(Optional) Specifies the client private key to use for mutual TLS authentication. The referenced secret must be readable by the <code>system:serviceaccounts:_enmasse-infra_</code> group.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="create-address-space-cli-messaging">4.2.11. Creating address spaces using the command line</h4>
<div class="paragraph">
<p>In EnMasse, you create address spaces using standard command-line tools.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a messaging tenant:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Create the project for the messaging application:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc new-project myapp</pre>
</div>
</div>
</li>
<li>
<p>Create an address space definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-unlimited</code></pre>
</div>
</div>
</li>
<li>
<p>Create the address space:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create -f standard-address-space.yaml</pre>
</div>
</div>
</li>
<li>
<p>Check the status of the address space:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspace myspace -o jsonpath={.status.isReady}</pre>
</div>
</div>
<div class="paragraph">
<p>The address space is ready for use when the previous command outputs <code>true</code>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-create-address-space-console-messaging">4.2.12. Creating an address space using the EnMasse Console</h4>
<div class="paragraph">
<p>You can create a new address space using the EnMasse Console, including configuring the endpoints of an address space using different certificate providers and creating endpoints to make the address space available for messaging applications to use.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you choose not to configure endpoints for your address space, the system creates a default set of endpoints as OpenShift routes for AMQPS and AMQP-WSS, secured with a system generated (self-signed) certificate and a cluster service.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the EnMasse Console.</p>
<div class="paragraph">
<p>For more information about how to access the EnMasse Console, see <a href="http://enmasse.io/documentation/master/openshift.html#logging-into-console-messaging">Accessing the EnMasse Console</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Address Space</strong>. The Create an instance wizard opens.</p>
</li>
<li>
<p>Complete the required fields and when you are finished, click <strong>Finish</strong> to create the new address space.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When the address space has been successfully created, you can click the address space name to view information about the newly created address space, including messaging and application statistics and endpoint information.</p>
</div>
</div>
<div class="sect3">
<h4 id="proc-change-address-space-plan-console-messaging">4.2.13. Changing the address space plan associated with an address space using the EnMasse Console</h4>
<div class="paragraph">
<p>You can change the address space plan that is associated with an address space using the  EnMasse Console.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have already created an address space. For more information see <a href="http://enmasse.io/documentation/master/openshift.html#proc-create-address-space-console-messaging">Creating an address space using the EnMasse Console</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the EnMasse Console. For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#logging-into-console-messaging">Accessing the EnMasse Console</a>.</p>
</li>
<li>
<p>Locate the address space for which you want to change the address space plan.</p>
</li>
<li>
<p>In the far right column, click the vertical ellipsis icon and select <strong>Edit</strong>. The Edit window opens.</p>
</li>
<li>
<p>In the <strong>Address space plan</strong> field, select a different plan from the list and click <strong>Confirm</strong>. The address space plan is changed for that address space.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-change-address-space-auth-service-console-messaging">4.2.14. Changing the authentication service associated with an address space using the EnMasse Console</h4>
<div class="paragraph">
<p>You can change the authentication service that is associated with an address space using the EnMasse Console.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have already created an address space. For more information see <a href="http://enmasse.io/documentation/master/openshift.html#proc-create-address-space-console-messaging">Creating an address space using the EnMasse Console</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the EnMasse Console. For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#logging-into-console-messaging">Accessing the EnMasse Console</a>.</p>
</li>
<li>
<p>Locate the address space for which you want to change the authentication service.</p>
</li>
<li>
<p>In the far right column, click the vertical ellipsis icon and select <strong>Edit</strong>. The Edit window opens.</p>
</li>
<li>
<p>In the <strong>Authentication Service</strong> field, select a different authentication service from the list and click <strong>Confirm</strong>. The authentication service is changed for that address space.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-delete-address-space-console-messaging">4.2.15. Deleting an address space using the EnMasse Console</h4>
<div class="paragraph">
<p>You can delete an existing address space using the EnMasse Console.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the EnMasse Console.</p>
<div class="paragraph">
<p>For more information about how to access the EnMasse Console, see <a href="http://enmasse.io/documentation/master/openshift.html#logging-into-console-messaging">Accessing the EnMasse Console</a>.</p>
</div>
</li>
<li>
<p>Locate the address space that you want to delete.</p>
</li>
<li>
<p>In the far right column, click the vertical ellipsis icon and select <strong>Delete</strong>. The delete confirmation window opens.</p>
</li>
<li>
<p>Confirm your selection by clicking <strong>Delete</strong>. The address space is deleted.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="retrieving-address-space-information-messaging">4.2.16. Example commands for retrieving address space information</h4>
<div class="paragraph">
<p>The following table shows the commands for retrieving address space information.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Retrieving address space information commands table</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">To retrieve the&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Run this command:</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>status of an address space</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>oc get addressspace myspace -o jsonpath={.status.isReady}</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>base64-encoded PEM certificate for the messaging endpoint</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>oc get addressspace myspace -o 'jsonpath={.status.caCert}'</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>host name for the messaging endpoint</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>oc get addressspace myspace -o 'jsonpath={.status.endpointStatuses[?(@.name=="messaging")].externalHost}'</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="replace-address-space-cli-messaging">4.2.17. Replacing address spaces using the command line</h4>
<div class="paragraph">
<p>Address spaces can be replaced in order to change the plan, endpoints, or network policies, or
to replace certificates if using the <code>certBundle</code> certificate provider. When changing the plan,
EnMasse will attempt to apply the new plan if the current set of addresses fits within the new
quota. If it does not, an error is provided on the <code>AddressSpace</code> resource.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a messaging tenant:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Select the project for the messaging application:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc project myapp</pre>
</div>
</div>
</li>
<li>
<p>Update address space definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: AddressSpace
metadata:
  name: myspace
spec:
  type: standard
  plan: standard-small</code></pre>
</div>
</div>
</li>
<li>
<p>Replace the address space:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc replace -f standard-address-space-replace.yaml</pre>
</div>
</div>
</li>
<li>
<p>Check the status of the address space:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspace myspace -o jsonpath={.status.isReady}</pre>
</div>
</div>
<div class="paragraph">
<p>The address space is ready for use when the above command outputs <code>true</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="managing-addresses-messaging">4.3. Managing addresses</h3>
<div class="paragraph">
<p>EnMasse is configured to support managing addresses using the OpenShift command-line tools
and the EnMasse Console. <code>Address</code> resources can be managed like any other OpenShift
API resource using <code>oc</code>.</p>
</div>
<div class="sect3">
<h4 id="con-address-messaging">4.3.1. Address</h4>
<div class="paragraph">
<p>An address is part of an address space and represents a destination for sending and receiving messages. An address has a type, which defines the semantics of sending messages to and receiving messages from that address.</p>
</div>
<div class="paragraph">
<p>The types of addresses available in EnMasse depend on the address space type.</p>
</div>
</div>
<div class="sect3">
<h4 id="con-tenant-address-plans-messaging">4.3.2. Address plans</h4>
<div class="paragraph">
<p>An address is configured with an address plan, which describes the resource usage of that address.
The address plans are configured by the service administrator and can vary between EnMasse
installations. The number of addresses that can be created, and what plans are available, depends on
quota enforced by the address space plan.</p>
</div>
<div class="paragraph">
<p>Some address types also support changing the <code>plan</code> field: <code>queue</code>, <code>anycast</code>, and <code>multicast</code>
address types in the <code>standard</code> address space support changing the plan as long as the new plan
does not exceed the allowed quota. For queues, addresses are dynamically migrated across brokers,
which might cause reordering of messages.</p>
</div>
<div class="sect4">
<h5 id="ref-address-example-messaging">Address example</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: Address
metadata:
    name: myspace.myqueue <i class="conum" data-value="1"></i><b>(1)</b>
spec:
    address: myqueue <i class="conum" data-value="2"></i><b>(2)</b>
    type: queue <i class="conum" data-value="3"></i><b>(3)</b>
    plan: standard-small-queue <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The address name must be prefixed with the address space name and a dot. Address names can only include alphanumeric characters.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The address is the messaging address this address resource represents.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The address type dictates the semantics of this address.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The address plan describes the resource usage for the address. For more information about how to view the available plans see <a href="http://enmasse.io/documentation/master/openshift.html#proc-list-available-address-plans-messaging">Listing available address plans</a>.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ref-address-example-topic-and-sub-messaging">Topic and subscription address example</h5>
<div class="paragraph">
<p>When using topics and subscriptions, the subscription references the topic to which it belongs using the <code>topic:</code> field, as shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: Address
metadata:
    name: myspace.mytopic
spec:
    address: mytopic
    type: topic
    plan: standard-small-topic</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: Address
metadata:
    name: myspace.mysub
spec:
    address: mysub
    type: subscription
    plan: standard-small-subscription
    topic: mytopic <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The address of topic that this subscription refers to.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ref-address-example-ttlmessaging">Address TTL restriction example</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: Address
metadata:
    name: myspace.myqueue
spec:
    address: myqueue
    type: queue
    plan: standard-small-queue
    messageTtl: <i class="conum" data-value="1"></i><b>(1)</b>
        minimim: 30000
        maximum: 300000</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Optional) Restricts message time-to-live (TTL). Applies to address types <code>queue</code> and <code>topic</code> only.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>messageTtl</code> field is used to restrict the effective <a href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-properties"><code>absolute-expiry-time</code></a> of
any message put to a queue or topic. The <code>maximum</code> and <code>minimum</code> values are defined in milliseconds. The system adjusts the TTL value of an incoming message to a particular address based on these values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a messages arrives at the address with a TTL value that is greater than the <code>maximum</code> value, the system changes the message TTL to the maximum value.</p>
</li>
<li>
<p>If a message arrives at the address with a TTL value that is less than the <code>minimum</code> value, the system changes the message TTL to the minimum value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Messages that arrive without a TTL defined are considered to have a TTL value of infinity.</p>
</div>
<div class="paragraph">
<p>Expired messages will be automatically removed from the <code>queue</code>, <code>subscription</code> or temporary topic subscription periodically. These messages are lost. This occurs every 30 seconds.</p>
</div>
<div class="paragraph">
<p>TTL restrictions may also be imposed by the address plan.  If a TTL restriction is imposed at both the plan and the address,
the address TTL restriction can only further narrow the TTL restriction.  The address <code>status</code> section shows the
TTL values that are in force.</p>
</div>
</div>
<div class="sect4">
<h5 id="ref-address-example-forwarders-messaging">Address forwarding examples</h5>
<div class="paragraph">
<p>You can use forwarders to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>automatically forward messages from a local address to a remote AMQP server outside of EnMasse, or</p>
</li>
<li>
<p>forward messages from a remote AMQP server to a local address.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To use an address forwarder, you must first configure a connector to the remote AMQP server for the address space. For more information about address space connectors, see <a href="http://enmasse.io/documentation/master/openshift.html#ref-address-space-example-connectors-messaging">Address space connector examples</a>.</p>
</div>
<div class="paragraph">
<p>Address forwarding is supported only in the <code>standard</code> address space type, and only for the <code>queue</code> and <code>subscription</code> address types. With the <code>queue</code> address type, you can forward messages to a remote AMQP server or from a remote AMQP server to a local queue. With the <code>subscription</code> address type, you can create a forwarder to a remote AMQP address, but you cannot create a forwarder that copies messages to the subscription. That is, the <code>subscription</code> address type supports forwarding in the <code>out</code> direction only, as shown in the example.</p>
</div>
<div class="paragraph">
<p>In the following examples, it is assumed that a connector, <code>remote1</code>, has been configured for the address space.</p>
</div>
<div class="sect5">
<h6 id="forwarding_messages_from_a_local_queue_to_a_remote_amqp_server">Forwarding messages from a local queue to a remote AMQP server</h6>
<div class="paragraph">
<p>In this example, messages in <code>myqueue</code> are forwarded to the remote AMQP server with an address of <code>clients/me/1</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: Address
metadata:
  name: myspace.myqueue
spec:
  address: myqueue
  type: queue
  plan: standard-small-queue
  forwarders:
  - name: f1 <i class="conum" data-value="1"></i><b>(1)</b>
    remoteAddress: remote1/clients/me/1 <i class="conum" data-value="2"></i><b>(2)</b>
    direction: out <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Required) Specifies the name of the forwarder, which is used to ensure a unique identity.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>(Required) Specifies the remote address to forward messages to. The address must be prefixed with the connector name and must be identical to the address matching patterns defined on the connector.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>(Required) Specifies the direction of message flow, which is either <code>out</code> or <code>in</code>. A value of <code>out</code> forwards messages to the remote endpoint. A value of <code>in</code> forwards messages from the remote endpoint.</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="forwarding_messages_from_a_remote_amqp_server_to_a_local_queue">Forwarding messages from a remote AMQP server to a local queue</h6>
<div class="paragraph">
<p>In this example, you receive messages from an an address <code>prices/milk</code> on a remote AMQP server.  The messages are then moved to a local queue, <code>myqueue</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: Address
metadata:
  name: myspace.myqueue
spec:
  address: myqueue
  type: queue
  plan: standard-small-queue
  forwarders:
  - name: f1 <i class="conum" data-value="1"></i><b>(1)</b>
    remoteAddress: remote1/prices/milk <i class="conum" data-value="2"></i><b>(2)</b>
    direction: in <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>(Required) Specifies the name of the forwarder, which is used to ensure a unique identity.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>(Required) Specifies the remote address to forward messages to. The address must be prefixed with the connector name and must be identical to the address matching patterns defined on the connector.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>(Required) Specifies the direction of message flow, which is either <code>out</code> or <code>in</code>. A value of <code>out</code> forwards messages to the remote endpoint. A value of <code>in</code> forwards messages from the remote endpoint.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="proc-list-available-address-plans-messaging">4.3.3. Listing available address plans using the command line</h4>
<div class="paragraph">
<p>You can list the address plans available for an address type, such as <code>queue</code>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a messaging tenant:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Retrieve the schema with the address plans listed (replace <code>standard</code> with <code>brokered</code> for the brokered address space type):</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">oc get addressspaceschema standard -o 'jsonpath={.spec.addressTypes[?(@.name=="queue")].plans[*].name}'</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="create-address-cli-messaging">4.3.4. Creating addresses using the command line</h4>
<div class="paragraph">
<p>You can create addresses using the command line.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an address definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: Address
metadata:
    name: myspace.myqueue
spec:
    address: myqueue
    type: queue
    plan: standard-small-queue</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Prefixing the name with the address space name is required to ensure addresses from different address spaces do not collide.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create the address:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">oc create -f standard-small-queue.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>List the addresses:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">oc get addresses -o yaml</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="create-address-console-messaging">4.3.5. Creating addresses using the EnMasse Console</h4>
<div class="paragraph">
<p>You can create new addresses using the EnMasse Console. The type of addresses that you can create are determined by the type of address space.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have created an address space. For more information see <a href="http://enmasse.io/documentation/master/openshift.html#create-address-space-cli-messaging">Creating an address space</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the EnMasse Console. For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#logging-into-console-messaging">Accessing the EnMasse Console</a>.</p>
</li>
<li>
<p>Click the address space link for the address space where you want to create a new address.</p>
</li>
<li>
<p>Click <strong>Create</strong>. The Create new address window opens.</p>
</li>
<li>
<p>Type a name and select the address type. If selecting <strong>subscription</strong>, from the <strong>Topic</strong> list select the topic name to which you want to create a subscription.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>Select a plan and click <strong>Next</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong>. Your address is displayed in the EnMasse Console.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="replace-address-cli-messaging">4.3.6. Replacing addresses using the command line</h4>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Update an address definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: enmasse.io/v1beta1
kind: Address
metadata:
    name: myspace.myqueue
spec:
    address: myqueue
    type: queue
    plan: standard-xlarge-queue</code></pre>
</div>
</div>
</li>
<li>
<p>Replace the address:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">oc replace -f standard-xlarge-queue.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>List the addresses:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">oc get addresses -o yaml</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="assembly-using-console-messaging">4.4. Using the EnMasse Console</h3>
<div class="paragraph">
<p>You can use the EnMasse Console to perform tasks such as <a href="http://enmasse.io/documentation/master/openshift.html#proc-create-address-space-console-messaging">creating</a> and <a href="http://enmasse.io/documentation/master/openshift.html#proc-delete-address-space-console-messaging">deleting an address space</a>, <a href="http://enmasse.io/documentation/master/openshift.html#create-address-console-messaging">creating an address</a>, and <a href="http://enmasse.io/documentation/master/openshift.html#ref-view-message-connection-stats-table-messaging">viewing message and connection statistics</a>.</p>
</div>
<div class="sect3">
<h4 id="con-console-messaging">4.4.1. EnMasse Console user permissions</h4>
<div class="paragraph">
<p>EnMasse Console uses the <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cluster_administration/index#admin-guide-manage-rbac">OpenShift RBAC permissions model</a>.</p>
</div>
<div class="paragraph">
<p>To use EnMasse Console, the OpenShift user requires a role that grants access to <code>addressspace</code> and <code>address</code> resources. For example, for edit access, <code>create</code>, <code>update</code> and <code>delete</code> permissions need be to given to the associated role object, and for view-only access, <code>list</code> permissions need to be granted.</p>
</div>
<div class="paragraph">
<p>For more information about the EnMasse example roles, see <a href="http://enmasse.io/documentation/master/openshift.html#ref-example-roles-messaging">EnMasse example roles</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="logging-into-console-messaging">4.4.2. Accessing the EnMasse Console</h4>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>On OpenShift Container Platform 3.x, obtain the host name for the EnMasse Console by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get routes console -o jsonpath={.spec.host}</pre>
</div>
</div>
</li>
<li>
<p>On OpenShift Container Platform 4.x, obtain the host name for the EnMasse Console by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get consolelink -l app=enmasse -o jsonpath={.spec.href}</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In a web browser, navigate to <code>https://<em>console-host-name</em></code> where <code><em>console-host-name</em></code> is the EnMasse Console host name.</p>
</li>
<li>
<p>Log in with your OpenShift user credentials. The EnMasse Console opens and lists all the address spaces that you can administer. For information on creating an address space, see <a href="http://enmasse.io/documentation/master/openshift.html#proc-create-address-space-console-messaging">Creating an address space using the EnMasse Console</a>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/console-screenshot.png" alt="EnMasse Console">
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-view-message-connection-stats-table-messaging">4.4.3. Viewing message and application connection statistics using the EnMasse Console</h4>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must be logged into the EnMasse Console.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/console-screenshot-addr.png" alt="EnMasse Console">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Message statistics reference table</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">To view&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">On the Addresses page&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Address type</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>See the first icon in the second column, <strong>Type/plan</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Address plan</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>See the string that follows the icon in the second column, <strong>Type/plan</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Address status</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>See the third column, <strong>Status</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Messages received per second (computed over the last 5 minutes)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>See <strong>Messages In/sec</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Messages sent per second (computed over the last 5 minutes)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>See <strong>Messages Out/sec</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Queue and topic address types only: Number of stored messages on the broker or brokers</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Stored Messages</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Number of senders attached</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>See <strong>Senders</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Number of receivers attached</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>See <strong>Receivers</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Standard address space only: Message deliveries per second</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Click the desired address, which then shows the links page for that address; see the <strong>Delivery Rate</strong> column.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="images/console-screenshot-conns.png" alt="EnMasse Console">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Application connection statistics reference table</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">To view&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">On the Connections page&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Messages received per second (computed over the last 5 minutes)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>See <strong>Messages In/sec</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Standard address space only: Messages sent per second (computed over the last 5 minutes)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>See <strong>Messages Out/sec</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Total number of messages delivered</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Click the desired host name to show the list of senders and receivers; see the <strong>Deliveries</strong> column.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the brokered address space only, on the Connections page, the number of senders is either <code>0</code> or <code>1</code>. As soon as one or more senders exist, <code>1</code> is displayed rather than reflecting the actual number of senders.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="ref-view-endpoint-info-messaging">4.4.4. Viewing endpoint information using the EnMasse Console</h4>
<div class="paragraph">
<p>You can use the EnMasse Console to view information about the endpoints configured for a given address space. You need this information to connect your messaging application to EnMasse.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must be logged into the EnMasse Console. For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#logging-into-console-messaging">Accessing the EnMasse Console</a>.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/console-screenshot-endpoints.png" alt="EnMasse Console">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Messaging endpoint information reference table</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displays the name of the endpoint.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Type</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displays the type of endpoint. Valid values include:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>cluster</code></dt>
<dd>
<p>An endpoint accessible on the OpenShift cluster through a cluster IP address.</p>
</dd>
<dt class="hdlist1"><code>route</code></dt>
<dd>
<p>An OpenShift route available outside the cluster.</p>
</dd>
<dt class="hdlist1"><code>loadbalancer</code></dt>
<dd>
<p>A <code>LoadBalancer</code> service integrating with an external load balancer.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For more information, see the following OpenShift documentation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.openshift.com/container-platform/4.4/networking/routes/route-configuration.html">Route Configuration</a></p>
</li>
<li>
<p><a href="https://docs.openshift.com/container-platform/4.4/networking/configuring_ingress_cluster_traffic/configuring-ingress-cluster-traffic-load-balancer.html">Configuring ingress cluster traffic using a load balancer</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Host</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displays the host name of the endpoint.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ports</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displays the port protocol name and port number of the endpoint. Valid port names include:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>AMQP</code></dt>
<dd>
<p>Advance Messaging Queuing Protocol</p>
</dd>
<dt class="hdlist1"><code>AMQPS</code></dt>
<dd>
<p>Advance Messaging Queuing Protocol over TLS</p>
</dd>
<dt class="hdlist1"><code>AMQP-WS</code></dt>
<dd>
<p>AMQP-WebSocket protocol</p>
</dd>
<dt class="hdlist1"><code>AMQP-WSS</code></dt>
<dd>
<p>AMQP-WebSocket protocol over TLS</p>
</dd>
</dl>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="proc-purging-queues-messaging">4.4.5. Purging queues and subscriptions</h4>
<div class="paragraph">
<p>You can purge&#8212;&#8203;that is, clear all messages from&#8212;&#8203;a <code>queue</code> or <code>subscription</code> address type of its stored messages by using the EnMasse Console.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a queue or subscription that contains stored messages.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the EnMasse Console. For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#logging-into-console-messaging">Accessing the EnMasse Console</a>.</p>
</li>
<li>
<p>Navigate to the <strong>Addresses</strong> page.</p>
</li>
<li>
<p>Select the check box next to the queue or subscription that you want to purge.</p>
</li>
<li>
<p>At the top of the page, right-click the vertical ellipsis icon and select <strong>Purge</strong>. The queue or subscription is purged, and the <code>Stored</code> message count drops to zero for the selected queue or subscription.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-closing-connections_messaging">4.4.6. Closing connections using the EnMasse Console</h4>
<div class="paragraph">
<p>If an application has unexpectedly stopped processing messages, you can force the applications messaging connections to close using the EnMasse Console. This may be a useful way to return the application to service.</p>
</div>
<div class="paragraph">
<p>Be aware that closing a connection closes the applications connection to EnMasse. If the application is configured to do so, the application should reconnect automatically.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the EnMasse Console. For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#logging-into-console-messaging">Accessing the EnMasse Console</a>.</p>
</li>
<li>
<p>Navigate to the <strong>Connections</strong> page.</p>
</li>
<li>
<p>To close a single connection:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Locate the connection that you want to close.</p>
</li>
<li>
<p>In the far right column, click the vertical ellipsis icon and select <strong>Close</strong>.</p>
</li>
<li>
<p>When prompted, click <strong>Confirm</strong> to confirm that you want to close the connection. The connection is closed.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To close multiple connections in a single operation:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select the check box next to the connections that you want to close.</p>
</li>
<li>
<p>At the top of the page, right-click the vertical ellipsis icon and select <strong>Close Selected</strong>.</p>
</li>
<li>
<p>When prompted, click <strong>Confirm</strong> to confirm that you want to close the connections. The connections are closed.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="con-user-model-messaging">4.5. User model</h3>
<div class="paragraph">
<p>A messaging client connects using a MessagingUser. A MessagingUser specifies an authorization policy that controls which addresses may be used and the operations that may be performed on those addresses.</p>
</div>
<div class="paragraph">
<p>Users are configured as <code>MessagingUser</code> resources. Users can be created, deleted, read, updated, and listed.</p>
</div>
<div class="paragraph">
<p>The following example shows the <code>user-example1.yaml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: user.enmasse.io/v1beta1
kind: MessagingUser
metadata:
  name: myspace.user1
spec:
  username: user1
  authentication:
    type: password
    password: cGFzc3dvcmQ= # Base64 encoded
  authorization:
    - addresses: ["myqueue", "queue1", "queue2", "topic*"]
      operations: ["send", "recv"]
    - addresses: ["anycast1"]
      operations: ["send"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following fields are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>metadata.name</code></p>
</li>
<li>
<p><code>metadata.namespace</code></p>
</li>
<li>
<p><code>spec.authentication</code></p>
</li>
<li>
<p><code>spec.authorization</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>spec.authentication</code> object defines how the user is authenticated, whereas
<code>spec.authorization</code> defines the authorization policies for that user.</p>
</div>
<div class="sect3">
<h4 id="authentication_2">4.5.1. Authentication</h4>
<div class="paragraph">
<p>The supported values for the authentication type are <code>password</code> and <code>serviceaccount</code>. When using the <code>password</code> authentication type, you specify the username and password to be used by your messaging client when connecting. With the <code>serviceaccount</code> authentication type, you use the special string <code>@@serviceaccount@@</code> as the username, and a OpenShift service account token as the password.</p>
</div>
<div class="sect4">
<h5 id="password_authentication_type">Password authentication type</h5>
<div class="paragraph">
<p>For the <code>password</code> type, an additional field <code>password</code> must be set to a base64-encoded value of the
password for that user. The password will not be printed out when reading the resource.</p>
</div>
<div class="paragraph">
<p>A password can be base64-encoded on the command line. To encode <code>my-password</code>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ echo -n my-password | base64
bXktcGFzc3dvcmQ=</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="serviceaccount_authentication_type">Serviceaccount authentication type</h5>
<div class="paragraph">
<p>For the <code>serviceaccount</code> type, the <code>username</code> field must contain the OpenShift serviceaccount name that will be used to authenticate. When connecting with the messaging client, use the string <code>@@serviceaccount@@</code> as the username, and the service account token as the password.  The AMQP client used by the application must be configured to use the SASL mechanism type <code>PLAIN</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="authorization_2">4.5.2. Authorization</h4>
<div class="paragraph">
<p>In addition, authorization policies can be defined using operations and addresses. Valid operations
are <code>send</code>, <code>recv</code>, <code>view</code>, and <code>manage</code>.</p>
</div>
<div class="paragraph">
<p>The <code>manage</code> and <code>view</code> operations apply to all addresses in the address space.</p>
</div>
<div class="paragraph">
<p>In the <code>standard</code> address space, the asterisk wildcard can be used at the end of an address. The address <code>top*</code>
matches addresses <code>topic</code> and <code>topic/sub</code>.</p>
</div>
<div class="paragraph">
<p>In the <code>brokered</code> address space, the plus sign and asterisk wildcards can be used at the end of an address to match a single word (plus sign) or all words (asterisk) after the forward slash delimiter. So, the address <code>topic/+</code> matches
<code>topic/sub</code> but not <code>topic/s/sub</code>.  The address <code>topic/*</code> matches <code>topic/sub</code> and <code>topic/s/sub</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="managing-users-messaging">4.6. Managing users</h3>
<div class="paragraph">
<p>EnMasse user management is only supported when using the <code>standard</code> authentication service. On OpenShift, users can
be managed using the OpenShift command-line tools.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have already created an <a href="http://enmasse.io/documentation/master/openshift.html#con-address-space-messaging">address space</a>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="proc-creating-users-cli-messaging">4.6.1. Creating users using the command line</h4>
<div class="paragraph">
<p>In EnMasse users can be created using standard command-line tools.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have already created an <a href="http://enmasse.io/documentation/master/openshift.html#create-address-space-cli-messaging-gs">address space</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To correctly base64 encode a password for the user definition file, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">echo -n password | base64 #cGFzc3dvcmQ=</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Be sure to use the <code>-n</code> parameter when running this command. Not specifying that parameter will result in an improperly coded password and cause log-in issues.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the user definition to a file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: user.enmasse.io/v1beta1
kind: MessagingUser
metadata:
  name: myspace.user1
spec:
  username: user1
  authentication:
    type: password
    password: cGFzc3dvcmQ= # Base64 encoded
  authorization:
    - addresses: ["myqueue", "queue1", "queue2", "topic*"]
      operations: ["send", "recv"]
    - addresses: ["anycast1"]
      operations: ["send"]</code></pre>
</div>
</div>
</li>
<li>
<p>Create the user and associated user permissions:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create -f <em>user-example1.yaml</em></pre>
</div>
</div>
</li>
<li>
<p>Confirm that the user was created:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get messagingusers</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-deleting-users-cli-messaging">4.6.2. Deleting users using the command line</h4>
<div class="paragraph">
<p>Users can be deleted using standard command-line tools.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>An address space must have been created.</p>
</li>
<li>
<p>A user must have been created.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>List the current users:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get messagingusers</pre>
</div>
</div>
</li>
<li>
<p>Delete the desired user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc delete messaginguser <em>myspace.user1</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-managing-user-permissions-cli-messaging">4.6.3. Managing user permissions using the command line</h4>
<div class="paragraph">
<p>You can edit the permissions for an existing user using the command line.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have already created a user. For more information see <a href="http://enmasse.io/documentation/master/openshift.html#proc-creating-users-cli-messaging">Creating users using the command line</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Retrieve the user whose permissions you want to edit:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get messaginguser <em>myspace.user1</em> -o yaml > <em>user-example1.yaml</em></pre>
</div>
</div>
</li>
<li>
<p>Make the desired permissions change and save the file.</p>
</li>
<li>
<p>From the command line, run the following command to apply the change:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f <em>user-example1.yaml</em></pre>
</div>
</div>
<div class="paragraph">
<p>The new user permissions are applied.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-example-roles-tenant">4.7. EnMasse example roles</h3>
<div class="paragraph">
<p>EnMasse provides the following example roles that you can use directly or use as models to create your own roles.</p>
</div>
<div class="paragraph">
<p>For more information about service administrator resources, see the <a href="http://enmasse.io/documentation/master/openshift.html#ref-resources-table-service-admin-messaging">EnMasse service administrator resources table</a>.</p>
</div>
<div class="paragraph">
<p>For more information about messaging tenant resources, see the <a href="http://enmasse.io/documentation/master/openshift.html#ref-resources-table-messaging-tenant-messaging">EnMasse messaging tenant resources table</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. EnMasse example roles table</caption>
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>enmasse.io:tenant-view</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies <code>get</code> and <code>list</code> permissions for <code>addresses</code>, <code>addressspaces</code>, <code>addressspaceschemas</code>, and <code>messagingusers</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>enmasse.io:tenant-edit</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies <code>create</code>, <code>get</code>, <code>update</code>, <code>delete</code>, <code>list</code>, <code>watch</code>, and <code>patch</code> permissions for <code>addresses</code>, <code>addressspaces</code>, and <code>messagingusers</code>; <code>get</code> and <code>list</code> permissions for <code>addressspaceschemas</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>service-admin</code> cluster role</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies <code>create</code>, <code>get</code>, <code>update</code>, <code>delete</code>, <code>list</code>, <code>watch</code>, and <code>patch</code> permissions for <code>addressplans</code>, <code>addressspaceplans</code>, <code>brokeredinfraconfigs</code>, <code>standardinfraconfigs</code> and <code>authenticationservices</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="assembly-connecting-applications-messaging">4.8. Connecting applications to EnMasse</h3>
<div class="paragraph">
<p>You can connect your application to EnMasse using one of the following client examples.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#ref-python-example-messaging">Apache Qpid Proton Python</a></p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#ref-jms-example-messaging">Apache Qpid JMS</a></p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#ref-javascript-example-messaging">Rhea JavaScript Client</a></p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#ref-cpp-example-messaging">Apache Qpid Proton C++</a></p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#ref-dotnet-example-messaging">AMQP.Net Lite</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To connect to the messaging service from outside the OpenShift cluster, TLS must be used with SNI set to specify the fully qualified host name for the address space. The port used is 443.</p>
</div>
<div class="paragraph">
<p>The messaging protocols supported depends on the type of address space used. For more information about address space types, see  <a href="http://enmasse.io/documentation/master/openshift.html#con-address-space-messaging">Address space</a>.</p>
</div>
<div class="sect3">
<h4 id="proc-client-get-cer-messaging">4.8.1. Retrieving the self-signed CA certificate</h4>
<div class="paragraph">
<p>If you opted for the <code>selfsigned</code> certificate provider type in your <code>AddressSpace</code> endpoint configuration, the generated CA
that signed the <code>AddressSpace</code> server certificate is required when connecting to the messaging client application. You can retrieve the
certificate from the <code>AddressSpace</code> using the following procedure.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Using a self-signed certificate in production environments is not recommended.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a messaging tenant:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Retrieve the CA certificate from the <code>AddressSpace</code>.</p>
<div class="paragraph">
<p>This will give you a file containing the CA certificate, in PEM format.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspace <em>myspace</em> -n <em>namespace</em> -o jsonpath='{.status.caCert}{"\n"}' | base64 --decode &gt; ca.crt</pre>
</div>
</div>
</li>
<li>
<p>If a PKCS12 or JKS format trust store is required, use the following commands to generate one:</p>
<div class="paragraph">
<p>For PKS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">keytool -import -trustcacerts -alias root -file ca.crt -storetype pkcs12 -keystore ca.pkcs12 -storepass <em>password</em> -noprompt</pre>
</div>
</div>
<div class="paragraph">
<p>For JKS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">keytool -import -trustcacerts -alias root -file ca.crt -storetype jks -keystore ca.jsk -storepass <em>password</em> -noprompt</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="client-examples-messaging">4.8.2. Client examples</h4>
<div class="sect4">
<h5 id="ref-python-example-messaging">Apache Qpid Proton Python example</h5>
<div class="paragraph">
<p>You can use the following Apache Qpid Proton Python example to connect your application to EnMasse. This example assumes you have created an address of type <code>queue</code> named <code>myqueue</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-python hljs" data-lang="python">from __future__ import print_function, unicode_literals
from proton import Message
from proton.handlers import MessagingHandler
from proton.reactor import Container

class HelloWorld(MessagingHandler):
    def __init__(self, server, address):
        super(HelloWorld, self).__init__()
        self.server = server
        self.address = address

    def on_start(self, event):
        conn = event.container.connect(self.server)
        event.container.create_receiver(conn, self.address)
        event.container.create_sender(conn, self.address)

    def on_sendable(self, event):
        event.sender.send(Message(body="Hello World!"))
        event.sender.close()

    def on_message(self, event):
        print(event.message.body)
        event.connection.close()

Container(HelloWorld("amqps://_messaging-route-hostname_:443", "myqueue")).run()</code></pre>
</div>
</div>
<div class="sect5">
<h6 id="known_issue_with_creating_a_subscriber_on_a_hierarchical_topic_3">Known issue with creating a subscriber on a hierarchical topic</h6>
<div class="paragraph">
<p>A known issue exists where creating a subscriber on a hierarchical topic in EnMasse causes the broker to instead create it as a competing consumer (handling the address like a queue rather than a topic).</p>
</div>
<div class="paragraph">
<p>The workaround for this issue involves setting the capability <code>"topic"</code> in the source.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the <code>simple_recv.py</code> file, modify the <code>from proton.reactor import Container</code> to add the <code>ReceiverOption</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-python hljs" data-lang="python">class CapabilityOptions(ReceiverOption):
    def apply(self, receiver):
        receiver.source.capabilities.put_object(symbol("topic"))</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify the following line to add <code>options=CapabilityOptions()</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-python hljs" data-lang="python">def on_start(self, event):
        event.container.create_receiver(conn, self.address, options=CapabilityOptions())</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-jms-example-messaging">Apache Qpid JMS example</h5>
<div class="paragraph">
<p>You can use the following Apache Qpid JMS example to connect your application to EnMasse. This example assumes you have created an address of type <code>queue</code> named <code>myqueue</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-java hljs" data-lang="java">package org.apache.qpid.jms.example;

import javax.jms.Connection;
import javax.jms.ConnectionFactory;
import javax.jms.DeliveryMode;
import javax.jms.Destination;
import javax.jms.ExceptionListener;
import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.MessageConsumer;
import javax.jms.MessageProducer;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.naming.Context;
import javax.naming.InitialContext;

public class HelloWorld {
    public static void main(String[] args) throws Exception {
        try {
            // The configuration for the Qpid InitialContextFactory has been supplied in
            // a jndi.properties file in the classpath, which results in it being picked
            // up automatically by the InitialContext constructor.
            Context context = new InitialContext();

            ConnectionFactory factory = (ConnectionFactory) context.lookup("myFactoryLookup");
            Destination queue = (Destination) context.lookup("myQueueLookup");

            Connection connection = factory.createConnection(System.getProperty("USER"), System.getProperty("PASSWORD"));
            connection.setExceptionListener(new MyExceptionListener());
            connection.start();

            Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

            MessageProducer messageProducer = session.createProducer(queue);
            MessageConsumer messageConsumer = session.createConsumer(queue);

            TextMessage message = session.createTextMessage("Hello world!");
            messageProducer.send(message, DeliveryMode.NON_PERSISTENT, Message.DEFAULT_PRIORITY, Message.DEFAULT_TIME_TO_LIVE);
            TextMessage receivedMessage = (TextMessage) messageConsumer.receive(2000L);

            if (receivedMessage != null) {
                System.out.println(receivedMessage.getText());
            } else {
                System.out.println("No message received within the given timeout!");
            }

            connection.close();
        } catch (Exception exp) {
            System.out.println("Caught exception, exiting.");
            exp.printStackTrace(System.out);
            System.exit(1);
        }
    }

    private static class MyExceptionListener implements ExceptionListener {
        @Override
        public void onException(JMSException exception) {
            System.out.println("Connection ExceptionListener fired, exiting.");
            exception.printStackTrace(System.out);
            System.exit(1);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>with jndi.properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>connectionfactory.myFactoryLookup = amqps://<em>messaging-route-hostname</em>:443?transport.trustAll=true&amp;transport.verifyHost=false
queue.myQueueLookup = myqueue</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-javascript-example-messaging">Rhea JavaScript Client example</h5>
<div class="paragraph">
<p>You can use the following Rhea JavaScript Client example to connect your application to EnMasse. This example assumes you have created an address of type <code>queue</code> named <code>myqueue</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-javascript hljs" data-lang="javascript">var container = require('rhea');
container.on('connection_open', function (context) {
    context.connection.open_receiver('myqueue');
    context.connection.open_sender('myqueue');
});
container.on('message', function (context) {
    console.log(context.message.body);
    context.connection.close();
});
container.on('sendable', function (context) {
    context.sender.send({body:'Hello World!'});
    context.sender.detach();
});
container.connect({username: '<em>username</em>', password: '<em>password</em>', port:443, host:'<em>messaging-route-hostname</em>', transport:'tls', rejectUnauthorized:false});</code></pre>
</div>
</div>
<div class="sect5">
<h6 id="rhea_javascript_client_example_using_websockets">Rhea JavaScript Client example using WebSockets</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-javascript hljs" data-lang="javascript">var container = require('rhea');
var WebSocket = require('ws');

container.on('connection_open', function (context) {
    context.connection.open_receiver('myqueue');
    context.connection.open_sender('myqueue');
});
container.on('message', function (context) {
    console.log(context.message.body);
    context.connection.close();
});
container.on('sendable', function (context) {
    context.sender.send({body:'Hello World!'});
    context.sender.detach();
});

var ws = container.websocket_connect(WebSocket);
container.connect({username: '<em>username</em>', password: '<em>password</em>', connection_details: ws("wss://<em>messaging-route-hostname</em>:443", ["binary"], {rejectUnauthorized: false})});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-cpp-example-messaging">Apache Qpid Proton C++ example</h5>
<div class="paragraph">
<p>The C++ client has equivalent <code>simple_recv</code> and <code>simple_send</code> examples with the same options as Python. However, the C++ library does not perform the same level of processing on the URL; in particular it will not accept <code>amqps://</code> to imply using TLS, so the example needs to be modified as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-cpp hljs" data-lang="cpp">#include &lt;proton/connection.hpp&gt;
#include &lt;proton/container.hpp&gt;
#include &lt;proton/default_container.hpp&gt;
#include &lt;proton/delivery.hpp&gt;
#include &lt;proton/message.hpp&gt;
#include &lt;proton/messaging_handler.hpp&gt;
#include &lt;proton/ssl.hpp&gt;
#include &lt;proton/thread_safe.hpp&gt;
#include &lt;proton/tracker.hpp&gt;
#include &lt;proton/url.hpp&gt;

#include &lt;iostream&gt;

#include "fake_cpp11.hpp"

class hello_world : public proton::messaging_handler {
  private:
    proton::url url;

  public:
    hello_world(const std::string&amp; u) : url(u) {}

    void on_container_start(proton::container&amp; c) OVERRIDE {
        proton::connection_options co;
        co.ssl_client_options(proton::ssl_client_options());
        c.client_connection_options(co);
        c.connect(url);
    }

    void on_connection_open(proton::connection&amp; c) OVERRIDE {
        c.open_receiver(url.path());
        c.open_sender(url.path());
    }

    void on_sendable(proton::sender &amp;s) OVERRIDE {
        proton::message m("Hello World!");
        s.send(m);
        s.close();
    }

    void on_message(proton::delivery &amp;d, proton::message &amp;m) OVERRIDE {
        std::cout &lt;&lt; m.body() &lt;&lt; std::endl;
        d.connection().close();
    }
};

int main(int argc, char **argv) {
    try {
        std::string url = argc &gt; 1 ? argv[1] : "<em>messaging-route-hostname</em>:443/myqueue";

        hello_world hw(url);
        proton::default_container(hw).run();

        return 0;
    } catch (const std::exception&amp; e) {
        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;
    }

    return 1;
}</code></pre>
</div>
</div>
<div class="sect5">
<h6 id="known_issue_with_creating_a_subscriber_on_a_hierarchical_topic_4">Known issue with creating a subscriber on a hierarchical topic</h6>
<div class="paragraph">
<p>A known issue exists where creating a subscriber on a hierarchical topic in EnMasse causes the broker to instead create it as a competing consumer (handling the address like a queue rather than a topic).</p>
</div>
<div class="paragraph">
<p>The workaround involves setting the capability <code>"topic"</code> in the source.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>In the <code>topic_receive.cpp</code> file, edit the code so that it is similar to what is shown in this example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-cpp hljs" data-lang="cpp">void on_container_start(proton::container&amp; cont) override {
        proton::connection conn = cont.connect(conn_url_);
        proton::receiver_options opts {};
        proton::source_options sopts {};

        sopts.capabilities(std::vector&lt;proton::symbol&gt; { "topic" });
        opts.source(sopts);

        conn.open_receiver(address_, opts);
    }</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-dotnet-example-messaging">AMQP.Net Lite example</h5>
<div class="paragraph">
<p>You can use the following AMQP.Net Lite example to connect your application to EnMasse. This example assumes you have created an address of type <code>queue</code> named <code>myqueue</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-csharp hljs" data-lang="csharp">using System;
using Amqp;

namespace Test
{
    public class Program
    {
        public static void Main(string[] args)
        {
            String url = (args.Length &gt; 0) ? args[0] : "amqps://<em>messaging-route-hostname</em>:443";
            String address = (args.Length &gt; 1) ? args[1] : "myqueue";

            Connection.DisableServerCertValidation = true;
            Connection connection = new Connection(new Address(url));
            Session session = new Session(connection);
            SenderLink sender = new SenderLink(session, "test-sender", address);

            Message messageSent = new Message("Test Message");
            sender.Send(messageSent);

            ReceiverLink receiver = new ReceiverLink(session, "test-receiver", address);
            Message messageReceived = receiver.Receive(TimeSpan.FromSeconds(2));
            Console.WriteLine(messageReceived.Body);
            receiver.Accept(messageReceived);

            sender.Close();
            receiver.Close();
            session.Close();
            connection.Close();
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="iot-guide-messaging-iot">5. Internet of Things (IoT) guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The IoT guide provides resources on how to set up and manage EnMasse IoT features.</p>
</div>
<div class="sect2">
<h3 id="iot-getting-started-messaging-iot-iot">5.1. Getting started using IoT</h3>
<div class="paragraph">
<p>The following information describes how to set up and manage EnMasse IoT features.</p>
</div>
<div class="sect3">
<h4 id="con-iot-connectivity-messaging-iot-iot">5.1.1. IoT connectivity concepts</h4>
<div class="paragraph">
<p>The Internet of Things (IoT) connectivity feature enables EnMasse to be used for managing and connecting devices with back-end applications. In a typical IoT application, devices have different requirements than ordinary messaging applications. Instead of using arbitrary addresses and security
configurations that are typically available, developers can use the IoT services to handle device identities and security configurations explicitly, support multiple protocols often used in the IoT space, and provide
uniform support for expected device communication patterns.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/enmasse_iot_view.png" alt="IoT connectivity">
</div>
</div>
<div class="paragraph">
<p>One of the key concepts is a <em>device registry</em>, which developers use to register devices and provide their credentials. With these credentials, devices can then connect to <em>protocol adapters</em>
using one of the supported protocols: HTTP, MQTT, LoRaWAN, and SigFox. Once connected, devices can send and receive messages from back-end applications using one of the following messaging semantics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Telemetry: Allows devices to send non-durable data to back-end applications, so messages are sent using the <code>multicast</code> address type. This option is best for sending non-critical sensor readings.</p>
</li>
<li>
<p>Events:  Allows devices to send durable data to the back-end applications, so messages are sent using the <code>queue</code> address type. This option is best for sending more important device data such as alerts and notifications.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Back-end applications can also send <strong>Command</strong> messages to devices. Commands can be used to trigger actions on devices. Examples include updating a configuration property, installing a software component, or switching the state of an actuator.</p>
</div>
</div>
<div class="sect3">
<h4 id="installing-using-bundle-messaging-iot-iot">5.1.2. Installing EnMasse using a YAML bundle</h4>
<div class="paragraph">
<p>The simplest way to install EnMasse is to use the predefined YAML bundles.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a user with <code>cluster-admin</code> privileges:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>(Optional) If you want to deploy to a project other than <code>enmasse-infra</code> you must run the following command and substitute <code>enmasse-infra</code> in subsequent steps:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">sed -i 's/enmasse-infra/<em>my-project</em>/' install/bundles/enmasse/*.yaml</pre>
</div>
</div>
</li>
<li>
<p>Create the project where you want to deploy EnMasse:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc new-project <em>enmasse-infra</em></pre>
</div>
</div>
</li>
<li>
<p>Change the directory to the location of the downloaded release files.</p>
</li>
<li>
<p>Deploy using the <code>enmasse</code> bundle:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/bundles/enmasse</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the example plans and infrastructure configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/example-plans</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the example roles:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/example-roles</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the <code>standard</code> authentication service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/example-authservices/standard-authservice.yaml</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Install the Service Catalog integration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/service-broker
oc apply -f install/components/cluster-service-broker</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="iot-installing-services-messaging-iot-iot">5.1.3. Installing IoT services</h4>
<div class="paragraph">
<p>To get started using the IoT feature on EnMasse, you must first install the IoT services.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>(Optional) If you want to deploy to a project other than <code>enmasse-infra</code> you must run the following command and substitute <code>enmasse-infra</code> in subsequent steps:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">sed -i 's/enmasse-infra/<em>my-project</em>/' install/preview-bundles/iot/*.yaml</pre>
</div>
</div>
</li>
<li>
<p>Deploy the IoT bundles:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/preview-bundles/iot</pre>
</div>
</div>
</li>
<li>
<p>Create certificates for the MQTT protocol adapter. For testing purposes, you can create a self-signed certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">./install/components/iot/examples/k8s-tls/create
oc create secret tls iot-mqtt-adapter-tls --key=install/components/iot/examples/k8s-tls/build/iot-mqtt-adapter-key.pem --cert=install/components/iot/examples/k8s-tls/build/iot-mqtt-adapter-fullchain.pem</pre>
</div>
</div>
<div class="paragraph">
<p>You can override the namespace to which the <code>deploy</code> script installs the keys and certificates by
setting the environment variable <code>NAMESPACE</code> when calling the script. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">NAMESPACE=my-namespace ./install/components/iot/examples/k8s-tls/deploy</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If your cluster is not running on <code>localhost</code>, you need to specify the cluster host name when creating certificates to allow external clients (like MQTT) to properly connect to the appropriate services. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">CLUSTER=x.x.x.x.nip.io install/components/iot/examples/k8s-tls/create</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>(Optional) Install the PostgreSQL server and create database:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/iot/examples/postgresql/deploy</pre>
</div>
</div>
<div class="paragraph">
<p>You may skip this step if you already have a PostgreSQL instance and
created a database with a user to access to it.</p>
</div>
</li>
<li>
<p>Apply database schema:</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You will need to execute the following SQL files on the database instance
you created. Depenending on your setup, this may require database admin privileges:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>install/components/iot/examples/postgresql/create.sql</code></p>
</li>
<li>
<p><code>install/components/iot/examples/postgresql/create.devcon.sql</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can execute the SQL file using the <code>psql</code> command, connected to
your database. The following shows an example, how to execute <code>psql</code>
from inside the container, when you installed PostgreSQL as described
in the previous step:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc exec -ti deployment/postgresql -- bash -c "PGPASSWORD=user12 psql device-registry registry" &lt; install/components/iot/examples/postgresql/create.sql
oc exec -ti deployment/postgresql -- bash -c "PGPASSWORD=user12 psql device-registry registry" &lt; install/components/iot/examples/postgresql/create.devcon.sql</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Install an example IoT infrastructure configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/iot/examples/iot-config.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="iot-creating-project-messaging-iot-iot">5.1.4. Creating an IoT project</h4>
<div class="paragraph">
<p>After installing the IoT services, you create an IoT project.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-installing-services-messaging-iot-iot">The IoT services are installed</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in as a messaging tenant:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc login -u developer</pre>
</div>
</div>
</li>
<li>
<p>Create a <em>managed</em> IoT project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc new-project myapp
oc create -f install/components/iot/examples/iot-project-managed.yaml</pre>
</div>
</div>
</li>
<li>
<p>Wait for the resources to be ready:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspace iot
oc get iotproject iot</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Make sure that the <code>Phase</code> field shows <code>Ready</code> status for both resources.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a messaging consumer user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create -f install/components/iot/examples/iot-user.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="assembly-iot-creating-device-messaging-iot-iot">5.1.5. Creating an IoT device</h4>
<div class="paragraph">
<p>After installing the IoT services and creating an IoT project, you can create an IoT device for the device you want to monitor.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-installing-services-messaging-iot-iot">The IoT services are installed</a>.</p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-creating-project-messaging-iot-iot">An IoT project is created</a>.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="proc-iot-register-new-device-messaging-iot-iot">Registering a new device</h5>
<div class="paragraph">
<p>To create a new device, you must first register the device.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Export the device registry host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">export REGISTRY_HOST=$(oc -n enmasse-infra get routes device-registry --template='{{ .spec.host }}')</pre>
</div>
</div>
</li>
<li>
<p>Export the device registry access token:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">export TOKEN=$(oc whoami --show-token)</pre>
</div>
</div>
<div class="paragraph">
<p>This token is used to authenticate against the device registry management API.</p>
</div>
</li>
<li>
<p>Register a device with a defined ID (this example uses <code>4711</code>):</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl --insecure -X POST -i -H 'Content-Type: application/json' -H "Authorization: Bearer ${TOKEN}" https://$REGISTRY_HOST/v1/devices/myapp.iot/4711</pre>
</div>
</div>
</li>
<li>
<p>(Optional) If you need to provide additional registration information, do so as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl --insecure -X POST -i -H 'Content-Type: application/json' -H "Authorization: Bearer ${TOKEN}" --data-binary '{
	"via": ["gateway1"]
}' https://$REGISTRY_HOST/v1/devices/myapp.iot/4711</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="proc-iot-set-username-password-device-messaging-iot-iot">Setting user name and password credentials for a device</h5>
<div class="paragraph">
<p>After registering a new device, you must set the user name and password credentials for the device.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Add the credentials for a device:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl --insecure -X PUT -i -H 'Content-Type: application/json' -H "Authorization: Bearer ${TOKEN}" --data-binary '[{
	"type": "hashed-password",
	"auth-id": "<em>sensor1</em>",
	"secrets": [{
		"pwd-plain":"'hono-secret'"
	}]
}]' https://$REGISTRY_HOST/v1/credentials/myapp.iot/4711</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="proc-iot-installing-cli-messaging-iot-iot">5.1.6. Installing the Eclipse Hono command-line client</h4>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-installing-services-messaging-iot-iot">The IoT services are installed</a>.</p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-creating-project-messaging-iot-iot">An IoT project is created</a>.</p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#assembly-iot-creating-device-messaging-iot-iot">An IoT device is created</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the <a href="https://www.eclipse.org/hono/downloads/">Eclipse Hono command-line client</a>.</p>
</li>
<li>
<p>Obtain the messaging endpoint certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc -n myapp get addressspace iot -o jsonpath={.status.caCert} | base64 --decode > tls.crt</pre>
</div>
</div>
</li>
<li>
<p>Export the messaging endpoint host and port:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">export MESSAGING_HOST=$(oc get -n myapp addressspace iot -o jsonpath='{.status.endpointStatuses[?(@.name=="messaging")].externalHost}')
export MESSAGING_PORT=443</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-iot-starting-telemetry-consumer-messaging-iot-iot">5.1.7. Starting the telemetry consumer</h4>
<div class="paragraph">
<p>You can send telemetry data such as sensor readings, for example, from a device to the cloud. To do this, you must first start the telemetry consumer by running the customer application.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run the customer application to receive telemetry:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">java -jar hono-cli-*-exec.jar --hono.client.host=$MESSAGING_HOST --hono.client.port=$MESSAGING_PORT --hono.client.username=consumer --hono.client.password=foobar --tenant.id=myapp.iot --hono.client.trustStorePath=tls.crt --message.type=telemetry</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-iot-sending-telemetry-http-messaging-iot-iot">5.1.8. Sending telemetry using HTTP</h4>
<div class="paragraph">
<p>You can send telemetry from a device to the cloud using the HTTP protocol.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Send telemetry using the HTTP protocol:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl --insecure -X POST -i -u sensor1@myapp.iot:hono-secret -H 'Content-Type: application/json' --data-binary '{"temp": 5}' https://$(oc -n enmasse-infra get routes iot-http-adapter --template='{{ .spec.host }}')/telemetry</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="iot-service-admin-messaging-iot-iot-iot">5.2. IoT for service administrators</h3>
<div class="paragraph">
<p>Service administrators typically install and configure the Internet of Things (IoT) services for EnMasse.</p>
</div>
<div class="sect3">
<h4 id="con-iot-monitoring-messaging-iot-iot-iot">5.2.1. IoT monitoring</h4>
<div class="paragraph">
<p>Deploying EnMasse monitoring also allows you to monitor the IoT-related components of EnMasse. No additional configuration is required.</p>
</div>
<div class="paragraph">
<p>For more information about EnMasse monitoring, see <a href="http://enmasse.io/documentation/master/openshift.html#monitoring-messaging">Monitoring EnMasse</a>.</p>
</div>
<div class="paragraph">
<p>For detailed information about the available metrics specific to IoT, see <a href="http://enmasse.io/documentation/master/openshift.html#ref-iot-metrics-messaging-iot-iot-iot">IoT-specific metrics</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="con-iot-logging-messaging-iot-iot-iot">5.2.2. IoT logging</h4>
<div class="paragraph">
<p>By default, the IoT components of EnMasse use a conservative
logging configuration for the infrastructure services to
preserve resources for normal operation.</p>
</div>
<div class="paragraph">
<p>EnMasse also allows operation-level tracing using Jaeger,
for more in-depth tracing scenarios.</p>
</div>
<div class="sect4">
<h5 id="configuration_options">Configuration options</h5>
<div class="paragraph">
<p>For IoT components, it might be necessary to increase the logging output at
the following application
levels, listed in order from lowest priority to highest priority:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A default log level for all IoT components</p>
</li>
<li>
<p>A default configuration for specific log channels</p>
</li>
<li>
<p>A service specific default log level</p>
</li>
<li>
<p>A service specific configuration for specific log channels</p>
</li>
<li>
<p>A service specific custom log configuration file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All configuration is part of the <code>IoTConfig</code> instance and the EnMasse Operator applies the configuration to the services.
The only exception is the service specific
log configuration file, which can either be provided through the <code>IoTConfig</code> resource
or by creating an entry in the service specific <code>ConfigMap</code> resource.</p>
</div>
</div>
<div class="sect4">
<h5 id="log_levels">Log levels</h5>
<div class="paragraph">
<p>The following log levels are available, listed in order from most severe to least severe:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">error</dt>
<dd>
<p>Error conditions. Indicates an unexpected condition, which may impact the stability of the system. Displays only error messages.</p>
</dd>
<dt class="hdlist1">warn</dt>
<dd>
<p>Warning conditions. Indicates an expected condition, which may impact the current operation or stability of the system. Displays only warning and error messages.</p>
</dd>
<dt class="hdlist1">info</dt>
<dd>
<p>Informational messages. Indicates an expected event, which may impact the current operation. Displays only informational, warning, and error messages.</p>
</dd>
<dt class="hdlist1">debug</dt>
<dd>
<p>Displays debug messages, in addition to all of the above.</p>
</dd>
<dt class="hdlist1">trace</dt>
<dd>
<p>Displays all messages.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="con-iot-tracing-messaging-iot-iot-iot">5.2.3. IoT tracing</h4>
<div class="paragraph">
<p>EnMasse allows application-level tracing in the IoT infrastructure
using Jaeger. This feature allows service administrators to gain insight into the
inner workings of the IoT services to analyze system performance and issues.</p>
</div>
<div class="paragraph">
<p>By default, tracing support is not enabled and needs to be activated manually. For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#proc-iot-tracing-messaging-iot-iot-iot">Configuring tracing</a>.</p>
</div>
<div class="paragraph">
<p>For more information about Jaeger tracing, see: <a href="https://www.jaegertracing.io/" class="bare">https://www.jaegertracing.io/</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="con-iot-service-registry-messaging-iot-iot-iot">5.2.4. Device registry</h4>
<div class="paragraph">
<p>The IoT components of EnMasse store all device related information in a service called
"device registry". This makes the device registry an important component of the overall IoT
functionality, so it might be necessary to tweak the configuration of the device registry.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Although the device registry storage backend can be configured in different ways, once the
configuration has been made, and IoT tenants have been created, the storage configuration
must not be change. Otherwise this may result in the loss of data, in data inconsistencies,
or other kinds of unexpected behavior.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The configuration of the device registry can be changed by editing the global <code>IoTConfig</code>
custom resource object. Any changes made to this custom resource, will be applied by the
EnMasse operator.</p>
</div>
<div class="paragraph">
<p>The database backed device registry, named "JDBC", can be configured to either use an
existing, "external", database.</p>
</div>
<div class="paragraph">
<p>By default only PostgreSQL is supported. However it is possible to extend the installation,
by providing custom JDBC drivers and custom SQL statements to the configuration. This allows
to integrate with database, other than PostgreSQL.</p>
</div>
</div>
<div class="sect3">
<h4 id="iot-installing-services-messaging-iot-iot-iot">5.2.5. Installing IoT services</h4>
<div class="paragraph">
<p>To get started using the IoT feature on EnMasse, you must first install the IoT services.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>(Optional) If you want to deploy to a project other than <code>enmasse-infra</code> you must run the following command and substitute <code>enmasse-infra</code> in subsequent steps:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">sed -i 's/enmasse-infra/<em>my-project</em>/' install/preview-bundles/iot/*.yaml</pre>
</div>
</div>
</li>
<li>
<p>Deploy the IoT bundles:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/preview-bundles/iot</pre>
</div>
</div>
</li>
<li>
<p>Create certificates for the MQTT protocol adapter. For testing purposes, you can create a self-signed certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">./install/components/iot/examples/k8s-tls/create
oc create secret tls iot-mqtt-adapter-tls --key=install/components/iot/examples/k8s-tls/build/iot-mqtt-adapter-key.pem --cert=install/components/iot/examples/k8s-tls/build/iot-mqtt-adapter-fullchain.pem</pre>
</div>
</div>
<div class="paragraph">
<p>You can override the namespace to which the <code>deploy</code> script installs the keys and certificates by
setting the environment variable <code>NAMESPACE</code> when calling the script. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">NAMESPACE=my-namespace ./install/components/iot/examples/k8s-tls/deploy</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If your cluster is not running on <code>localhost</code>, you need to specify the cluster host name when creating certificates to allow external clients (like MQTT) to properly connect to the appropriate services. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">CLUSTER=x.x.x.x.nip.io install/components/iot/examples/k8s-tls/create</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>(Optional) Install the PostgreSQL server and create database:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/iot/examples/postgresql/deploy</pre>
</div>
</div>
<div class="paragraph">
<p>You may skip this step if you already have a PostgreSQL instance and
created a database with a user to access to it.</p>
</div>
</li>
<li>
<p>Apply database schema:</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You will need to execute the following SQL files on the database instance
you created. Depenending on your setup, this may require database admin privileges:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>install/components/iot/examples/postgresql/create.sql</code></p>
</li>
<li>
<p><code>install/components/iot/examples/postgresql/create.devcon.sql</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can execute the SQL file using the <code>psql</code> command, connected to
your database. The following shows an example, how to execute <code>psql</code>
from inside the container, when you installed PostgreSQL as described
in the previous step:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc exec -ti deployment/postgresql -- bash -c "PGPASSWORD=user12 psql device-registry registry" &lt; install/components/iot/examples/postgresql/create.sql
oc exec -ti deployment/postgresql -- bash -c "PGPASSWORD=user12 psql device-registry registry" &lt; install/components/iot/examples/postgresql/create.devcon.sql</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Install an example IoT infrastructure configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc apply -f install/components/iot/examples/iot-config.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-iot-service-registry-jdbc-messaging-iot-iot-iot">5.2.6. Deploy JDBC external device registry</h4>
<div class="paragraph">
<p>Using an external database requires you to create a database instance and
create the required tables and indices.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Although it should technically be possible to use any database which provides
a JDBC driver and support SQL, at the moment, only PostgreSQL is supported by
EnMasse. Unless explicitly mentioned, this documentation will assume
your are using PostgreSQL. If you do not, then you might need to adapter provided
commands, and SQL statements.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In order to set up a JDBC based device registry, you need to perform
the following steps:</p>
</div>
<div class="sect4">
<h5 id="choose_a_data_storage_model">Choose a data storage model</h5>
<div class="paragraph">
<p>The JDBC based device registry supports the following data models:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Flat JSON</p>
</li>
<li>
<p>Hierarchical JSON</p>
</li>
<li>
<p>Plain tables</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The JSON based data models require no locking or foreign keys. However they
do rely on PostgreSQL support for JSONB. The flat JSON model is more flexible
when it comes to storing different types of credentials. The hierarchical JSON
model has better performance over the flat JSON model, but requires dedicated
indices for each credentials type in order to achieve this performance.</p>
</div>
<div class="paragraph">
<p>The plain table model does not require any JSON specific database support, but
require multiple tables, linked with foreign keys, and will need support for
locking when making changes. On the other side it will have better read
performance in most cases.</p>
</div>
<div class="paragraph">
<p>The default choice is the hierarchical JSON model.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is not possible to change the data model later on without loosing all data
or manual data migration.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="create_a_database_instance">Create a database instance</h5>
<div class="paragraph">
<p>First you need to create a database instance. It is recommended that you also
create at least two types of users. One for administrating the database and
one for accessing the device registry specific tables. In the following sections
the former user is assumed to be named "admin", and the latter "registry".</p>
</div>
</div>
<div class="sect4">
<h5 id="deploy_the_sql_schema_to_the_database_instance">Deploy the SQL schema to the database instance</h5>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Created a database instance</p>
</li>
<li>
<p>Have access credentials for the "admin" database user</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Connect to your database instance using the admin user</p>
</li>
<li>
<p>Review and deploy the SQL schema <code>templates/iot/examples/postgresql/create.sql</code></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="configure_the_iot_infrastructure">Configure the IoT infrastructure</h5>
<div class="paragraph">
<p>In order to enable the external JDBC device registry implementation, you will
need to configure the section <code>.spec.services.deviceRegistry.jdbc.server.external</code>,
and provide the chosen data model, database connection information and access credentials.</p>
</div>
<div class="paragraph">
<p>For an example see <a href="http://enmasse.io/documentation/master/openshift.html#iot-registry-example-registry-jdbc-messaging-iot-iot-iot">Configuration for JDBC with external PostgreSQL</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="proc-iot-logging-messaging-iot-iot-iot">5.2.7. Configuring logging</h4>
<div class="paragraph">
<p>If the default logging settings are not sufficient, the following
sections describe different methods for configuring the logging system.</p>
</div>
<div class="sect4">
<h5 id="configuring_global_log_levels">Configuring global log levels</h5>
<div class="paragraph">
<p>The global logging configuration is applied to all
services that do not have any explicit logging configuration.</p>
</div>
<div class="paragraph">
<p>By default, the global log level is <code>info</code>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-installing-services-messaging-iot-iot-iot">The IoT services are installed</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>IoTConfig</code> instance named <code>default</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc edit iotconfig default</pre>
</div>
</div>
</li>
<li>
<p>Configure the logging options, save and exit the editor:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: iot.enmasse.io/v1alpha1
kind: IoTConfig
metadata:
  namespace: enmasse-infra
  name: default
spec:
  logging:
    level: info <i class="conum" data-value="1"></i><b>(1)</b>
    loggers: <i class="conum" data-value="2"></i><b>(2)</b>
      io.enmasse: debug <i class="conum" data-value="3"></i><b>(3)</b>
      io.netty: error <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The default global log level. If omitted, <code>info</code> is used.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The section for log channel specific entries.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Lowers the filtering to <code>debug</code> level for messages in the channel <code>io.enmasse</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Raises the filtering to <code>error</code> level for messages in the channel <code>io.netty</code>.</td>
</tr>
</table>
</div>
</li>
<li>
<p>The operator applies the logging configuration and re-deploys all
required components.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the example above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An <code>info</code> message for the logger <code>org.eclipse.hono</code> would be logged because the logger does not match any explicit configuration and the global default is <code>info</code>.</p>
</li>
<li>
<p>An <code>info</code> message for the logger <code>io.enmasse</code> would be logged because the configuration for <code>io.enmasse</code> is <code>debug</code> and the <code>info</code> message is of higher severity.</p>
</li>
<li>
<p>A <code>warn</code> message for the logger <code>io.netty</code> would be dropped
because the configuration for <code>io.netty</code> is set to only display <code>error</code> messages.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="configuring_application_specific_log_levels">Configuring application-specific log levels</h5>
<div class="paragraph">
<p>To override the global defaults, you can configure
logging specifically for an IoT service.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-installing-services-messaging-iot-iot-iot">The IoT services are installed</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>IoTConfig</code> instance named <code>default</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc edit iotconfig default</pre>
</div>
</div>
</li>
<li>
<p>Configure the logging options, save and exit the editor:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: iot.enmasse.io/v1alpha1
kind: IoTConfig
metadata:
  namespace: enmasse-infra
  name: default
spec:
  adapters:
    mqtt:
      containers:
        adapter:
          logback:
            level: info <i class="conum" data-value="1"></i><b>(1)</b>
            loggers: <i class="conum" data-value="2"></i><b>(2)</b>
              io.enmasse: debug <i class="conum" data-value="3"></i><b>(3)</b>
              io.netty: error <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The application global log level. If omitted, the default global level is used.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The section for log channel specific entries. If omitted and the
application global log level is also omitted, the
default log channel configuration of the infrastructure
is used. If the application global log level
is set, it is considered an empty set, and no log channel
specific configuration is applied.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Lowers the filtering to <code>debug</code> level for messages in the channel <code>io.enmasse</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Raises the filtering to <code>error</code> level for messages in the channel <code>io.netty</code>.</td>
</tr>
</table>
</div>
</li>
<li>
<p>The operator applies the logging configuration and re-deploys all
required components.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="applying_a_custom_logback_specific_configuration">Applying a custom logback specific configuration</h5>
<div class="paragraph">
<p>For containers running applications using the Logback
logging implementation, it is possible to provide a
custom, XML-based, logback configuration file. This will override
any other logging configuration in the system.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The logging configuration is not checked by EnMasse. Providing an incorrect configuration may result in the loss of
performance, stability, or may lead to a total system failure.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information about configuring Logback, see <a href="http://logback.qos.ch/manual/configuration.html" class="bare">http://logback.qos.ch/manual/configuration.html</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-installing-services-messaging-iot-iot-iot">The IoT services are installed</a>.</p>
</li>
<li>
<p>Create the content of an XML-based logback configuration file.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="using_the_iotconfig_resource">Using the <code>IoTConfig</code> resource</h6>
<div class="paragraph">
<p>You can apply the configuration using the <code>IoTConfig</code> resource.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>IoTConfig</code> instance named <code>default</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc edit iotconfig default</pre>
</div>
</div>
</li>
<li>
<p>Configure the logging options, save and exit the editor:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: iot.enmasse.io/v1alpha1
kind: IoTConfig
metadata:
  namespace: enmasse-infra
  name: default
spec:
  adapters:
    mqtt:
      containers:
        adapter:
          logback:
            logback: | <i class="conum" data-value="1"></i><b>(1)</b>
              &lt;configuration&gt;
                &lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt;
                  &lt;encoder&gt;
                    &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;
                  &lt;/encoder&gt;
                &lt;/appender&gt;
                &lt;root level="debug"&gt;
                  &lt;appender-ref ref="STDOUT" /&gt;
                &lt;/root&gt;
              &lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The full XML-based logback configuration.</td>
</tr>
</table>
</div>
</li>
<li>
<p>The operator applies the logging configuration and re-deploys all
required components.</p>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="using_the_services_configmap_resource">Using the service&#8217;s <code>ConfigMap</code> resource</h6>
<div class="paragraph">
<p>In addition to providing the custom configuration using the
<code>IoTConfig</code>, it is possible to put the custom logging
configuration into the service&#8217;s <code>ConfigMap</code> source.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>ConfigMap</code> instance for the service. For example, <code>iot-http-adapter-config</code> for the HTTP protocol adapter.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc edit cm iot-http-adapter-config</pre>
</div>
</div>
</li>
<li>
<p>Add the XML-based logback configuration in the data section with the key <code>logback-custom.xml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: ConfigMap
metadata:
  namespace: enmasse-infra
  name: iot-http-adapter-config
data:
  application.yaml:  <i class="conum" data-value="1"></i><b>(1)</b>
  logback-spring.xml:  <i class="conum" data-value="2"></i><b>(2)</b>
  logback-custom.xml: | <i class="conum" data-value="3"></i><b>(3)</b>
    &lt;configuration&gt;
      &lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt;
        &lt;encoder&gt;
          &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;
        &lt;/encoder&gt;
      &lt;/appender&gt;
      &lt;root level="debug"&gt;
        &lt;appender-ref ref="STDOUT" /&gt;
      &lt;/root&gt;
    &lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The application specific configuration file. The operator generates this file and overwrites any changes.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The effective logback configuration, applied by the system. Do not
change this, as it will be overwritten by the operator.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The full XML-based logback configuration.</td>
</tr>
</table>
</div>
</li>
<li>
<p>The operator detects changes on the <code>ConfigMap</code> resource, applies
the logging configuration and re-deploys all required components.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="proc-iot-tracing-messaging-iot-iot-iot">5.2.8. Configuring tracing</h4>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-installing-services-messaging-iot-iot-iot">The IoT services are installed</a>.</p>
</li>
<li>
<p>The "Jaeger Operator" from OperatorHub is installed in the EnMasse namespace.</p>
</li>
<li>
<p>An instance of Jaeger is deployed using the operator in the EnMasse namespace.</p>
</li>
<li>
<p>Know whether the Jaeger instance was deployed using the "sidecar" or "daemonset" agent.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>IoTConfig</code> instance named <code>default</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc edit iotconfig default</pre>
</div>
</div>
</li>
<li>
<p>Modify the configuration according to your Jaeger agent configuration:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If the Jaeger instance is deployed with the "sidecar" agent, add the following configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: iot.enmasse.io/v1alpha1
kind: IoTConfig
metadata:
  namespace: enmasse-infra
  name: default
spec:
  tracing:
    strategy: <i class="conum" data-value="1"></i><b>(1)</b>
      sidecar: {} <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The field to select the strategy. Only one strategy must be configured.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Enables the "sidecar" strategy. The use of an empty empty object (<code>{}</code>) is intentional.</td>
</tr>
</table>
</div>
</li>
<li>
<p>If the Jaeger instance is deployed with the "daemonset" agent, add the following configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: iot.enmasse.io/v1alpha1
kind: IoTConfig
metadata:
  namespace: enmasse-infra
  name: default
spec:
  tracing:
    strategy: <i class="conum" data-value="1"></i><b>(1)</b>
      daemonset: {} <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The field to select the strategy. Only one strategy must be configured.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Enables the "daemonset" strategy. The use of an empty empty object (<code>{}</code>) is intentional.</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Save and exit the editor.</p>
</li>
<li>
<p>The operator applies the tracing configuration and re-deploys all
required components.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="iot_services_configuration_examples">5.2.9. IoT services configuration examples</h4>
<div class="sect4">
<h5 id="iotconfig-example-messaging-iot-iot-iot">Minimal IoT configuration example</h5>
<div class="paragraph">
<p>This IoT configuration example shows only the required options to create an <code>iotConfig</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">kind: IoTConfig
apiVersion: iot.enmasse.io/v1alpha1
metadata:
  name: default
spec:
  services:
    deviceRegistry:
      infinispan:
        server:
          external: <i class="conum" data-value="1"></i><b>(1)</b>
            host: infinispan
            port: 11222
            username: app
            password: test12
            saslServerName: hotrod
            saslRealm: ApplicationRealm
  adapters:
    mqtt:
      endpoint:
        secretNameStrategy:
          secretName: iot-mqtt-adapter-tls</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The Infinispan service must be provided.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="iot-adapters-example-messaging-iot-iot-iot">Tuning the IoT protocol adapters example</h5>
<div class="paragraph">
<p>This IoT configuration example shows how the protocol adapters can be individually tuned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">kind: IoTConfig
apiVersion: iot.enmasse.io/v1alpha1
metadata:
  name: default
spec:
  services:
    deviceRegistry:
      infinispan:
        server:
          external:
            host: infinispan
            port: 11222
            username: app
            password: test12
            saslServerName: hotrod
            saslRealm: ApplicationRealm
  adapters:
    mqtt:
      enabled: true <i class="conum" data-value="1"></i><b>(1)</b>
      replicas: 1
      options:
        tenantIdleTimeout: 30m <i class="conum" data-value="2"></i><b>(2)</b>
        maxPayloadSize: 2048
    http:
      enabled: true
      replicas: 1 <i class="conum" data-value="4"></i><b>(4)</b>
      options:
        tenantIdleTimeout: 30m
        maxPayloadSize: 2048 <i class="conum" data-value="3"></i><b>(3)</b>
      containers:
        adapter:
          resources: <i class="conum" data-value="4"></i><b>(4)</b>
            limits:
              memory: 128Mi
              cpu: 500m
    lorawan:
      enabled: false
    sigfox:
      enabled: false</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Protocol adapters can be disabled if necessary. The default value is <code>true</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the duration to keep alive the client connection.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specifies the maximum allowed size of an incoming message in bytes.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Container resources and instances can be adjusted if necessary.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="iot-registry-example-registry-jdbc-messaging-iot-iot-iot">Configuration for JDBC with external PostgreSQL</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">kind: IoTConfig
apiVersion: iot.enmasse.io/v1alpha1
metadata:
  name: default
spec:
  services:
    deviceRegistry:
      jdbc:
        server:
          external:
            url: jdbc://postgresql.namespace.svc:5432/database-name <i class="conum" data-value="1"></i><b>(1)</b>
            username: app <i class="conum" data-value="2"></i><b>(2)</b>
            password: test12 <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The JDBC URL to the PostgreSQL database. This includes the hostname, port, and database name.
For more information also see: <a href="https://jdbc.postgresql.org/documentation/head/connect.html" class="bare">https://jdbc.postgresql.org/documentation/head/connect.html</a></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The username used to connect to the PostgreSQL server</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The password used to connect to the PostgreSQL server</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-iot-metrics-messaging-iot-iot-iot">5.2.10. IoT-specific metrics</h4>
<div class="paragraph">
<p>The IoT-specific components of EnMasse provide the metrics described in this section.</p>
</div>
<div class="sect4">
<h5 id="common_tags_and_metrics">Common tags and metrics</h5>
<div class="paragraph">
<p>The following tags are available on all IoT-related components:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tag</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>host</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the name of the host that the component reporting the metric is running on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>component-type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>adapter</code>, <code>service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the type of component reporting the metric.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>component-name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the component reporting the metric. For a list of components, see the following table.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Component names</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top"><em>component-name</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP protocol adapter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hono-http</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MQTT protocol adapter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hono-mqtt</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LoRaWAN protocol adapter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hono-lora</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sigfox protocol adapter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hono-sigfox</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="protocol_adapters">Protocol adapters</h5>
<div class="paragraph">
<p>Protocol adapters, components of type <code>adapter</code>, have some additional tags.
.Protocol adapter tags</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>direction</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>one-way</code>, <code>request</code>, <code>response</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the direction in
which a Command &amp; Control message is being sent: <code>one-way</code> indicates a
command sent to a device for which the sending application does not
expect to receive a response; <code>request</code> indicates a command request
message sent to a device; and <code>response</code> indicates a command response
received from a device.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>qos</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code>, <code>1</code>, <code>unknown</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the quality of service used for a
telemetry or event message: <code>0</code> indicates <em>at most once</em>,<code>1</code>
indicates <em>at least once</em>, and <code>none</code> indicates unknown delivery
semantics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>status</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forwarded</code>, <code>unprocessable</code>, <code>undeliverable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the
processing status of a message. <code>forwarded</code> indicates that the message
has been forwarded to a downstream consumer; <code>unprocessable</code> indicates
that the message has not been processed or forwarded, for example, because the
message was malformed; and <code>undeliverable</code> indicates that the message could
not be forwarded, for example, because there is no downstream consumer or due to
an infrastructure problem.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>tenant</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the identifier of the tenant that the metric is
being reported on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>ttd</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>command</code>, <code>expired</code>, <code>none</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the status of the
outcome of processing a TTD value contained in a message received from a
device. <code>command</code> indicates that a command for the device has been
included in the response to the devices request for uploading the
message; <code>expired</code> indicates that a response without a command has been
sent to the device; and <code>none</code> indicates that either no TTD value has been
specified by the device or that the protocol adapter does not support
it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>telemetry</code>, <code>event</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the type of (downstream) message for
the metric.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Protocol adapter metrics</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Tags</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>hono.commands.received</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>host</em>, <em>component-type</em>,
<em>component-name</em>, <em>tenant</em>, <em>type</em>, <em>status</em>, <em>direction</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the amount of time it took to process a message conveying a command or
a response to a command.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>hono.commands.payload</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DistributionSummary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>host</em>, <em>component-type</em>,
<em>component-name</em>, <em>tenant</em>, <em>type</em>, <em>status</em>, <em>direction</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the number of bytes conveyed in the payload of a command message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>hono.connections.authenticated</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>host</em>, <em>component-type</em>,
<em>component-name</em>, <em>tenant</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current number of connected, authenticated devices.</p>
<p class="tableblock">NOTE: This metric is only supported by protocol adapters that
maintain a <em>connection state</em> with authenticated devices. In particular,
the HTTP adapter does not support this metric.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>hono.connections.unauthenticated</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>host</em>, <em>component-type</em>,
<em>component-name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current number of connected, unauthenticated devices.</p>
<p class="tableblock">NOTE: This metric is only supported by protocol adapters that maintain a
<em>connection state</em> with authenticated devices. In particular, the HTTP
adapter does not support this metric.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>hono.messages.received</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>host</em>, <em>component-type</em>,
<em>component-name</em>, <em>tenant</em>, <em>type</em>, <em>status</em>, <em>qos</em>, <em>ttd</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the amount of time it took to process a message conveying a telemetry or event message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>hono.messages.payload</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DistributionSummary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>host</em>, <em>component-type</em>,
<em>component-name</em>, <em>tenant</em>, <em>type</em>, <em>status</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the number of bytes conveyed in the payload of a telemetry or event message.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="troubleshooting_guide">5.2.11. Troubleshooting guide</h4>
<div class="sect4">
<h5 id="proc-iot-troubleshoot-stuck-iotproject-messaging-iot-iot-iot">Fix <code>IoTProject</code> stuck in termination</h5>
<div class="paragraph">
<p>When an <code>IoTProject</code> instance is deleted, the resource will not be deleted immediately.
It is only marked for deletion and necessary cleanup operations will be performed in the background.
The resource will automatically be deleted once the cleanup has been performed successfully.</p>
</div>
<div class="paragraph">
<p>In some situations it might be that, due do to infrastructure issues, the clean-up operation
cannot be performed at this point in time. The <code>IoTProject</code> will still be kept, and the
operator will re-try periodically to clean up the resources. The cleanup will succeed once
the infrastructure is back in operational state.</p>
</div>
<div class="paragraph">
<p>In the case that the infrastructure is not expected to function ever again, it might be desirable
to force the destruction of the <code>IoTProject</code> resources.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Manually removing the resource cleanup finalizer will skip the cleanup process,
 and prevent the system from properly cleaning up.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Evaluate if the project is stuck in the termination state using the <code>oc</code> tool:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get iotproject iot -n myapp
NAME   IOT TENANT  DOWNSTREAM HOST                       DOWNSTREAM PORT   TLS    PHASE
iot    myapp.iot   messaging-be482a6.enmasse-infra.svc   5671              true   Terminating</pre>
</div>
</div>
<div class="paragraph">
<p>The output should show the project in the state "Terminating".
In addition, verify that the cleanup finalizer is still present:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get iotproject iot -n myapp -ojsonpath='{range .metadata.finalizers[*]}{..}{"\n"}{end}'
iot.enmasse.io/deviceRegistryCleanup</pre>
</div>
</div>
<div class="paragraph">
<p>If the list contains an entry of <code>iot.enmasse.io/deviceRegistryCleanup</code>, then resource cleanup process
is still pending.</p>
</div>
</li>
<li>
<p>Manually remove the finalizer <code>iot.enmasse.io/deviceRegistryCleanup</code> from the list of finalizers:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc edit iotproject iot -n myapp</pre>
</div>
</div>
<div class="paragraph">
<p>This will open up a text editor with the content of the resource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: iot.enmasse.io/v1alpha1
kind: IoTProject
metadata:
  creationTimestamp: "2019-12-09T15:00:00Z"
  deletionTimestamp: "2019-12-09T16:00:00Z"
  finalizers:
  - iot.enmasse.io/deviceRegistryCleanup <i class="conum" data-value="1"></i><b>(1)</b>
  name: iot
  namespace: myapp</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The line with the finalizer to delete</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Delete the line of the finalizer. Save and exit the editor. This will automatically trigger an update
on the server, and the system will continue deleting the <code>IoTProject</code> resource.</p>
</div>
</li>
<li>
<p>After the finalizer has been removed, the resource should be deleted and disappear from the system.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="iot-project-owner-messaging-iot-iot-iot-iot">5.3. IoT for projects owners</h3>
<div class="sect3">
<h4 id="iot_project_configuration_examples">5.3.1. IoT project configuration examples</h4>
<div class="paragraph">
<p>IoT projects define the messaging resources an IoT tenant can consume.</p>
</div>
<div class="sect4">
<h5 id="iot-project-managed-example">Using a managed messaging infrastructure</h5>
<div class="paragraph">
<p>This IoT project configuration example relies on EnMasse to manage the messaging infrastructure used by IoT traffic.
The EnMasse <code>standard</code> address space and address plans are used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">kind: IoTProject
apiVersion: iot.enmasse.io/v1alpha1
metadata:
  name: user-1
spec:
  downstreamStrategy:
    managedStrategy: <i class="conum" data-value="1"></i><b>(1)</b>
      addressSpace:
        name: iot-user-1
        plan: standard-unlimited <i class="conum" data-value="2"></i><b>(2)</b>
        type: standard <i class="conum" data-value="4"></i><b>(4)</b>
      addresses:
        telemetry:
          plan: standard-small-anycast <i class="conum" data-value="3"></i><b>(3)</b>
          type: standard <i class="conum" data-value="5"></i><b>(5)</b>
        event:
          plan: standard-small-queue <i class="conum" data-value="3"></i><b>(3)</b>
        command:
          plan: standard-small-anycast <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>managedStrategy</code> value refers to a messaging infrastructure managed by EnMasse.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the address space plan, defining the resource usage of the address space. Each IoT tenant must have its own address space.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Each address must be associated with a valid address plan.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specifies the type of address space. The default value is <code>standard</code>.
<div class="paragraph">
<p>For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#managing-address-spaces-messaging">Managing address spaces</a>.</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Specifies the type of address.
<div class="paragraph">
<p>For more information, see <a href="http://enmasse.io/documentation/master/openshift.html#managing-address-spaces-messaging">Managing address spaces</a>.</p>
</div></td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="iot-project-external-example">Using an external messaging infrastructure</h5>
<div class="paragraph">
<p>This IoT configuration example shows how an external messaging infrastructure can be configured.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">kind: IoTProject
apiVersion: iot.enmasse.io/v1alpha1
metadata:
  name: user-1
spec:
  downstreamStrategy:
    externalStrategy:
      host: messaging-hono-default.enmasse-infra.svc
      port: 5672
      username: http
      tls: true
      password: http-secret</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="iot-device-managers-messaging-iot-iot-iot-iot-iot">5.4. IoT for device managers</h3>
<div class="paragraph">
<p>Device managers are typically responsible for creating and managing device identities and credentials in the system.</p>
</div>
<div class="sect3">
<h4 id="proc-iot-management-token-messaging-iot-iot-iot-iot-iot">5.4.1. Obtaining an authentication token</h4>
<div class="paragraph">
<p>To access the device management API, you must obtain a token to authenticate yourself
to the API.</p>
</div>
<div class="paragraph">
<p>Access to an IoT tenant&#8217;s devices is mapped by the device registry based on access to
the <code>IoTProject</code> resource. If an account has <strong>read</strong> access to the <code>IoTProject</code>, this
account can also execute <strong>read</strong> operations on the device registry for this IoT tenant.</p>
</div>
<div class="paragraph">
<p>The token has to be presented to the API as a <strong>bearer token</strong> by adding
an HTTP header value: <code>Authorization: Bearer &lt;token&gt;</code>. For more information,
see <a href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>.</p>
</div>
<div class="paragraph">
<p>In the following configuration examples, replace <code>${TOKEN}</code> with the actual token.</p>
</div>
<div class="sect4">
<h5 id="obtaining_an_authentication_token_for_a_user">Obtaining an authentication token for a user</h5>
<div class="paragraph">
<p>If you want to use the token of the current OpenShift, you can extract the
token.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must be logged in to your OpenShift instance as a user that supports tokens.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Extract the token for the current user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc whoami -t</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
User tokens have a limited lifetime, so it may be necessary
to renew the token after it has expired.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="obtaining_an_authentication_token_for_a_service_account">Obtaining an authentication token for a service account</h5>
<div class="paragraph">
<p>Perform the following steps to create a new service account and extract the token.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must be logged in to your OpenShift instance with permissions to create new service accounts, roles and role bindings.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a new service account:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-device-manager-account <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the service account.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a new role, allowing access to the <code>IoTProject</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: device-manager-role <i class="conum" data-value="1"></i><b>(1)</b>
rules: <i class="conum" data-value="2"></i><b>(2)</b>
- apiGroups: ["iot.enmasse.io"]
  resources: ["iotprojects"]
  verbs: ["create", "update", "get", "list", "delete"]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the role.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The access rules, which must grant CRUD access to the <code>IoTProject</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This example grants access to all <code>IoTProjects</code> in a namespace.
To further restrict access, use more specific rules.</p>
</div>
</li>
<li>
<p>Create a new role binding, assigning the role to the service account:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: my-device-manager-account-role-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: device-manager-role <i class="conum" data-value="1"></i><b>(1)</b>
subjects:
- kind: ServiceAccount
  name: my-device-manager-account <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the role.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The name of the service account.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Retrieve the token from the service account:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc serviceaccounts get-token my-device-manager-account</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="assembly-iot-creating-device-messaging-iot-iot-iot-iot-iot">5.4.2. Creating an IoT device</h4>
<div class="paragraph">
<p>After installing the IoT services and creating an IoT project, you can create an IoT device for the device you want to monitor.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-installing-services-messaging-iot-iot">The IoT services are installed</a>.</p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-creating-project-messaging-iot-iot">An IoT project is created</a>.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="proc-iot-register-new-device-messaging-iot-iot-iot-iot-iot">Registering a new device</h5>
<div class="paragraph">
<p>To create a new device, you must first register the device.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Export the device registry host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">export REGISTRY_HOST=$(oc -n enmasse-infra get routes device-registry --template='{{ .spec.host }}')</pre>
</div>
</div>
</li>
<li>
<p>Export the device registry access token:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">export TOKEN=$(oc whoami --show-token)</pre>
</div>
</div>
<div class="paragraph">
<p>This token is used to authenticate against the device registry management API.</p>
</div>
</li>
<li>
<p>Register a device with a defined ID (this example uses <code>4711</code>):</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl --insecure -X POST -i -H 'Content-Type: application/json' -H "Authorization: Bearer ${TOKEN}" https://$REGISTRY_HOST/v1/devices/myapp.iot/4711</pre>
</div>
</div>
</li>
<li>
<p>(Optional) If you need to provide additional registration information, do so as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl --insecure -X POST -i -H 'Content-Type: application/json' -H "Authorization: Bearer ${TOKEN}" --data-binary '{
	"via": ["gateway1"]
}' https://$REGISTRY_HOST/v1/devices/myapp.iot/4711</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="proc-iot-set-username-password-device-messaging-iot-iot-iot-iot-iot">Setting user name and password credentials for a device</h5>
<div class="paragraph">
<p>After registering a new device, you must set the user name and password credentials for the device.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Add the credentials for a device:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl --insecure -X PUT -i -H 'Content-Type: application/json' -H "Authorization: Bearer ${TOKEN}" --data-binary '[{
	"type": "hashed-password",
	"auth-id": "<em>sensor1</em>",
	"secrets": [{
		"pwd-plain":"'hono-secret'"
	}]
}]' https://$REGISTRY_HOST/v1/credentials/myapp.iot/4711</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="iot-solution-developers-messaging-iot-iot-iot-iot-iot-iot">5.5. IoT for solution developers</h3>
<div class="paragraph">
<p>IoT solution developers are typically responsible for writing IoT cloud applications.</p>
</div>
<div class="sect3">
<h4 id="proc-iot-installing-cli-messaging-iot-iot-iot-iot-iot-iot">5.5.1. Installing the Eclipse Hono command-line client</h4>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-installing-services-messaging-iot-iot">The IoT services are installed</a>.</p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-creating-project-messaging-iot-iot">An IoT project is created</a>.</p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#assembly-iot-creating-device-messaging-iot-iot">An IoT device is created</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the <a href="https://www.eclipse.org/hono/downloads/">Eclipse Hono command-line client</a>.</p>
</li>
<li>
<p>Obtain the messaging endpoint certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc -n myapp get addressspace iot -o jsonpath={.status.caCert} | base64 --decode > tls.crt</pre>
</div>
</div>
</li>
<li>
<p>Export the messaging endpoint host and port:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">export MESSAGING_HOST=$(oc get -n myapp addressspace iot -o jsonpath='{.status.endpointStatuses[?(@.name=="messaging")].externalHost}')
export MESSAGING_PORT=443</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-iot-starting-telemetry-consumer-messaging-iot-iot-iot-iot-iot-iot">5.5.2. Starting the telemetry consumer</h4>
<div class="paragraph">
<p>You can send telemetry data such as sensor readings, for example, from a device to the cloud. To do this, you must first start the telemetry consumer by running the customer application.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run the customer application to receive telemetry:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">java -jar hono-cli-*-exec.jar --hono.client.host=$MESSAGING_HOST --hono.client.port=$MESSAGING_PORT --hono.client.username=consumer --hono.client.password=foobar --tenant.id=myapp.iot --hono.client.trustStorePath=tls.crt --message.type=telemetry</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-iot-starting-events-consumer-messaging-iot-iot-iot-iot-iot-iot">5.5.3. Starting the events consumer</h4>
<div class="paragraph">
<p>You can send events, such as alerts and other important data, from a device to a consumer application. To do this, you must first start the events consumer by running the customer application.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run the customer application to receive events:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">java -jar hono-cli-*-exec.jar --hono.client.host=$MESSAGING_HOST --hono.client.port=$MESSAGING_PORT --hono.client.username=consumer --hono.client.password=foobar --tenant.id=myapp.iot --hono.client.trustStorePath=tls.crt --message.type=events</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-iot-starting-commands-sender-messaging-iot-iot-iot-iot-iot-iot">5.5.4. Starting the command sender</h4>
<div class="paragraph">
<p>You can send commands from a cloud to the device.  To do this, you must start the command sender by running the customer application.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run the customer application to send commands to a device with an ID of <code>4711</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">java -jar hono-cli-*-exec.jar --hono.client.host=$MESSAGING_HOST --hono.client.port=$MESSAGING_PORT --hono.client.username=consumer --hono.client.password=foobar --tenant.id=myapp.iot --hono.client.trustStorePath=tls.crt --device.id=4711 --spring.profiles.active=command</pre>
</div>
</div>
</li>
<li>
<p>Follow the instructions for entering the command&#8217;s name, payload, and content type. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">>>>>>>>>> Enter name of command for device [4711] in tenant [myapp.iot] (prefix with 'ow:' to send one-way command):
ow:setVolume
>>>>>>>>> Enter command payload:
{"level": 50}
>>>>>>>>> Enter content type:
application/json

INFO  org.eclipse.hono.cli.app.Commander - Command sent to device</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="iot-device-developers-messaging-iot-iot-iot-iot-iot-iot-iot">5.6. IoT for device developers</h3>
<div class="paragraph">
<p>Device developers are typically responsible for either connecting existing devices to the cloud platform or writing software for devices.
This information describes how to connect devices using one of the supported protocols.</p>
</div>
<div class="sect3">
<h4 id="http_devices">5.6.1. HTTP devices</h4>
<div class="sect4">
<h5 id="proc-iot-sending-telemetry-http-messaging-iot-iot-iot-iot-iot-iot-iot">Sending telemetry using HTTP</h5>
<div class="paragraph">
<p>You can send telemetry from a device to the cloud using the HTTP protocol.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Send telemetry using the HTTP protocol:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl --insecure -X POST -i -u sensor1@myapp.iot:hono-secret -H 'Content-Type: application/json' --data-binary '{"temp": 5}' https://$(oc -n enmasse-infra get routes iot-http-adapter --template='{{ .spec.host }}')/telemetry</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="proc-iot-sending-events-http-messaging-iot-iot-iot-iot-iot-iot-iot">Sending events using HTTP</h5>
<div class="paragraph">
<p>You can send an event message from the customer application to the device using the HTTP protocol.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Send events using the HTTP protocol:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl --insecure -X POST -i -u sensor1@myapp.iot:hono-secret -H 'Content-Type: application/json' --data-binary '{"temp": 5}' https://$(oc -n enmasse-infra get routes iot-http-adapter --template='{{ .spec.host }}')/events</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="proc-iot-receiving-commands-http-messaging-iot-iot-iot-iot-iot-iot-iot">Receiving commands using the HTTP protocol</h5>
<div class="paragraph">
<p>You can send commands from the cloud to a device using the HTTP protocol.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Send a telemetry message using the HTTP protocol, specifying the <code>hono-ttd</code> parameter indicating how long the client will wait for the command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl --insecure -X POST -i -u sensor1@myapp.iot:hono-secret -H 'Content-Type: application/json' --data-binary '{"temp": 5}' https://$(oc -n enmasse-infra get routes iot-http-adapter --template='{{ .spec.host }}')/telemetry?hono-ttd=600</pre>
</div>
</div>
</li>
<li>
<p>Run the customer application to send commands to a device with an ID of <code>4711</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">java -jar hono-cli-*-exec.jar --hono.client.host=$MESSAGING_HOST --hono.client.port=$MESSAGING_PORT --hono.client.username=consumer --hono.client.password=foobar --tenant.id=myapp.iot --hono.client.trustStorePath=tls.crt --device.id=4711 --spring.profiles.active=command</pre>
</div>
</div>
</li>
<li>
<p>Follow the instructions for entering the command&#8217;s name, payload, and content type. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">>>>>>>>>> Enter name of command for device [4711] in tenant [myapp.iot] (prefix with 'ow:' to send one-way command):
ow:setVolume
>>>>>>>>> Enter command payload:
{"level": 50}
>>>>>>>>> Enter content type:
application/json

INFO  org.eclipse.hono.cli.app.Commander - Command sent to device</pre>
</div>
</div>
<div class="paragraph">
<p>The client receives the command in the HTTP response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">HTTP/1.1 200 OK
hono-command: setVolume
content-type: application/json
content-length: 13

{"level": 50}</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="mqtt_devices">5.6.2. MQTT devices</h4>
<div class="sect4">
<h5 id="proc-iot-sending-telemetry-mqtt-messaging-iot-iot-iot-iot-iot-iot-iot">Sending telemetry using MQTT</h5>
<div class="paragraph">
<p>You can send telemetry from a device to the cloud using the MQTT protocol.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Send telemetry using the MQTT protocol:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">mosquitto_pub -d -h $(oc -n enmasse-infra get routes iot-mqtt-adapter --template='{{ .spec.host }}') -p 443 -u 'sensor1@myapp.iot' -P hono-secret -t telemetry -m '{"temp": 5}' -i 4711 --cafile install/components/iot/examples/k8s-tls/build/iot-mqtt-adapter-fullchain.pem</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="proc-iot-sending-events-mqtt-messaging-iot-iot-iot-iot-iot-iot-iot">Sending events using MQTT</h5>
<div class="paragraph">
<p>You can send an event message from the customer application to the device using the MQTT protocol.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Send events using the MQTT protocol:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">mosquitto_pub -d -h $(oc -n enmasse-infra get routes iot-mqtt-adapter --template='{{ .spec.host }}') -p 443 -u 'sensor1@myapp.iot' -P hono-secret -t events -m '{"temp": 5}' -i 4711 --cafile install/components/iot/examples/k8s-tls/build/iot-mqtt-adapter-fullchain.pem</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="proc-iot-receiving-commands-mqtt-messaging-iot-iot-iot-iot-iot-iot-iot">Receiving commands using the MQTT protocol</h5>
<div class="paragraph">
<p>You can send commands from the cloud to a device using the MQTT protocol.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Use the MQTT client to subscribe to the MQTT topic for receiving commands:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">mosquitto_sub -v -d -h $(oc -n enmasse-infra get routes iot-mqtt-adapter --template='{{ .spec.host }}') -p 443 -u 'sensor1@myapp.iot' -P hono-secret -t command/+/+/req/# -i 4711 --cafile install/components/iot/examples/k8s-tls/build/iot-mqtt-adapter-fullchain.pem</pre>
</div>
</div>
</li>
<li>
<p>Run the customer application to send commands to a device with an ID of <code>4711</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">java -jar hono-cli-*-exec.jar --hono.client.host=$MESSAGING_HOST --hono.client.port=$MESSAGING_PORT --hono.client.username=consumer --hono.client.password=foobar --tenant.id=myapp.iot --hono.client.trustStorePath=tls.crt --device.id=4711 --spring.profiles.active=command</pre>
</div>
</div>
</li>
<li>
<p>Follow the instructions for entering the command&#8217;s name, payload, and content type. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">>>>>>>>>> Enter name of command for device [4711] in tenant [myapp.iot] (prefix with 'ow:' to send one-way command):
ow:setVolume
>>>>>>>>> Enter command payload:
{"level": 50}
>>>>>>>>> Enter content type:
application/json

INFO  org.eclipse.hono.cli.app.Commander - Command sent to device</pre>
</div>
</div>
<div class="paragraph">
<p>The client receives the command in the MQTT message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Client 4711 received PUBLISH (d0, q0, r0, m0, 'command///req//setVolume', ... (13 bytes))
command///req//setVolume {"level": 50}</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="assembly-iot-configuring-sigfox-messaging-iot-iot-iot-iot-iot-iot-iot">5.6.3. Configuring Sigfox devices</h4>
<div class="paragraph">
<p>After installing the IoT services and creating an IoT project, you can configure
the Sigfox backend integration.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-installing-services-messaging-iot-iot">The IoT services are installed</a>.</p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-creating-project-messaging-iot-iot">An IoT project is created</a>.</p>
</li>
<li>
<p>TLS is properly deployed in your cluster. The Sigfox protocol adapter endpoint
must be properly validated with TLS.</p>
</li>
<li>
<p>An account at <a href="https://backend.sigfox.com" class="bare">https://backend.sigfox.com</a> must be set up and your Sigfox devices registered.</p>
</li>
<li>
<p>Familiarity with the Sigfox backend. After you are logged in to the Sigfox backend, for more information see the <a href="https://backend.sigfox.com/cms/">Sigfox documentation</a>.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="iot-register-sigfox-backend-gateway-device-messaging-iot-iot-iot-iot-iot-iot-iot">Registering the Sigfox backend as a gateway device</h5>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The Sigfox backend is set up in EnMasse as a gateway device.</p>
</li>
<li>
<p>The credentials assigned to this device are required for the configuration
of the "callback" in the Sigfox backend.</p>
</li>
<li>
<p>The actual devices are configured to use this gateway device as their transport.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#proc-iot-register-new-device-messaging-iot-iot">Register a new device</a>.</p>
<div class="paragraph">
<p>In step 3 of this procedure, specify <code>sigfox-backend</code> as the ID.</p>
</div>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#proc-iot-set-username-password-device-messaging-iot-iot">Set up password credentials</a> for this device (for example, <code>sigfox-user</code> / <code>sigfox-password</code>).</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="proc-iot-register-sigfox-device-messaging-iot-iot-iot-iot-iot-iot-iot">Registering the Sigfox device</h5>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#iot-register-sigfox-backend-gateway-device-messaging-iot-iot-iot-iot-iot-iot-iot">Registered the Sigfox backend as a gateway device</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Locate the <em>device ID</em> for the Sigfox device you want to register. You obtain this ID as part of the registration
process in the Sigfox backend.</p>
</li>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#proc-iot-register-new-device-messaging-iot-iot">Register a new device</a>.</p>
<div class="paragraph">
<p>Specify the device ID as the name (for example, <code>1AB2C3</code>) and specify the name of the gateway device in the <code>via</code> field,
as part of the registration information (for example, <code>{"via": ["sigfox-backend"]}</code>).</p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Do not set a password for this device.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ref-iot-prepare-sigfox-connection-information-messaging-iot-iot-iot-iot-iot-iot-iot">Preparing the Sigfox connection information</h5>
<div class="paragraph">
<p>Prepare the following connection information, which is used in the
<a href="http://enmasse.io/documentation/master/openshift.html#proc-iot-creating-new-sigfox-callback-messaging-iot-iot-iot-iot-iot-iot-iot">Creating a new callback in the Sigfox backend</a> procedure.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">IoT tenant name</dt>
<dd>
<p>The name of the IoT tenant consists of the OpenShift namespace and the name
of the IoT project resource, for example, <code>namespace.iotproject</code>.</p>
</dd>
<dt class="hdlist1">HTTP authorization header</dt>
<dd>
<p>For the Sigfox backend to authenticate, you must convert the username and password combination of the gateway device into an HTTP "Basic Authorization" header. Be sure to specify the full user name using the following syntax: <code><em>authentication id</em> @<em>IoT tenant name</em></code>.</p>
<div class="paragraph">
<p>Example: <code>sigfox-user@namespace.iotproject</code></p>
</div>
<div class="paragraph">
<p>The basic authentication header value can be generated on the command line using
the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">echo "Basic $(echo -n "sigfox-user@namespace.iotproject:password" | base64)"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">URL pattern</dt>
<dd>
<p>The URL pattern consists of the URL to the Sigfox protocol adapter and
Sigfox-specific query parameters:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">https://&lt;ADAPTER URL&gt;/data/telemetry/&lt;TENANT&gt;?device={device}&amp;data={data}</pre>
</div>
</div>
<div class="paragraph">
<p>Run the following command to obtain the URL of the protocol adapter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">echo "https://$(oc -n enmasse-infra get routes iot-sigfox-adapter --template='{{ .spec.host }}')"</pre>
</div>
</div>
<div class="paragraph">
<p>The path segment <code>/data/telemetry</code> indicates to the protocol adapter
to handle messages as <em>telemetry</em> data. You can use <code>/data/event</code>
 to instead process messages as <em>events</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>{device}</code> and <code>{data}</code> are literal values and must not be replaced.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="proc-iot-creating-new-sigfox-callback-messaging-iot-iot-iot-iot-iot-iot-iot">Creating a new callback in the Sigfox backend</h5>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#ref-iot-prepare-sigfox-connection-information-messaging-iot-iot-iot-iot-iot-iot-iot">Prepared the Sigfox connection information</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to <a href="https://backend.sigfox.com" class="bare">https://backend.sigfox.com</a>.</p>
</li>
<li>
<p>In the <code>Device Type</code> open a type for editing and switch to the <code>Callbacks</code>
section.</p>
</li>
<li>
<p>Create a new "Custom" callback, with the following settings:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p><code>DATA</code>  <code>UPLINK</code></p>
</dd>
<dt class="hdlist1">Channel</dt>
<dd>
<p><code>URL</code></p>
</dd>
<dt class="hdlist1">Url pattern</dt>
<dd>
<p>The <em>URL pattern</em>. For example, <code>https://iot-sigfox-adapter.my.cluster/data/telemetry/&lt;TENANT&gt;?device={device}&amp;data={data}</code></p>
</dd>
<dt class="hdlist1">Use HTTP Method</dt>
<dd>
<p><code>GET</code></p>
</dd>
<dt class="hdlist1">Headers</dt>
<dd>
<p><code>Authorization</code>  <code>Basic</code></p>
</dd>
<dt class="hdlist1">Send SNI</dt>
<dd>
<p> (Enabled)</p>
</dd>
</dl>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="proc-iot-sigfox-enabling-command-and-control-messaging-iot-iot-iot-iot-iot-iot-iot">Enabling command and control in Sigfox</h5>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="http://enmasse.io/documentation/master/openshift.html#proc-iot-creating-new-sigfox-callback-messaging-iot-iot-iot-iot-iot-iot-iot">Created a callback in the Sigfox backend</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to <a href="https://backend.sigfox.com" class="bare">https://backend.sigfox.com</a>.</p>
</li>
<li>
<p>In the <code>Device Type</code> open the type for editing and switch to the <code>Callbacks</code>
section.</p>
</li>
<li>
<p>Edit the callback configuration for which you want to enable command and control.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>Switch to <code>DATA</code>   <code>BIDIR</code></p>
</dd>
<dt class="hdlist1">Url Pattern</dt>
<dd>
<p>Add the <code>ack</code> parameter. For example, <code>https://iot-sigfox-adapter.my.cluster/data/telemetry/&lt;TENANT&gt;?device={device}&amp;data={data}<strong>&amp;ack={ack}</strong></code></p>
</dd>
</dl>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting-guide-messaging">Appendix A: Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following troubleshooting information provides solutions to common problems when running EnMasse. Certain steps in the procedures might require service administrator privileges.</p>
</div>
<div class="sect2">
<h3 id="troubleshooting-messaging">A.1. Determine which pods belong to an address space</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Retrieve the uuid for the address space:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspace <em>myspace</em> -o jsonpath='{.metadata.annotations.enmasse\.io/infra-uuid}'</pre>
</div>
</div>
</li>
<li>
<p>Find all pods with a matching <code>infraUuid</code> label:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get pods -l infraUuid=<em>uuid</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="determine_the_currently_running_version_of_enmasse">A.2. Determine the currently running version of EnMasse</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Determine the <code>enmasse-operator</code> pod name:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get pods | grep enmasse-operator</pre>
</div>
</div>
</li>
<li>
<p>Print the <code>VERSION</code> environment of the <code>enmasse-operator</code> pod:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc rsh <em>enmasse-operator-....</em> env | grep VERSION</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>VERSION</code> corresponds to the major.minor version of EnMasse, whereas <code>MAVEN_VERSION</code> corresponds to the build number.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="unable_to_find_a_custom_address_space_plan">A.3. Unable to find a custom address space plan</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Ensure that the address space plan was created in the namespace where EnMasse is installed.</p>
</li>
<li>
<p>Ensure that the address space plan has passed validation and is in the <code>Active</code> phase:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspaceplans -o wide -n enmasse-infra</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="unable_to_find_a_custom_address_plan">A.4. Unable to find a custom address plan</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Ensure that the address plan was created in the namespace where EnMasse is installed.</p>
</li>
<li>
<p>Ensure that the address plan has passed validation and is in the <code>Active</code> phase:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressplans -o wide -n enmasse-infra</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="address_space_is_not_ready_and_clients_are_unable_to_connect_to_messaging_endpoints">A.5. Address space is not ready and clients are unable to connect to messaging endpoints</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Check the address space status message for errors:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get addressspace <em>myspace</em> -o wide</pre>
</div>
</div>
</li>
<li>
<p>Check address space controller logs for errors:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc logs deployment/address-space-controller</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="addresses_are_not_getting_ready">A.6. Addresses are not getting ready</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Check the address status message for errors:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get address <em>myspace.myaddress</em> -o wide</pre>
</div>
</div>
</li>
<li>
<p>If using the <code>brokered</code> address space, check the <code>agent</code> pod logs for errors:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc logs deployment/agent.<em>uuid</em></pre>
</div>
</div>
<div class="paragraph">
<p>If using the <code>standard</code> address space, check the <code>admin</code> pod logs for errors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc logs deployment/admin.<em>uuid</em> -c standard-controller
oc logs deployment/admin.<em>uuid</em> -c agent</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ref-resources-table-service-admin-messaging">Appendix B: EnMasse resources for service administrators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following table describes the EnMasse resources that pertain to the service administrator role.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. EnMasse service administrator resources table</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Resource</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>addressplans</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the address plan.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>addressspaceplans</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the address space plan.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>addressspaceschemas</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Defines the service characteristics available to an <code>addresspace</code>. An <code>addressspace</code> refers to one <code>addressspaceschema</code>. <code>standard</code> and <code>brokered</code> are predefined <code>addressspaceschemas</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>brokeredinfraconfigs</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the infrastructure configuration for brokered address spaces. For more information see <a href="http://enmasse.io/documentation/master/openshift.html#ref-brokered-infra-config-fields-messaging">Brokered infrastructure configuration fields table</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>standardinfraconfigs</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the infrastructure configuration for standard address spaces. For more information see <a href="http://enmasse.io/documentation/master/openshift.html#ref-standard-infra-config-fields-messaging">Standard infrastructure configuration fields table</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="ref-resources-table-messaging-tenant-messaging">Appendix C: EnMasse resources for messaging tenants</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following table describes the EnMasse resources that pertain to the messaging tenant role.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. EnMasse messaging tenant resources table</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Resource</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>addresses</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the address.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>addressspaces</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the address space.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>messagingusers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the authorization policy that controls which addresses may be used and the operations that may be performed on those addresses.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="ref-brokered-infra-config-fields-messaging">Appendix D: Brokered infrastructure configuration fields</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This table shows the fields available for the brokered infrastructure configuration and a brief description.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Brokered infrastructure configuration fields table</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Field</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Description</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>version</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the EnMasse version used. When upgrading, EnMasse uses this field to determine whether to upgrade the infrastructure to the requested version.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>admin.resources.memory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the amount of memory allocated to the admin Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>admin.podTemplate.metadata.labels</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the labels added to the admin Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>admin.podTemplate.spec.affinity</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the affinity settings for the admin Pod so you can specify where on particular nodes a Pod runs, or if it cannot run together with other instances.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>admin.podTemplate.spec.priorityClassName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the priority class to use for the admin Pod so you can prioritize admin Pods over other Pods in the OpenShift cluster.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>admin.podTemplate.spec.tolerations</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the toleration settings for the admin Pod, which allows this Pod to run on certain nodes that other Pods cannot run on.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.addressFullPolicy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the action taken when a queue is full: <code>BLOCK</code>, <code>FAIL</code>, <code>PAGE</code>, <code>DROP</code>. The default value is <code>PAGE</code>. For more information see the <a href="https://activemq.apache.org/artemis/docs/latest/address-model.html" target="_blank" rel="noopener">Apache ActiveMQ Artemis documentation</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.globalMaxSize</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the maximum amount of memory used for queues in the broker.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.resources.memory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the amount of memory allocated to the broker.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.resources.storage</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the amount of storage requested for the broker.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.metadata.labels</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the labels added to the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.affinity</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the affinity settings for the broker Pod so you can specify where on particular nodes a Pod runs, or if it cannot run together with other instances.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.priorityClassName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the priority class to use for the broker Pod so you can prioritize broker Pods over other Pods in the OpenShift cluster.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.tolerations</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the toleration settings for the broker Pod, which allows this Pod to run on certain nodes that other Pods cannot run on.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.securityContext</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cluster_administration/index#admin-guide-manage-rbac">security context</a> for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.env</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies environment variables for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.livenessProbe.failureThreshold</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the number of times that OpenShift tries when a broker Pod starts and the probe fails before restarting the container.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.livenessProbe.initialDelaySeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe delay value in seconds for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.livenessProbe.timeoutSeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe timeout value in seconds for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.readinessProbe.failureThreshold</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the number of times that OpenShift tries when a broker Pod starts and the probe fails before the Pod is marked <code>Unready</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.readinessProbe.initialDelaySeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe delay value in seconds for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.readinessProbe.timeoutSeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe timeout value in seconds for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.resources</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies broker Pod resource requests and limits for CPU and memory.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.storageClassName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies what storage class to use for the persistent volume for the broker.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.updatePersistentVolumeClaim</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the persistent volume supports resizing, setting this value to <code>true</code> allows the broker storage to be resized.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="ref-standard-infra-config-fields-messaging">Appendix E: Standard infrastructure configuration fields</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This table shows the fields available for the standard infrastructure configuration and a brief description.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Standard infrastructure configuration fields table</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Field</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Description</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>version</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the EnMasse version used. When upgrading, EnMasse uses this field to determine whether to upgrade the infrastructure to the requested version.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>admin.resources.memory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the amount of memory allocated to the admin Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>admin.podTemplate.metadata.labels</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the labels added to the admin Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>admin.podTemplate.spec.affinity</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the affinity settings for the admin Pod so you can specify where on particular nodes a Pod runs, or if it cannot run together with other instances.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>admin.podTemplate.spec.priorityClassName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the priority class to use for the admin Pod so you can prioritize admin pods over other Pods in the OpenShift cluster.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>admin.podTemplate.spec.tolerations</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the toleration settings for the admin Pod, which allow this Pod to run on certain nodes on which other Pods cannot run.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.addressFullPolicy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the action taken when a queue is full: <code>BLOCK</code>, <code>FAIL</code>, <code>PAGE</code>, <code>DROP</code>. The default value is <code>PAGE</code>. For more information see the <a href="https://activemq.apache.org/artemis/docs/latest/address-model.html" target="_blank" rel="noopener">Apache ActiveMQ Artemis documentation</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.globalMaxSize</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the maximum amount of memory used for queues in the broker.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.resources.memory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the amount of memory allocated to the broker.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.resources.storage</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the amount of storage requested for the broker.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.metadata.labels</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the labels added to the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.affinity</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the affinity settings for the broker Pod so you can specify where on particular nodes a Pod runs, or if it cannot run together with other instances.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.priorityClassName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the priority class to use for the broker Pod so you can prioritize broker Pods over other Pods in the OpenShift cluster.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.tolerations</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the toleration settings for the broker Pod, which allow this Pod to run on certain nodes on which other Pods cannot run.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.securityContext</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cluster_administration/index#admin-guide-manage-rbac">security context</a> for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.env</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies environment variables for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.livenessProbe.failureThreshold</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the number of times that OpenShift tries when a broker Pod starts and the probe fails before restarting the container.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.livenessProbe.initialDelaySeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe delay value in seconds for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.livenessProbe.timeoutSeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe timeout value in seconds for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.readinessProbe.failureThreshold</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the number of times that OpenShift tries when a broker Pod starts and the probe fails before the Pod is marked <code>Unready</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.readinessProbe.initialDelaySeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe delay value in seconds for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.readinessProbe.timeoutSeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe timeout value in seconds for the broker Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.containers.resources</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies broker Pod resource requests and limits for CPU and memory.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.connectorIdleTimeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the AMQP idle timeout to use for connection to router.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.connectorWorkerThreads</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the number of worker threads of the connection to the router.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.storageClassName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies what storage class to use for the persistent volume for the broker.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.updatePersistentVolumeClaim</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the persistent volume supports resizing, setting this value to <code>true</code> allows the broker storage to be resized.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.resources.memory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the amount of memory allocated to the router.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.linkCapacity</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the default number of credits issued on AMQP links for the router.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.handshakeTimeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the amount of time in seconds to wait for the secure handshake to be initiated.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.minReplicas</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the minimum number of router Pods to run; a minimum of two are required for high availability (HA) configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.metadata.labels</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the labels added to the router Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.spec.affinity</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the affinity settings for the router Pod so you can specify where on particular nodes a pod runs, or if it cannot run together with other instances.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.spec.priorityClassName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the priority class to use for the router Pod so you can prioritize router pods over other pods in the OpenShift cluster.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.spec.tolerations</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the toleration settings for the router Pod, which allow this Pod to run on certain nodes on which other Pods cannot run.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>broker.podTemplate.spec.securityContext</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cluster_administration/index#admin-guide-manage-rbac">security context</a> for the router Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.spec.containers.env</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the environment variables for the router Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.spec.containers.livenessProbe.failureThreshold</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the number of times that OpenShift tries when a router Pod starts and the probe fails before restarting the container.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.spec.containers.livenessProbe.initialDelaySeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe delay value in seconds for the router Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.spec.containers.livenessProbe.timeoutSeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe timeout value in seconds for the router Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.spec.containers.readinessProbe.failureThreshold</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the number of times that OpenShift tries when a router Pod starts and the probe fails before the Pod is marked <code>Unready</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.spec.containers.readinessProbe.initialDelaySeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe delay value in seconds for the router Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.spec.containers.readinessProbe.timeoutSeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the probe timeout value in seconds for the router Pod.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.podTemplate.spec.containers.resources</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies router Pod resource requests and limits for CPU and memory.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.idleTimeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the AMQP idle timeout to use for all router listeners.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.workerThreads</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the number of worker threads to use for the router.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.policy.maxConnections</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the maximum number of router connections allowed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.policy.maxConnectionsPerUser</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the maximum number of router connections allowed per user.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.policy.maxConnectionsPerHost</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the maximum number of router connections allowed per host.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.policy.maxSessionsPerConnection</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the maximum number of sessions allowed per router connection.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.policy.maxSendersPerConnection</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the maximum number of senders allowed per router connection.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>router.policy.maxReceiversPerConnection</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the maximum number of receivers allowed per router connection.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="rest_api_reference">Appendix F: REST API reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="enmasse_rest_api">F.1. EnMasse REST API</h3>
<div class="sect3">
<h4 id="_overview">F.1.1. Overview</h4>
<div class="paragraph">
<p>This is the EnMasse API specification.</p>
</div>
<div class="sect4">
<h5 id="version_information">Version information</h5>
<div class="paragraph">
<p><em>Version</em> : 0.32-SNAPSHOT</p>
</div>
</div>
<div class="sect4">
<h5 id="uri_scheme">URI scheme</h5>
<div class="paragraph">
<p><em>Schemes</em> : HTTPS</p>
</div>
</div>
<div class="sect4">
<h5 id="tags">Tags</h5>
<div class="ulist">
<ul>
<li>
<p>addresses : Operating on Addresses.</p>
</li>
<li>
<p>addressplans : Operating on AddressPlans.</p>
</li>
<li>
<p>addressspaceplans : Operating on AddressSpacePlans.</p>
</li>
<li>
<p>addressspaces : Operate on AddressSpaces</p>
</li>
<li>
<p>brokeredinfraconfigs : Operating on BrokeredInfraConfigs.</p>
</li>
<li>
<p>messagingusers : Operating on MessagingUsers.</p>
</li>
<li>
<p>standardinfraconfigs : Operating on StandardInfraConfigs.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="external_docs">External Docs</h5>
<div class="paragraph">
<p><em>Description</em> : Find out more about EnMasse<br>
<em>URL</em> : <a href="https://enmasse.io/documentation/" class="bare">https://enmasse.io/documentation/</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_paths">F.1.2. Paths</h4>
<div class="sect4">
<h5 id="_createadminenmassev1beta2namespacedaddressspaceplan">POST /apis/admin.enmasse.io/v1beta2/namespaces/{namespace}/addressspaceplans</h5>
<div class="sect5">
<h6 id="description">Description</h6>
<div class="paragraph">
<p>create an AddressSpacePlan</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>body</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressspaceplan">io.enmasse.admin.v1beta2.AddressSpacePlan</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressspaceplan">io.enmasse.admin.v1beta2.AddressSpacePlan</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>201</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Created</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressspaceplan">io.enmasse.admin.v1beta2.AddressSpacePlan</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="consumes">Consumes</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="produces">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_2">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addressspaceplan</p>
</li>
<li>
<p>admin</p>
</li>
<li>
<p>enmasse_v1beta2</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_listadminenmassev1beta2namespacedaddresspaceplan">GET /apis/admin.enmasse.io/v1beta2/namespaces/{namespace}/addressspaceplans</h5>
<div class="sect5">
<h6 id="description_2">Description</h6>
<div class="paragraph">
<p>list objects of kind AddressSpacePlan</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_2">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Query</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>labelSelector</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>A selector to restrict the list of returned objects by their labels. Defaults to everything.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_2">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressspaceplanlist">io.enmasse.admin.v1beta2.AddressSpacePlanList</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_2">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_3">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addressspaceplan</p>
</li>
<li>
<p>admin</p>
</li>
<li>
<p>enmasse_v1beta2</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_readadminenmassev1beta2namespacedaddressspaceplan">GET /apis/admin.enmasse.io/v1beta2/namespaces/{namespace}/addressspaceplans/{name}</h5>
<div class="sect5">
<h6 id="description_3">Description</h6>
<div class="paragraph">
<p>read the specified AddressSpacePlan</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_3">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of AddressSpacePlan to read.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_3">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressspaceplan">io.enmasse.admin.v1beta2.AddressSpacePlan</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>404</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Not found</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="consumes_2">Consumes</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="produces_3">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_4">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addressspaceplan</p>
</li>
<li>
<p>admin</p>
</li>
<li>
<p>enmasse_v1beta2</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_replaceadminenmassev1beta2namespacedaddressspaceplan">PUT /apis/admin.enmasse.io/v1beta2/namespaces/{namespace}/addressspaceplans/{name}</h5>
<div class="sect5">
<h6 id="description_4">Description</h6>
<div class="paragraph">
<p>replace the specified AddressSpacePlan</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_4">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of AddressSpacePlan to replace.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>body</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressspaceplan">io.enmasse.admin.v1beta2.AddressSpacePlan</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_4">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressspaceplan">io.enmasse.admin.v1beta2.AddressSpacePlan</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>201</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Created</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressspaceplan">io.enmasse.admin.v1beta2.AddressSpacePlan</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_4">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_5">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addressspaceplan</p>
</li>
<li>
<p>admin</p>
</li>
<li>
<p>enmasse_v1beta2</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_deleteadminenmassev1beta2namespacedaddressspaceplan">DELETE /apis/admin.enmasse.io/v1beta2/namespaces/{namespace}/addressspaceplans/{name}</h5>
<div class="sect5">
<h6 id="description_5">Description</h6>
<div class="paragraph">
<p>delete an AddressSpacePlan</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_5">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of AddressSpacePlan to delete.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_5">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_status">Status</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>404</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Not found</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_5">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_6">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addressspaceplan</p>
</li>
<li>
<p>admin</p>
</li>
<li>
<p>enmasse_v1beta2</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_createenmassev1alpha1namespacedaddress">POST /apis/enmasse.io/v1beta1/namespaces/{namespace}/addresses</h5>
<div class="sect5">
<h6 id="description_6">Description</h6>
<div class="paragraph">
<p>create an Address</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_6">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>body</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_address">io.enmasse.v1beta1.Address</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_6">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_address">io.enmasse.v1beta1.Address</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>201</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Created</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_address">io.enmasse.v1beta1.Address</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="consumes_3">Consumes</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="produces_6">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_7">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addresses</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_listenmassev1alpha1namespacedaddress">GET /apis/enmasse.io/v1beta1/namespaces/{namespace}/addresses</h5>
<div class="sect5">
<h6 id="description_7">Description</h6>
<div class="paragraph">
<p>list objects of kind Address</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_7">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Query</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>labelSelector</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>A selector to restrict the list of returned objects by their labels. Defaults to everything.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_7">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addresslist">io.enmasse.v1beta1.AddressList</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_7">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_8">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addresses</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_readenmassev1alpha1namespacedaddress">GET /apis/enmasse.io/v1beta1/namespaces/{namespace}/addresses/{name}</h5>
<div class="sect5">
<h6 id="description_8">Description</h6>
<div class="paragraph">
<p>read the specified Address</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_8">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of Address to read</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_8">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_address">io.enmasse.v1beta1.Address</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>404</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Not found</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="consumes_4">Consumes</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="produces_8">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_9">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addresses</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_replaceenmassev1alpha1namespacedaddress">PUT /apis/enmasse.io/v1beta1/namespaces/{namespace}/addresses/{name}</h5>
<div class="sect5">
<h6 id="description_9">Description</h6>
<div class="paragraph">
<p>replace the specified Address</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_9">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of Address to replace</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>body</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_address">io.enmasse.v1beta1.Address</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_9">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_address">io.enmasse.v1beta1.Address</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>201</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Created</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_address">io.enmasse.v1beta1.Address</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_9">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_10">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addresses</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_deleteenmassev1alpha1namespacedaddress">DELETE /apis/enmasse.io/v1beta1/namespaces/{namespace}/addresses/{name}</h5>
<div class="sect5">
<h6 id="description_10">Description</h6>
<div class="paragraph">
<p>delete an Address</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_10">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of Address to delete</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_10">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_status">Status</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>404</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Not found</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_10">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_11">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addresses</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_patchesenmassev1alpha1namespacedaddress">PATCH /apis/enmasse.io/v1beta1/namespaces/{namespace}/addresses/{name}</h5>
<div class="sect5">
<h6 id="description_11">Description</h6>
<div class="paragraph">
<p>patches (RFC6902) the specified Address</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_11">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of Address to replace</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>body</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_jsonpatchrequest">JsonPatchRequest</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_11">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_address">io.enmasse.v1beta1.Address</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="consumes_5">Consumes</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json-patch+json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="produces_11">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_12">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addresses</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_createenmassev1alpha1namespacedaddressspace">POST /apis/enmasse.io/v1beta1/namespaces/{namespace}/addressspaces</h5>
<div class="sect5">
<h6 id="description_12">Description</h6>
<div class="paragraph">
<p>create an AddressSpace</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_12">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>body</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspace">io.enmasse.v1beta1.AddressSpace</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_12">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspace">io.enmasse.v1beta1.AddressSpace</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>201</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Created</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspace">io.enmasse.v1beta1.AddressSpace</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="consumes_6">Consumes</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="produces_12">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_13">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addressspaces</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_listenmassev1alpha1namespacedaddressspace">GET /apis/enmasse.io/v1beta1/namespaces/{namespace}/addressspaces</h5>
<div class="sect5">
<h6 id="description_13">Description</h6>
<div class="paragraph">
<p>list objects of kind AddressSpace</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_13">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Query</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>labelSelector</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>A selector to restrict the list of returned objects by their labels. Defaults to everything.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_13">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacelist">io.enmasse.v1beta1.AddressSpaceList</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_13">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_14">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addressspaces</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_readenmassev1alpha1namespacedaddressspace">GET /apis/enmasse.io/v1beta1/namespaces/{namespace}/addressspaces/{name}</h5>
<div class="sect5">
<h6 id="description_14">Description</h6>
<div class="paragraph">
<p>read the specified AddressSpace</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_14">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of AddressSpace to read</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_14">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspace">io.enmasse.v1beta1.AddressSpace</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>404</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Not found</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="consumes_7">Consumes</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="produces_14">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_15">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addressspaces</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_replaceenmassev1alpha1namespacedaddressspace">PUT /apis/enmasse.io/v1beta1/namespaces/{namespace}/addressspaces/{name}</h5>
<div class="sect5">
<h6 id="description_15">Description</h6>
<div class="paragraph">
<p>replace the specified AddressSpace</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_15">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of AddressSpace to replace</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>body</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspace">io.enmasse.v1beta1.AddressSpace</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_15">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspace">io.enmasse.v1beta1.AddressSpace</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>201</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Created</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspace">io.enmasse.v1beta1.AddressSpace</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_15">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_16">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addressspaces</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_deleteenmassev1alpha1namespacedaddressspace">DELETE /apis/enmasse.io/v1beta1/namespaces/{namespace}/addressspaces/{name}</h5>
<div class="sect5">
<h6 id="description_16">Description</h6>
<div class="paragraph">
<p>delete an AddressSpace</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_16">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of AddressSpace to delete</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_16">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_status">Status</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>404</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Not found</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_16">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_17">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addressspaces</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_patchesenmassev1alpha1namespacedaddressspace">PATCH /apis/enmasse.io/v1beta1/namespaces/{namespace}/addressspaces/{name}</h5>
<div class="sect5">
<h6 id="description_17">Description</h6>
<div class="paragraph">
<p>patches (RFC6902) the specified AddressSpace</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_17">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of AddressSpace to replace</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>body</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_jsonpatchrequest">JsonPatchRequest</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_17">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspace">io.enmasse.v1beta1.AddressSpace</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="consumes_8">Consumes</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json-patch+json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="produces_17">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_18">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>addressspaces</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_createauthenmassev1alpha1namespacedmessaginguser">POST /apis/user.enmasse.io/v1beta1/namespaces/{namespace}/messagingusers</h5>
<div class="sect5">
<h6 id="description_18">Description</h6>
<div class="paragraph">
<p>create a MessagingUser</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_18">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>body</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_user_v1beta1_messaginguser">io.enmasse.user.v1beta1.MessagingUser</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_18">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_user_v1beta1_messaginguser">io.enmasse.user.v1beta1.MessagingUser</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>201</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Created</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_user_v1beta1_messaginguser">io.enmasse.user.v1beta1.MessagingUser</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="consumes_9">Consumes</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="produces_18">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_19">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>auth</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
<li>
<p>user</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_listauthenmassev1alpha1namespacedmessaginguser">GET /apis/user.enmasse.io/v1beta1/namespaces/{namespace}/messagingusers</h5>
<div class="sect5">
<h6 id="description_19">Description</h6>
<div class="paragraph">
<p>list objects of kind MessagingUser</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_19">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Query</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>labelSelector</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>A selector to restrict the list of returned objects by their labels. Defaults to everything.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_19">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_user_v1beta1_messaginguserlist">io.enmasse.user.v1beta1.MessagingUserList</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_19">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_20">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>auth</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
<li>
<p>user</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_readauthenmassev1alpha1namespacedmessaginguser">GET /apis/user.enmasse.io/v1beta1/namespaces/{namespace}/messagingusers/{name}</h5>
<div class="sect5">
<h6 id="description_20">Description</h6>
<div class="paragraph">
<p>read the specified MessagingUser</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_20">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of MessagingUser to read. Must include addressSpace and dot separator in the name (that is, 'myspace.user1').</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_20">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_user_v1beta1_messaginguser">io.enmasse.user.v1beta1.MessagingUser</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>404</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Not found</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="consumes_10">Consumes</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="produces_20">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_21">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>auth</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
<li>
<p>user</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_replaceauthenmassev1alpha1namespacedmessaginguser">PUT /apis/user.enmasse.io/v1beta1/namespaces/{namespace}/messagingusers/{name}</h5>
<div class="sect5">
<h6 id="description_21">Description</h6>
<div class="paragraph">
<p>replace the specified MessagingUser</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_21">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of MessagingUser to replace. Must include addressSpace and dot separator in the name (that is, 'myspace.user1').</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>body</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_user_v1beta1_messaginguser">io.enmasse.user.v1beta1.MessagingUser</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_21">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_user_v1beta1_messaginguser">io.enmasse.user.v1beta1.MessagingUser</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>201</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Created</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_user_v1beta1_messaginguser">io.enmasse.user.v1beta1.MessagingUser</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_21">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_22">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>auth</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
<li>
<p>user</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_deleteauthenmassev1alpha1namespacedmessaginguser">DELETE /apis/user.enmasse.io/v1beta1/namespaces/{namespace}/messagingusers/{name}</h5>
<div class="sect5">
<h6 id="description_22">Description</h6>
<div class="paragraph">
<p>delete a MessagingUser</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_22">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of MessagingUser to delete. Must include addressSpace and dot separator in the name (that is, 'myspace.user1').</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_22">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_status">Status</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>404</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Not found</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="produces_22">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_23">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>auth</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
<li>
<p>user</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_patchesenmassev1alpha1namespacedmessaginguser">PATCH /apis/user.enmasse.io/v1beta1/namespaces/{namespace}/messagingusers/{name}</h5>
<div class="sect5">
<h6 id="description_23">Description</h6>
<div class="paragraph">
<p>patches (RFC6902) the specified MessagingUser</p>
</div>
</div>
<div class="sect5">
<h6 id="parameters_23">Parameters</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of MessagingUser to replace. Must include addressSpace and dot separator in the name (that is, 'myspace.user1'</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Path</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object name and auth scope, such as for teams and projects</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>body</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_jsonpatchrequest">JsonPatchRequest</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="responses_23">Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>OK</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_user_v1beta1_messaginguser">io.enmasse.user.v1beta1.MessagingUser</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>401</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Unauthorized</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>No Content</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="consumes_11">Consumes</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json-patch+json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="produces_23">Produces</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="tags_24">Tags</h6>
<div class="ulist">
<ul>
<li>
<p>auth</p>
</li>
<li>
<p>enmasse_v1beta1</p>
</li>
<li>
<p>user</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_definitions">F.1.3. Definitions</h4>
<div class="sect4">
<h5 id="_jsonpatchrequest">JsonPatchRequest</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>document</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>patch</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_patch">Patch</a> &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_objectmeta">ObjectMeta</h5>
<div class="paragraph">
<p>ObjectMeta is metadata that all persisted resources must have, which includes all objects users must create.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespace</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_patch">Patch</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>from</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Required for operations copy, replace</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>op</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (add, remove, replace, move, copy, test)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>path</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Slash separated format</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>value</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Required for operations add, replace, test</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_status">Status</h5>
<div class="paragraph">
<p>Status is a return value for calls that do not return other objects.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>code</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Suggested HTTP return code for this status, 0 if not set.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_brokeredinfraconfig">io.enmasse.admin.v1beta1.BrokeredInfraConfig</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (admin.enmasse.io/v1beta1)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (BrokeredInfraConfig)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>metadata</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_objectmeta">ObjectMeta</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>spec</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_brokeredinfraconfigspec">io.enmasse.admin.v1beta1.BrokeredInfraConfigSpec</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_brokeredinfraconfiglist">io.enmasse.admin.v1beta1.BrokeredInfraConfigList</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (admin.enmasse.io/v1beta1)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>items</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_admin_v1beta1_brokeredinfraconfig">io.enmasse.admin.v1beta1.BrokeredInfraConfig</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (BrokeredInfraConfigList)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_brokeredinfraconfigspec">io.enmasse.admin.v1beta1.BrokeredInfraConfigSpec</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>admin</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_brokeredinfraconfigspecadmin">io.enmasse.admin.v1beta1.BrokeredInfraConfigSpecAdmin</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>broker</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_brokeredinfraconfigspecbroker">io.enmasse.admin.v1beta1.BrokeredInfraConfigSpecBroker</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>networkPolicy</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_brokeredinfraconfigspec_networkpolicy">networkPolicy</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>version</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta1_brokeredinfraconfigspec_networkpolicy" class="paragraph">
<p><strong>networkPolicy</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>egress</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_k8s_api_networking_v1_networkpolicyegressrule">io.k8s.api.networking.v1.NetworkPolicyEgressRule</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>ingress</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_k8s_api_networking_v1_networkpolicyingressrule">io.k8s.api.networking.v1.NetworkPolicyIngressRule</a> &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_brokeredinfraconfigspecadmin">io.enmasse.admin.v1beta1.BrokeredInfraConfigSpecAdmin</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>podTemplate</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_infraconfigpodspec">io.enmasse.admin.v1beta1.InfraConfigPodSpec</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>resources</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_brokeredinfraconfigspecadmin_resources">resources</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta1_brokeredinfraconfigspecadmin_resources" class="paragraph">
<p><strong>resources</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>memory</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_brokeredinfraconfigspecbroker">io.enmasse.admin.v1beta1.BrokeredInfraConfigSpecBroker</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>addressFullPolicy</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (PAGE, BLOCK, FAIL)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>podTemplate</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_infraconfigpodspec">io.enmasse.admin.v1beta1.InfraConfigPodSpec</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>resources</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_brokeredinfraconfigspecbroker_resources">resources</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>storageClassName</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>updatePersistentVolumeClaim</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta1_brokeredinfraconfigspecbroker_resources" class="paragraph">
<p><strong>resources</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>memory</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>storage</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_infraconfigpodspec">io.enmasse.admin.v1beta1.InfraConfigPodSpec</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>metadata</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_infraconfigpodspec_metadata">metadata</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>spec</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_infraconfigpodspec_spec">spec</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta1_infraconfigpodspec_metadata" class="paragraph">
<p><strong>metadata</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>labels</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta1_infraconfigpodspec_spec" class="paragraph">
<p><strong>spec</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>affinity</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>containers</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_admin_v1beta1_infraconfigpodspec_containers">containers</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>priorityClassName</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>securityContext</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>tolerations</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; object &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta1_infraconfigpodspec_containers" class="paragraph">
<p><strong>containers</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>resources</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_standardinfraconfig">io.enmasse.admin.v1beta1.StandardInfraConfig</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (admin.enmasse.io/v1beta1)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (StandardInfraConfig)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>metadata</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_objectmeta">ObjectMeta</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>spec</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_standardinfraconfigspec">io.enmasse.admin.v1beta1.StandardInfraConfigSpec</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_standardinfraconfiglist">io.enmasse.admin.v1beta1.StandardInfraConfigList</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (admin.enmasse.io/v1beta1)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>items</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_admin_v1beta1_standardinfraconfig">io.enmasse.admin.v1beta1.StandardInfraConfig</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (StandardInfraConfigList)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_standardinfraconfigspec">io.enmasse.admin.v1beta1.StandardInfraConfigSpec</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>admin</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_standardinfraconfigspecadmin">io.enmasse.admin.v1beta1.StandardInfraConfigSpecAdmin</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>broker</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_standardinfraconfigspecbroker">io.enmasse.admin.v1beta1.StandardInfraConfigSpecBroker</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>networkPolicy</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_standardinfraconfigspec_networkpolicy">networkPolicy</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>router</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_standardinfraconfigspecrouter">io.enmasse.admin.v1beta1.StandardInfraConfigSpecRouter</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>version</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta1_standardinfraconfigspec_networkpolicy" class="paragraph">
<p><strong>networkPolicy</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>egress</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_k8s_api_networking_v1_networkpolicyegressrule">io.k8s.api.networking.v1.NetworkPolicyEgressRule</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>ingress</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_k8s_api_networking_v1_networkpolicyingressrule">io.k8s.api.networking.v1.NetworkPolicyIngressRule</a> &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_standardinfraconfigspecadmin">io.enmasse.admin.v1beta1.StandardInfraConfigSpecAdmin</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>podTemplate</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_infraconfigpodspec">io.enmasse.admin.v1beta1.InfraConfigPodSpec</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>resources</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_standardinfraconfigspecadmin_resources">resources</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta1_standardinfraconfigspecadmin_resources" class="paragraph">
<p><strong>resources</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>memory</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_standardinfraconfigspecbroker">io.enmasse.admin.v1beta1.StandardInfraConfigSpecBroker</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>addressFullPolicy</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (PAGE, BLOCK, FAIL)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>connectorIdleTimeout</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>connectorWorkerThreads</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>podTemplate</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_infraconfigpodspec">io.enmasse.admin.v1beta1.InfraConfigPodSpec</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>resources</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_standardinfraconfigspecbroker_resources">resources</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>storageClassName</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>updatePersistentVolumeClaim</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta1_standardinfraconfigspecbroker_resources" class="paragraph">
<p><strong>resources</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>memory</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>storage</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta1_standardinfraconfigspecrouter">io.enmasse.admin.v1beta1.StandardInfraConfigSpecRouter</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>idleTimeout</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>initialHandshakeTimeout</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>linkCapacity</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>minAvailable</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>minReplicas</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>podTemplate</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_infraconfigpodspec">io.enmasse.admin.v1beta1.InfraConfigPodSpec</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>policy</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_standardinfraconfigspecrouter_policy">policy</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>resources</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta1_standardinfraconfigspecrouter_resources">resources</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>workerThreads</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta1_standardinfraconfigspecrouter_policy" class="paragraph">
<p><strong>policy</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>maxConnections</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>maxConnectionsPerHost</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>maxConnectionsPerUser</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>maxReceiversPerConnection</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>maxSendersPerConnection</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>maxSessionsPerConnection</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta1_standardinfraconfigspecrouter_resources" class="paragraph">
<p><strong>resources</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>memory</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta2_addressplan">io.enmasse.admin.v1beta2.AddressPlan</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (admin.enmasse.io/v1beta2)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (AddressPlan)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>metadata</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_objectmeta">ObjectMeta</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>spec</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressplanspec">io.enmasse.admin.v1beta2.AddressPlanSpec</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta2_addressplanlist">io.enmasse.admin.v1beta2.AddressPlanList</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (admin.enmasse.io/v1beta2)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>items</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_admin_v1beta2_addressplan">io.enmasse.admin.v1beta2.AddressPlan</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (AddressPlanList)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta2_addressplanspec">io.enmasse.admin.v1beta2.AddressPlanSpec</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>addressType</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>displayName</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>displayOrder</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>longDescription</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>partitions</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>resources</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressplanspec_resources">resources</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>shortDescription</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta2_addressplanspec_resources" class="paragraph">
<p><strong>resources</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>broker</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>number</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>router</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>number</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta2_addressspaceplan">io.enmasse.admin.v1beta2.AddressSpacePlan</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (admin.enmasse.io/v1beta2)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (AddressSpacePlan)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>metadata</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_objectmeta">ObjectMeta</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>spec</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressspaceplanspec">io.enmasse.admin.v1beta2.AddressSpacePlanSpec</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta2_addressspaceplanlist">io.enmasse.admin.v1beta2.AddressSpacePlanList</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (admin.enmasse.io/v1beta2)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>items</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_admin_v1beta2_addressspaceplan">io.enmasse.admin.v1beta2.AddressSpacePlan</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (AddressSpacePlanList)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_admin_v1beta2_addressspaceplanspec">io.enmasse.admin.v1beta2.AddressSpacePlanSpec</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>addressPlans</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>addressSpaceType</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>displayName</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>displayOrder</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>infraConfigRef</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>longDescription</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>resourceLimits</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_admin_v1beta2_addressspaceplanspec_resourcelimits">resourceLimits</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>shortDescription</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_admin_v1beta2_addressspaceplanspec_resourcelimits" class="paragraph">
<p><strong>resourceLimits</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>aggregate</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>number</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>broker</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>number</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>router</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>number</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_user_v1beta1_messaginguser">io.enmasse.user.v1beta1.MessagingUser</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (user.enmasse.io/v1beta1)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (MessagingUser)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>metadata</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_objectmeta">ObjectMeta</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>spec</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_user_v1beta1_userspec">io.enmasse.user.v1beta1.UserSpec</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_user_v1beta1_messaginguserlist">io.enmasse.user.v1beta1.MessagingUserList</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (user.enmasse.io/v1beta1)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>items</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_user_v1beta1_messaginguser">io.enmasse.user.v1beta1.MessagingUser</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (MessagingUserList)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_user_v1beta1_userspec">io.enmasse.user.v1beta1.UserSpec</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>authentication</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_user_v1beta1_userspec_authentication">authentication</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>authorization</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_user_v1beta1_userspec_authorization">authorization</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>username</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_user_v1beta1_userspec_authentication" class="paragraph">
<p><strong>authentication</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>federatedUserid</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>User id of the user to federate when 'federated' type is specified.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>federatedUsername</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>User name of the user to federate when 'federated' type is specified.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>password</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Base64 encoded value of password when 'password' type is specified.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>provider</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of provider to use for federated identity when 'federated' type is specified.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>type</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (password, serviceaccount)</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_user_v1beta1_userspec_authorization" class="paragraph">
<p><strong>authorization</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>addresses</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>operations</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; enum (send, recv, view, manage) &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_address">io.enmasse.v1beta1.Address</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (enmasse.io/v1beta1)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (Address)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>metadata</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_objectmeta">ObjectMeta</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>spec</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspec">io.enmasse.v1beta1.AddressSpec</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>status</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressstatus">io.enmasse.v1beta1.AddressStatus</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addresslist">io.enmasse.v1beta1.AddressList</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Default</strong> : <code>"enmasse.io/v1beta1"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (enmasse.io/v1beta1)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>items</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_address">io.enmasse.v1beta1.Address</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (AddressList)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addressspace">io.enmasse.v1beta1.AddressSpace</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (enmasse.io/v1beta1)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (AddressSpace)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>metadata</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_objectmeta">ObjectMeta</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>spec</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespec">io.enmasse.v1beta1.AddressSpaceSpec</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>status</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacestatus">io.enmasse.v1beta1.AddressSpaceStatus</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addressspacelist">io.enmasse.v1beta1.AddressSpaceList</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>apiVersion</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Default</strong> : <code>"enmasse.io/v1beta1"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (enmasse.io/v1beta1)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>items</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressspace">io.enmasse.v1beta1.AddressSpace</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (AddressSpaceList)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addressspacespec">io.enmasse.v1beta1.AddressSpaceSpec</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>authenticationService</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespec_authenticationservice">authenticationService</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>connectors</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>List of connectors to create.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressspacespecconnector">io.enmasse.v1beta1.AddressSpaceSpecConnector</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>endpoints</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressspacespec_endpoints">endpoints</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>networkPolicy</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespec_networkpolicy">networkPolicy</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>plan</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>type</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacetype">io.enmasse.v1beta1.AddressSpaceType</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespec_authenticationservice" class="paragraph">
<p><strong>authenticationService</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>overrides</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespec_overrides">overrides</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>type</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespec_overrides" class="paragraph">
<p><strong>overrides</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>host</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>port</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>realm</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespec_endpoints" class="paragraph">
<p><strong>endpoints</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>cert</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespec_cert">cert</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>exports</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressspacespec_exports">exports</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>expose</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespec_expose">expose</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>service</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespec_cert" class="paragraph">
<p><strong>cert</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>provider</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>secretName</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>tlsCert</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>tlsKey</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespec_exports" class="paragraph">
<p><strong>exports</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>kind</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (ConfigMap, Secret, Service)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespec_expose" class="paragraph">
<p><strong>expose</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>annotations</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>loadBalancerPorts</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>loadBalancerSourceRanges</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>routeHost</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>routeServicePort</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>routeTlsTermination</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>type</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (route, loadbalancer)</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespec_networkpolicy" class="paragraph">
<p><strong>networkPolicy</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>egress</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_k8s_api_networking_v1_networkpolicyegressrule">io.k8s.api.networking.v1.NetworkPolicyEgressRule</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>ingress</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_k8s_api_networking_v1_networkpolicyingressrule">io.k8s.api.networking.v1.NetworkPolicyIngressRule</a> &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addressspacespecconnector">io.enmasse.v1beta1.AddressSpaceSpecConnector</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>addresses</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Addresses to make be accessible via this address space.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressspacespecconnector_addresses">addresses</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>credentials</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Credentials used when connecting to endpoints. Either 'username' and 'password', or 'secret' must be defined.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespecconnector_credentials">credentials</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>endpointHosts</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>List of hosts that should be connected to. Must contain at least 1 entry.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressspacespecconnector_endpointhosts">endpointHosts</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of the connector.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>tls</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>TLS settings for the connectors. If not specified, TLS will not be used.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespecconnector_tls">tls</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_addresses" class="paragraph">
<p><strong>addresses</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Identifier of address pattern. Used to uniquely identify a pattern</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>pattern</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Pattern used to match addresses. The pattern will be prefixed by the connector name and a forward slash ('myconnector/'). A pattern consists of one or more tokens separated by a forward slash /. A token can be one of the following: a * character, a # character, or a sequence of characters that do not include /, *, or #. The * token matches any single token. The # token matches zero or more tokens. * has higher precedence than #, and exact match has the highest precedence.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_credentials" class="paragraph">
<p><strong>credentials</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>password</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Password to use for connector. Either 'value' or 'secret' must be specified.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespecconnector_password">password</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>username</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Username to use for connector. Either 'value' or 'secret' must be specified.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespecconnector_username">username</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_password" class="paragraph">
<p><strong>password</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>value</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>valueFromSecret</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespecconnector_password_valuefromsecret">valueFromSecret</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_password_valuefromsecret" class="paragraph">
<p><strong>valueFromSecret</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>key</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Key to use for looking up password entry.<br>
<strong>Default</strong> : <code>"password"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of Secret containing password.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_username" class="paragraph">
<p><strong>username</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>value</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>valueFromSecret</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespecconnector_username_valuefromsecret">valueFromSecret</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_username_valuefromsecret" class="paragraph">
<p><strong>valueFromSecret</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>key</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Key to use for looking up username entry.<br>
<strong>Default</strong> : <code>"username"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of Secret containing username.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_endpointhosts" class="paragraph">
<p><strong>endpointHosts</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>host</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Host to connect to.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>port</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Port to connect to.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_tls" class="paragraph">
<p><strong>tls</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>caCert</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>CA certificate to be used by the connector. Either 'value' or 'secret'.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespecconnector_cacert">caCert</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>clientCert</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Client certificate to be used by the connector. Either 'value' or 'secret'.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespecconnector_clientcert">clientCert</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_cacert" class="paragraph">
<p><strong>caCert</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>value</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>PEM encoded value of CA certificate</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>valueFromSecret</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Secret containing CA certificate to be used by the connector.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespecconnector_cacert_valuefromsecret">valueFromSecret</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_cacert_valuefromsecret" class="paragraph">
<p><strong>valueFromSecret</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>key</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Key to use for looking up CA certificate entry.<br>
<strong>Default</strong> : <code>"ca.crt"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of Secret containing CA certificate.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_clientcert" class="paragraph">
<p><strong>clientCert</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>value</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>PEM encoded value of client certificate</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>valueFromSecret</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Secret containing client certificate to be used by the connector.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addressspacespecconnector_clientcert_valuefromsecret">valueFromSecret</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacespecconnector_clientcert_valuefromsecret" class="paragraph">
<p><strong>valueFromSecret</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>key</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Key to use for looking up client certificate entry.<br>
<strong>Default</strong> : <code>"ca.crt"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of Secret containing client certificate.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addressspacestatus">io.enmasse.v1beta1.AddressSpaceStatus</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>connectors</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>List of connectors with status.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressspacestatusconnector">io.enmasse.v1beta1.AddressSpaceStatusConnector</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>endpointStatuses</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressspacestatus_endpointstatuses">endpointStatuses</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>isReady</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>messages</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacestatus_endpointstatuses" class="paragraph">
<p><strong>endpointStatuses</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>cert</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>externalHost</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>externalPorts</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressspacestatus_externalports">externalPorts</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>serviceHost</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>servicePorts</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressspacestatus_serviceports">servicePorts</a> &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacestatus_externalports" class="paragraph">
<p><strong>externalPorts</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>port</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="_io_enmasse_v1beta1_addressspacestatus_serviceports" class="paragraph">
<p><strong>servicePorts</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>port</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addressspacestatusconnector">io.enmasse.v1beta1.AddressSpaceStatusConnector</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>isReady</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>'true' if connector is operating as expected, 'false' if not.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>messages</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Messages describing the connector state.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of connector.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addressspacetype">io.enmasse.v1beta1.AddressSpaceType</h5>
<div class="paragraph">
<p>AddressSpaceType is the type of address space (standard, brokered). Each type supports different types of addresses and semantics for those types.</p>
</div>
<div class="paragraph">
<p><em>Type</em> : enum (standard, brokered)</p>
</div>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addressspec">io.enmasse.v1beta1.AddressSpec</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>address</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>forwarders</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>List of forwarders to enable for this address.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressspecforwarder">io.enmasse.v1beta1.AddressSpecForwarder</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>plan</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>type</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_enmasse_v1beta1_addresstype">io.enmasse.v1beta1.AddressType</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addressspecforwarder">io.enmasse.v1beta1.AddressSpecForwarder</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>direction</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Direction of forwarder. 'in' means pulling from 'remoteAddress' into this address. 'out' means pushing from this address to 'remoteAddress'.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (in, out)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of forwarder.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>remoteAddress</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Remote address to send/receive messages to.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addressstatus">io.enmasse.v1beta1.AddressStatus</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>forwarders</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>List of forwarders with status.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_enmasse_v1beta1_addressstatusforwarder">io.enmasse.v1beta1.AddressStatusForwarder</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>isReady</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>messages</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>phase</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (Pending, Configuring, Active, Failed, Terminating)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addressstatusforwarder">io.enmasse.v1beta1.AddressStatusForwarder</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>isReady</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>'true' if forwarder is operating as expected, 'false' if not.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>messages</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Messages describing the forwarder state.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Name of forwarder.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_enmasse_v1beta1_addresstype">io.enmasse.v1beta1.AddressType</h5>
<div class="paragraph">
<p>Type of address (queue, topic, ). Each address type support different kinds of messaging semantics.</p>
</div>
<div class="paragraph">
<p><em>Type</em> : enum (queue, topic, anycast, multicast)</p>
</div>
</div>
<div class="sect4">
<h5 id="_io_k8s_api_networking_v1_ipblock">io.k8s.api.networking.v1.IPBlock</h5>
<div class="paragraph">
<p>IPBlock describes a particular CIDR (Ex. "192.168.1.1/24") that is allowed to the pods matched by a NetworkPolicySpec&#8217;s podSelector. The except entry describes CIDRs that should not be included within this rule.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>cidr</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>CIDR is a string representing the IP Block Valid examples are "192.168.1.1/24"</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>except</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Except is a slice of CIDRs that should not be included within an IP Block Valid examples are "192.168.1.1/24" Except values will be rejected if they are outside the CIDR range</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_k8s_api_networking_v1_networkpolicyegressrule">io.k8s.api.networking.v1.NetworkPolicyEgressRule</h5>
<div class="paragraph">
<p>NetworkPolicyEgressRule describes a particular set of traffic that is allowed out of pods matched by a NetworkPolicySpec&#8217;s podSelector. The traffic must match both ports and to. This type is beta-level in 1.8</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>ports</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>List of destination ports for outgoing traffic. Each item in this list is combined using a logical OR. If this field is empty or missing, this rule matches all ports (traffic not restricted by port). If this field is present and contains at least one item, then this rule allows traffic only if the traffic matches at least one port in the list.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_k8s_api_networking_v1_networkpolicyport">io.k8s.api.networking.v1.NetworkPolicyPort</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>to</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>List of destinations for outgoing traffic of pods selected for this rule. Items in this list are combined using a logical OR operation. If this field is empty or missing, this rule matches all destinations (traffic not restricted by destination). If this field is present and contains at least one item, this rule allows traffic only if the traffic matches at least one item in the to list.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_k8s_api_networking_v1_networkpolicypeer">io.k8s.api.networking.v1.NetworkPolicyPeer</a> &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_k8s_api_networking_v1_networkpolicyingressrule">io.k8s.api.networking.v1.NetworkPolicyIngressRule</h5>
<div class="paragraph">
<p>NetworkPolicyIngressRule describes a particular set of traffic that is allowed to the pods matched by a NetworkPolicySpec&#8217;s podSelector. The traffic must match both ports and from.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>from</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>List of sources which should be able to access the pods selected for this rule. Items in this list are combined using a logical OR operation. If this field is empty or missing, this rule matches all sources (traffic not restricted by source). If this field is present and contains at least on item, this rule allows traffic only if the traffic matches at least one item in the from list.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_k8s_api_networking_v1_networkpolicypeer">io.k8s.api.networking.v1.NetworkPolicyPeer</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>ports</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>List of ports which should be made accessible on the pods selected for this rule. Each item in this list is combined using a logical OR. If this field is empty or missing, this rule matches all ports (traffic not restricted by port). If this field is present and contains at least one item, then this rule allows traffic only if the traffic matches at least one port in the list.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_k8s_api_networking_v1_networkpolicyport">io.k8s.api.networking.v1.NetworkPolicyPort</a> &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_k8s_api_networking_v1_networkpolicypeer">io.k8s.api.networking.v1.NetworkPolicyPeer</h5>
<div class="paragraph">
<p>NetworkPolicyPeer describes a peer to allow traffic from. Only certain combinations of fields are allowed</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>ipBlock</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>IPBlock defines policy on a particular IPBlock. If this field is set then neither of the other fields can be.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_k8s_api_networking_v1_ipblock">io.k8s.api.networking.v1.IPBlock</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>namespaceSelector</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Selects Namespaces using cluster-scoped labels. This field follows standard label selector semantics; if present but empty, it selects all namespaces.</p>
</div>
<div class="paragraph">
<p>If PodSelector is also set, then the NetworkPolicyPeer as a whole selects the Pods matching PodSelector in the Namespaces selected by NamespaceSelector. Otherwise it selects all Pods in the Namespaces selected by NamespaceSelector.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_k8s_apimachinery_pkg_apis_meta_v1_labelselector">io.k8s.apimachinery.pkg.apis.meta.v1.LabelSelector</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>podSelector</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>This is a label selector which selects Pods. This field follows standard label selector semantics; if present but empty, it selects all pods.</p>
</div>
<div class="paragraph">
<p>If NamespaceSelector is also set, then the NetworkPolicyPeer as a whole selects the Pods matching PodSelector in the Namespaces selected by NamespaceSelector. Otherwise it selects the Pods matching PodSelector in the policy&#8217;s own Namespace.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_k8s_apimachinery_pkg_apis_meta_v1_labelselector">io.k8s.apimachinery.pkg.apis.meta.v1.LabelSelector</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_k8s_api_networking_v1_networkpolicyport">io.k8s.api.networking.v1.NetworkPolicyPort</h5>
<div class="paragraph">
<p>NetworkPolicyPort describes a port to allow traffic on</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>port</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>The port on the given protocol. This can either be a numerical or named port on a pod. If this field is not provided, this matches all port names and numbers.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_io_k8s_apimachinery_pkg_util_intstr_intorstring">io.k8s.apimachinery.pkg.util.intstr.IntOrString</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>protocol</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>The protocol (TCP or UDP) which traffic must match. If not specified, this field defaults to TCP.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_k8s_apimachinery_pkg_apis_meta_v1_labelselector">io.k8s.apimachinery.pkg.apis.meta.v1.LabelSelector</h5>
<div class="paragraph">
<p>A label selector is a label query over a set of resources. The result of matchLabels and matchExpressions are ANDed. An empty label selector matches all objects. A null label selector matches no objects.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>matchExpressions</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>matchExpressions is a list of label selector requirements. The requirements are ANDed.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; <a href="#_io_k8s_apimachinery_pkg_apis_meta_v1_labelselectorrequirement">io.k8s.apimachinery.pkg.apis.meta.v1.LabelSelectorRequirement</a> &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>matchLabels</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string, string &gt; map</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_k8s_apimachinery_pkg_apis_meta_v1_labelselectorrequirement">io.k8s.apimachinery.pkg.apis.meta.v1.LabelSelectorRequirement</h5>
<div class="paragraph">
<p>A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>key</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>key is the label key that the selector applies to.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>operator</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>operator represents a key&#8217;s relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>values</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_io_k8s_apimachinery_pkg_util_intstr_intorstring">io.k8s.apimachinery.pkg.util.intstr.IntOrString</h5>
<div class="paragraph">
<p>IntOrString is a type that can hold an int32 or a string. When used in JSON or YAML marshalling and unmarshalling, it produces or consumes the inner type. This allows you to have, for example, a JSON field that can accept a name or number.</p>
</div>
<div class="paragraph">
<p><em>Type</em> : string (int-or-string)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eclipse_hono_device_registry_api">F.2. Eclipse Hono Device Registry API</h3>
<div class="quoteblock abstract">
<div class="title">Abstract</div>
<blockquote>
This API defines how to manage <strong>Devices</strong> and their <strong>Credentials</strong>.
</blockquote>
</div>
<div class="sect3">
<h4 id="endpoints">F.2.1. Endpoints</h4>
<div class="sect4 Credentials">
<h5 id="credentials">Credentials</h5>
<div class="sect5 getAllCredentials">
<h6 id="getallcredentials">getAllCredentials</h6>
<div class="paragraph">
<p><code>GET /credentials/{tenantId}/{deviceId}</code></p>
</div>
<div class="paragraph">
<p>Get credentials set of a device.</p>
</div>
<div class="sect6">
<h7 id="description_24">Description</h7>
<div class="paragraph">
<p>Get the credentials set of a device. As long as the device is registered and the user has read access to it, this call should never return \"not found\". Depending on its implementation (or configuration), the device registry can either return all credentials information including full secret details or secret metadata along with the generated identifier (an <code>id</code> property). The identifier can be used for the follow-up <code>update</code> operation).</p>
</div>
</div>
<div class="sect6">
<h7 id="parameters_24">Parameters</h7>
<div class="sect7">
<h8 id="path_parameters">Path Parameters</h8>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tenantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the tenant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deviceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect6">
<h7 id="return_type">Return Type</h7>
<div class="paragraph">
<p>array[<a href="#TypedCredentials"><em>TypedCredentials</em></a>]</p>
</div>
</div>
<div class="sect6">
<h7 id="content_type">Content Type</h7>
<div class="ulist">
<ul>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="responses_24">Responses</h7>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. http response codes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Message</th>
<th class="tableblock halign-left valign-top">Datatype</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation successful</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List[<a href="#TypedCredentials"><em>TypedCredentials</em></a>]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Malformed request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication credentials are required, but missing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object not found. This may also be returned for some operations if the user misses read access for the object.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="samples">Samples</h7>

</div>
</div>
<div class="sect5 setAllCredentials">
<h6 id="setallcredentials">setAllCredentials</h6>
<div class="paragraph">
<p><code>PUT /credentials/{tenantId}/{deviceId}</code></p>
</div>
<div class="paragraph">
<p>Update credentials set for registered device</p>
</div>
<div class="sect6">
<h7 id="description_25">Description</h7>
<div class="paragraph">
<p>If the device registry is handling full secret details, the updated credential set will be an exact match of the provided content. If it is using secret metadata, data will be merged in based on the secret identities.</p>
</div>
</div>
<div class="sect6">
<h7 id="parameters_25">Parameters</h7>
<div class="sect7">
<h8 id="path_parameters_2">Path Parameters</h8>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tenantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the tenant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deviceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect6">
<h7 id="body_parameter">Body Parameter</h7>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TypedCredentials</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#TypedCredentials"><em>TypedCredentials</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="sect7">
<h8 id="header_parameters">Header Parameters</h8>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">If-Match</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expected resource version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect6">
<h7 id="return_type_2">Return Type</h7>
<div class="paragraph">
<p>-</p>
</div>
</div>
<div class="sect6">
<h7 id="content_type_2">Content Type</h7>
<div class="ulist">
<ul>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="responses_25">Responses</h7>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. http response codes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Message</th>
<th class="tableblock halign-left valign-top">Datatype</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object updated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Malformed request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication credentials are required, but missing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">403</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation not allowed. If the user does not have read access for this object, then &#x60;404&#x60; will be returned instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object not found. This may also be returned for some operations if the user misses read access for the object.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">412</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expected resource version does not match current. This can only happen when the request header &#x60;If-Match&#x60; was set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="samples_2">Samples</h7>

</div>
</div>
</div>
<div class="sect4 Devices">
<h5 id="devices">Devices</h5>
<div class="sect5 createDeviceRegistration">
<h6 id="createdeviceregistration">createDeviceRegistration</h6>
<div class="paragraph">
<p><code>POST /devices/{tenantId}</code></p>
</div>
<div class="paragraph">
<p>Create new device registration with auto-generated ID</p>
</div>
<div class="sect6">
<h7 id="description_26">Description</h7>

</div>
<div class="sect6">
<h7 id="parameters_26">Parameters</h7>
<div class="sect7">
<h8 id="path_parameters_3">Path Parameters</h8>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tenantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the tenant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect6">
<h7 id="body_parameter_2">Body Parameter</h7>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New device <a href="#Device"><em>Device</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="return_type_3">Return Type</h7>
<div class="paragraph">
<p><a href="#inline_response_201">[inline_response_201]</a></p>
</div>
</div>
<div class="sect6">
<h7 id="content_type_3">Content Type</h7>
<div class="ulist">
<ul>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="responses_26">Responses</h7>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. http response codes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Message</th>
<th class="tableblock halign-left valign-top">Datatype</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object created.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#inline_response_201">[inline_response_201]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Malformed request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication credentials are required, but missing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">403</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation not allowed. If the user does not have read access for this object, then &#x60;404&#x60; will be returned instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="samples_3">Samples</h7>

</div>
</div>
<div class="sect5 createDeviceRegistrationWithId">
<h6 id="createdeviceregistrationwithid">createDeviceRegistrationWithId</h6>
<div class="paragraph">
<p><code>POST /devices/{tenantId}/{deviceId}</code></p>
</div>
<div class="paragraph">
<p>Create new device registration</p>
</div>
<div class="sect6">
<h7 id="description_27">Description</h7>

</div>
<div class="sect6">
<h7 id="parameters_27">Parameters</h7>
<div class="sect7">
<h8 id="path_parameters_4">Path Parameters</h8>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tenantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the tenant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deviceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect6">
<h7 id="body_parameter_3">Body Parameter</h7>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New device <a href="#Device"><em>Device</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="return_type_4">Return Type</h7>
<div class="paragraph">
<p><a href="#inline_response_201">[inline_response_201]</a></p>
</div>
</div>
<div class="sect6">
<h7 id="content_type_4">Content Type</h7>
<div class="ulist">
<ul>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="responses_27">Responses</h7>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. http response codes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Message</th>
<th class="tableblock halign-left valign-top">Datatype</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object created.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#inline_response_201">[inline_response_201]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Malformed request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication credentials are required, but missing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">403</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation not allowed. If the user does not have read access for this object, then &#x60;404&#x60; will be returned instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">409</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object already exists. If the user has no read access for the existing object, then &#x60;403&#x60; should be returned instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="samples_4">Samples</h7>

</div>
</div>
<div class="sect5 deleteRegistration">
<h6 id="deleteregistration">deleteRegistration</h6>
<div class="paragraph">
<p><code>DELETE /devices/{tenantId}/{deviceId}</code></p>
</div>
<div class="paragraph">
<p>Delete device registration</p>
</div>
<div class="sect6">
<h7 id="description_28">Description</h7>

</div>
<div class="sect6">
<h7 id="parameters_28">Parameters</h7>
<div class="sect7">
<h8 id="path_parameters_5">Path Parameters</h8>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tenantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the tenant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deviceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect7">
<h8 id="header_parameters_2">Header Parameters</h8>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">If-Match</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expected resource version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect6">
<h7 id="return_type_5">Return Type</h7>
<div class="paragraph">
<p>-</p>
</div>
</div>
<div class="sect6">
<h7 id="content_type_5">Content Type</h7>
<div class="ulist">
<ul>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="responses_28">Responses</h7>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 19. http response codes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Message</th>
<th class="tableblock halign-left valign-top">Datatype</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object deleted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication credentials are required, but missing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">403</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation not allowed. If the user does not have read access for this object, then &#x60;404&#x60; will be returned instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object not found. This may also be returned for some operations if the user misses read access for the object.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">412</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expected resource version does not match current. This can only happen when the request header &#x60;If-Match&#x60; was set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="samples_5">Samples</h7>

</div>
</div>
<div class="sect5 getRegistration">
<h6 id="getregistration">getRegistration</h6>
<div class="paragraph">
<p><code>GET /devices/{tenantId}/{deviceId}</code></p>
</div>
<div class="paragraph">
<p>Get device registration information</p>
</div>
<div class="sect6">
<h7 id="description_29">Description</h7>

</div>
<div class="sect6">
<h7 id="parameters_29">Parameters</h7>
<div class="sect7">
<h8 id="path_parameters_6">Path Parameters</h8>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tenantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the tenant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deviceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect6">
<h7 id="return_type_6">Return Type</h7>
<div class="paragraph">
<p><a href="#Device"><em>Device</em></a></p>
</div>
</div>
<div class="sect6">
<h7 id="content_type_6">Content Type</h7>
<div class="ulist">
<ul>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="responses_29">Responses</h7>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 20. http response codes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Message</th>
<th class="tableblock halign-left valign-top">Datatype</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">operation successful</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Device"><em>Device</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Malformed request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication credentials are required, but missing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object not found. This may also be returned for some operations if the user misses read access for the object.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="samples_6">Samples</h7>

</div>
</div>
<div class="sect5 updateRegistration">
<h6 id="updateregistration">updateRegistration</h6>
<div class="paragraph">
<p><code>PUT /devices/{tenantId}/{deviceId}</code></p>
</div>
<div class="paragraph">
<p>Update existing device registration</p>
</div>
<div class="sect6">
<h7 id="description_30">Description</h7>

</div>
<div class="sect6">
<h7 id="parameters_30">Parameters</h7>
<div class="sect7">
<h8 id="path_parameters_7">Path Parameters</h8>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tenantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the tenant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deviceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect6">
<h7 id="body_parameter_4">Body Parameter</h7>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updated device registration <a href="#Device"><em>Device</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="sect7">
<h8 id="header_parameters_3">Header Parameters</h8>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">If-Match</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expected resource version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect6">
<h7 id="return_type_7">Return Type</h7>
<div class="paragraph">
<p>-</p>
</div>
</div>
<div class="sect6">
<h7 id="content_type_7">Content Type</h7>
<div class="ulist">
<ul>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="responses_30">Responses</h7>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 21. http response codes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Message</th>
<th class="tableblock halign-left valign-top">Datatype</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object updated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Malformed request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication credentials are required, but missing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">403</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation not allowed. If the user does not have read access for this object, then &#x60;404&#x60; will be returned instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object not found. This may also be returned for some operations if the user misses read access for the object.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">412</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expected resource version does not match current. This can only happen when the request header &#x60;If-Match&#x60; was set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Error"><em>Error</em></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="samples_7">Samples</h7>

</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="models">F.2.2. Models</h4>
<div class="sect4">
<h5 id="CommonCredentials"><em>CommonCredentials</em></h5>
<table class="tableblock frame-all grid-all stretch fields-CommonCredentials">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auth-id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ext</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map  of <a href="#object">[object]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows arbitrary properties as extension to the ones specified by the Hono API.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="CommonSecret"><em>CommonSecret</em></h5>
<table class="tableblock frame-all grid-all stretch fields-CommonSecret">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The device registry can assign an identity to the secret. This value can be used to update secrets based on their metadata.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not-before</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date-time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not-after</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date-time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">comment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="Device"><em>Device</em></h5>
<table class="tableblock frame-all grid-all stretch fields-Device">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">defaults</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map  of <a href="#object">[object]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defaults for properties defined on the tenant and device level.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">via</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List  of <a href="#string">[string]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The device IDs of the gateways that are registered to act on behalf of this device. Note that &amp;quot;via&amp;quot; and &amp;quot;memberOf&amp;quot; must not be set at the same time.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">viaGroups</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List  of <a href="#string">[string]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IDs of the gateway groups that are registered to act on behalf of this device. Note that &amp;quot;viaGroups&amp;quot; and &amp;quot;memberOf&amp;quot; must not be set at the same time.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">memberOf</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List  of <a href="#string">[string]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IDs of the gateway groups that this device is a member of. Note that &amp;quot;via&amp;quot; and &amp;quot;memberOf&amp;quot; must not be set at the same time. The same applies for &amp;quot;viaGroups&amp;quot; and &amp;quot;memberOf&amp;quot; which must be set at the same time too. The reason is that Eclipse Hono does not support groups of gateway groups.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ext</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map  of <a href="#object">[object]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows arbitrary properties as extension to the ones specified by the Hono API.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="Error"><em>Error</em></h5>
<table class="tableblock frame-all grid-all stretch fields-Error">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human readable error message of what went wrong.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="InlineResponse201"><em>InlineResponse201</em></h5>
<table class="tableblock frame-all grid-all stretch fields-InlineResponse201">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the created object</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="PSKCredentials"><em>PSKCredentials</em></h5>
<table class="tableblock frame-all grid-all stretch fields-PSKCredentials">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auth-id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ext</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map  of <a href="#object">[object]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows arbitrary properties as extension to the ones specified by the Hono API.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secrets</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List  of <a href="#PSKSecret"><em>PSKSecret</em></a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="PSKCredentialsAllOf"><em>PSKCredentialsAllOf</em></h5>
<table class="tableblock frame-all grid-all stretch fields-PSKCredentialsAllOf">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secrets</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List  of <a href="#PSKSecret"><em>PSKSecret</em></a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="PSKSecret"><em>PSKSecret</em></h5>
<table class="tableblock frame-all grid-all stretch fields-PSKSecret">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The device registry can assign an identity to the secret. This value can be used to update secrets based on their metadata.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not-before</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date-time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not-after</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date-time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">comment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte[]</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="PSKSecretAllOf"><em>PSKSecretAllOf</em></h5>
<table class="tableblock frame-all grid-all stretch fields-PSKSecretAllOf">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte[]</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="PasswordCredentials"><em>PasswordCredentials</em></h5>
<table class="tableblock frame-all grid-all stretch fields-PasswordCredentials">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auth-id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ext</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map  of <a href="#object">[object]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows arbitrary properties as extension to the ones specified by the Hono API.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secrets</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List  of <a href="#PasswordSecret"><em>PasswordSecret</em></a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="PasswordCredentialsAllOf"><em>PasswordCredentialsAllOf</em></h5>
<table class="tableblock frame-all grid-all stretch fields-PasswordCredentialsAllOf">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secrets</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List  of <a href="#PasswordSecret"><em>PasswordSecret</em></a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="PasswordSecret"><em>PasswordSecret</em></h5>
<table class="tableblock frame-all grid-all stretch fields-PasswordSecret">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The device registry can assign an identity to the secret. This value can be used to update secrets based on their metadata.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not-before</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date-time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not-after</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date-time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">comment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash-function</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the hash function used to create the password hash (defined in &#x60;pwd-hash&#x60; property). If the password is defined using a &#x60;pwd-plain&#x60; property, this value will be ignored by the device registry. This property should be empty when returning passwords from the device registry using only secret metadata. In this case the id field must be set instead.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pwd-hash</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password hash created using the &#x60;hash-function&#x60; and optional &#x60;salt&#x60; values. If the password is defined using a &#x60;pwd-plain&#x60; property, this value will be ignored by the device registry. This property should be empty when returning passwords from the device registry using only secret metadata. In this case the id field must be set instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">salt</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Base64 encoding of the salt used in the password hash (defined in the &#x60;pwd-hash&#x60; property). If the password is defined using a &#x60;pwd-plain&#x60; property, this value will be ignored by the device registry. This property should be empty when returning passwords from the device registry using only secret metadata. In this case the id field must be set instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pwd-plain</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The clear text value of the password to be hashed by the device registry. If this property is specified, the device registry will ignore user-provided hash properties (&#x60;hash-function&#x60;, &#x60;pwd-hash&#x60; and &#x60;salt&#x60;). This property must never be stored by the device registry. This property must be empty when returning passwords from the device registry.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="PasswordSecretAllOf"><em>PasswordSecretAllOf</em></h5>
<table class="tableblock frame-all grid-all stretch fields-PasswordSecretAllOf">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash-function</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the hash function used to create the password hash (defined in &#x60;pwd-hash&#x60; property). If the password is defined using a &#x60;pwd-plain&#x60; property, this value will be ignored by the device registry. This property should be empty when returning passwords from the device registry using only secret metadata. In this case the id field must be set instead.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pwd-hash</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password hash created using the &#x60;hash-function&#x60; and optional &#x60;salt&#x60; values. If the password is defined using a &#x60;pwd-plain&#x60; property, this value will be ignored by the device registry. This property should be empty when returning passwords from the device registry using only secret metadata. In this case the id field must be set instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">salt</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Base64 encoding of the salt used in the password hash (defined in the &#x60;pwd-hash&#x60; property). If the password is defined using a &#x60;pwd-plain&#x60; property, this value will be ignored by the device registry. This property should be empty when returning passwords from the device registry using only secret metadata. In this case the id field must be set instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pwd-plain</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The clear text value of the password to be hashed by the device registry. If this property is specified, the device registry will ignore user-provided hash properties (&#x60;hash-function&#x60;, &#x60;pwd-hash&#x60; and &#x60;salt&#x60;). This property must never be stored by the device registry. This property must be empty when returning passwords from the device registry.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="TypedCredentials"><em>TypedCredentials</em></h5>
<table class="tableblock frame-all grid-all stretch fields-TypedCredentials">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auth-id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ext</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map  of <a href="#object">[object]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows arbitrary properties as extension to the ones specified by the Hono API.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secrets</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List  of <a href="#X509CertificateSecret"><em>X509CertificateSecret</em></a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="X509CertificateCredentials"><em>X509CertificateCredentials</em></h5>
<table class="tableblock frame-all grid-all stretch fields-X509CertificateCredentials">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auth-id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ext</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map  of <a href="#object">[object]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows arbitrary properties as extension to the ones specified by the Hono API.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secrets</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List  of <a href="#X509CertificateSecret"><em>X509CertificateSecret</em></a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="X509CertificateCredentialsAllOf"><em>X509CertificateCredentialsAllOf</em></h5>
<table class="tableblock frame-all grid-all stretch fields-X509CertificateCredentialsAllOf">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secrets</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List  of <a href="#X509CertificateSecret"><em>X509CertificateSecret</em></a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="X509CertificateSecret"><em>X509CertificateSecret</em></h5>
<table class="tableblock frame-all grid-all stretch fields-X509CertificateSecret">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The device registry can assign an identity to the secret. This value can be used to update secrets based on their metadata.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not-before</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date-time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not-after</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date-time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">comment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>