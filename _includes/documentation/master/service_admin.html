<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#installing-openshift">1. Installing EnMasse on OpenShift</a>
<ul class="sectlevel3">
<li><a href="#prerequisites">1.1. Prerequisites</a>
<ul class="sectlevel4">
<li><a href="#installing_enmasse_in_single_tenant_mode">Installing EnMasse in Single-Tenant Mode</a></li>
<li><a href="#installing_enmasse_in_multi_tenant_mode">Installing EnMasse in Multi-Tenant Mode</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="installing-openshift">1. Installing EnMasse on OpenShift</h3>
<div class="sect3">
<h4 id="prerequisites">1.1. Prerequisites</h4>
<div class="paragraph">
<p>To install EnMasse, you need to have the OpenShift client tools. You can download the OpenShift
Origin client from <a href="https://github.com/openshift/origin/releases">OpenShift Origin</a>. EnMasse has
been tested to work with the latest stable release of the OpenShift Origin Client.</p>
</div>
<div class="paragraph">
<p>If you do not have an OpenShift cluster available, see
<a href="https://github.com/minishift/minishift">minishift</a> for an example of how to run a local instance of OpenShift
on your machine.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download one of the releases from <a href="https://github.com/EnMasseProject/enmasse/releases" class="bare">https://github.com/EnMasseProject/enmasse/releases</a> and unpack it.</p>
</li>
<li>
<p>Deploy EnMasse using the deployment script provided in the release.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can invoke the deployment script with <code>-h</code> to view a list of options.</p>
</div>
<div class="sect4">
<h5 id="installing_enmasse_in_single_tenant_mode">Installing EnMasse in Single-Tenant Mode</h5>
<div class="paragraph">
<p>EnMasse can be deployed in either a single-tenant mode or a multi-tenant mode. Choose
single-tenant mode if you do not expect to be creating multiple isolated address spaces or if you do
not have cluster-admin privileges. Otherwise, choose multi-tenant mode.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To install EnMasse in single-tenant mode run the following script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>./deploy-openshift.sh -m "https://localhost:8443" -n enmasse -o singletenant</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running this script creates the deployments required for running EnMasse in single-tenant mode. Starting
up EnMasse will take a while, usually depending on how fast it is able to download the Docker
images for the various components.</p>
</div>
</li>
<li>
<p>You can use the REST API to check the status of the deployment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>curl http://$(oc get route restapi -o jsonpath='{.spec.host}')/v1/addressspaces/default</code></pre>
</div>
</div>
<div class="paragraph">
<p>The deployment is finished when <code>status.isReady</code> is <code>true</code> in the returned JSON object.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="installing_enmasse_in_multi_tenant_mode">Installing EnMasse in Multi-Tenant Mode</h5>
<div class="paragraph">
<p>EnMasse can be deployed in either a single-tenant mode or a multi-tenant mode. Choose
single-tenant mode if you do not expect to be creating multiple isolated address spaces or if you do
not have cluster-admin privileges. Otherwise, choose multi-tenant mode.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To install EnMasse in multi-tenant mode, run the following script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>./deploy-openshift.sh -m "https://localhost:8443" -n enmasse -o multitenant</code></pre>
</div>
</div>
</li>
<li>
<p>Grant cluster-admin privileges:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>oc login -u system:admin
oc adm policy add-cluster-role-to-user cluster-admin system:serviceaccount:$(oc project -q):enmasse-service-account
oc adm policy add-cluster-role-to-user cluster-admin developer</code></pre>
</div>
</div>
<div class="paragraph">
<p>The deployments required for running EnMasse in multi-tenant mode are created.
EnMasse will be up and running once all pods in the 'enmasse' namespace are in the <code>Running</code> state:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>oc get pods -n enmasse</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>